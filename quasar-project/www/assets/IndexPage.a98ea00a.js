import{c as Ke,d as go,e as di,f as O,h as q,m as at,k as am,q as lm,g as Ne,i as um,r as Y,o as Ut,w as me,D as Kc,a as Ze,E as cm,F as Wc,G as Aa,H as gt,b as $e,I as Wo,J as Qc,K as _t,Q as cn,L as hm,T as hr,M as Qo,N as Nt,O as Dt,P as dm,R as fm,S as po,U as Gc,V as Xc,W as ao,t as mm,X as gm,Y as pm,Z as vm,l as Vt,_ as ym,$ as Sr,a0 as Yc,a1 as _m,a2 as wm,j as Em,a3 as Tm,x as Mt,a4 as zn,a5 as Ee,A as fe,a6 as Le,z as Pe,a7 as vo,a8 as Ws,a9 as yo,aa as Jc,ab as Zc,ac as eh,ad as bm,ae as Im,af as Am,ag as Sm,ah as Cm,ai as Rm,aj as _o,ak as Qs,al as km,n as th,am as nh,an as Pm,ao as Qi,u as Vm,ap as Ji,y as Gs,aq as xm,ar as ih,as as Dm,at as Nm,au as ou}from"./index.d1a14989.js";import{b as Mm,a as Om,h as Lm,c as Fm,s as rh,g as oh}from"./scroll.039c2652.js";var Bm=Ke({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:e}){const{proxy:{$q:n}}=Ne(),i=go(am,di);if(i===di)return console.error("QPage needs to be a deep child of QLayout"),di;if(go(lm,di)===di)return console.error("QPage needs to be child of QPageContainer"),di;const s=O(()=>{const l=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof t.styleFn=="function"){const c=i.isContainer.value===!0?i.containerHeight.value:n.screen.height;return t.styleFn(l,c)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-l+"px":n.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":n.screen.height-l+"px"}}),a=O(()=>`q-page${t.padding===!0?" q-layout-padding":""}`);return()=>q("main",{class:a.value,style:s.value},at(e.default))}}),qm="/assets/syncimg.80e5cd61.png",$m="/assets/empty.859ad562.png";const Um=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},zm=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ah={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=s>>2,g=(s&3)<<4|l>>4;let T=(l&15)<<2|d>>6,_=d&63;c||(_=64,a||(T=64)),i.push(n[f],n[g],n[T],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sh(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zm(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||d==null||g==null)throw new jm;const T=s<<2|l>>4;if(i.push(T),d!==64){const _=l<<4&240|d>>2;if(i.push(_),g!==64){const A=d<<6&192|g;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hm=function(t){const e=sh(t);return ah.encodeByteArray(e,!0)},wo=function(t){return Hm(t).replace(/\./g,"")},Km=function(t){try{return ah.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=()=>Wm().__FIREBASE_DEFAULTS__,Gm=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xm=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Km(t[1]);return e&&JSON.parse(e)},Sa=()=>{try{return Um()||Qm()||Gm()||Xm()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ym=t=>{var e,n;return(n=(e=Sa())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Jm=t=>{const e=Ym(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},lh=()=>{var t;return(t=Sa())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){return t.endsWith(".cloudworkstations.dev")}async function eg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[wo(JSON.stringify(n)),wo(JSON.stringify(a)),l].join(".")}const ir={};function ng(){const t={prod:[],emulator:[]};for(const e of Object.keys(ir))ir[e]?t.emulator.push(e):t.prod.push(e);return t}function ig(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let su=!1;function rg(t,e){if(typeof window=="undefined"||typeof document=="undefined"||!Ca(window.location.host)||ir[t]===e||ir[t]||su)return;ir[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",s=ng().prod.length>0;function a(){const T=document.getElementById(i);T&&T.remove()}function l(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function c(T,_){T.setAttribute("width","24"),T.setAttribute("id",_),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function d(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{su=!0,a()},T}function f(T,_){T.setAttribute("id",_),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function g(){const T=ig(i),_=n("text"),A=document.getElementById(_)||document.createElement("span"),V=n("learnmore"),R=document.getElementById(V)||document.createElement("a"),L=n("preprendIcon"),M=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;l(F),f(R,V);const U=d();c(M,L),F.append(M,A,R,U),document.body.appendChild(F)}s?(A.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sg(){var t;const e=(t=Sa())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ag(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lg(){return!sg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uh(){try{return typeof indexedDB=="object"}catch{return!1}}function ch(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function ug(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="FirebaseError";class bn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=cg,Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Go.prototype.create)}}class Go{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?hg(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new bn(r,l,i)}}function hg(t,e){return t.replace(dg,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const dg=/\{\$([^}]+)}/g;function dr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(au(s)&&au(a)){if(!dr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function au(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=1e3,mg=2,gg=4*60*60*1e3,pg=.5;function lu(t,e=fg,n=mg){const i=e*Math.pow(n,t),r=Math.round(pg*i*(Math.random()-.5)*2);return Math.min(gg,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class Gt{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Zm;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_g(e))try{this.getOrInitializeService({instanceIdentifier:Bn})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Bn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bn){return this.instances.has(e)}getOptions(e=Bn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(!!i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yg(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bn){return this.component?this.component.multipleInstances?e:Bn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yg(t){return t===Bn?void 0:t}function _g(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const Eg={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Tg=we.INFO,bg={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},Ig=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=bg[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ra{constructor(e){this.name=e,this._logLevel=Tg,this._logHandler=Ig,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Eg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const Ag=(t,e)=>e.some(n=>t instanceof n);let uu,cu;function Sg(){return uu||(uu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cg(){return cu||(cu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hh=new WeakMap,Xs=new WeakMap,dh=new WeakMap,Ss=new WeakMap,ka=new WeakMap;function Rg(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(hn(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&hh.set(n,t)}).catch(()=>{}),ka.set(e,t),e}function kg(t){if(Xs.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Xs.set(t,e)}let Ys={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xs.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dh.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Pg(t){Ys=t(Ys)}function Vg(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Cs(this),e,...n);return dh.set(i,e.sort?e.sort():[e]),hn(i)}:Cg().includes(t)?function(...e){return t.apply(Cs(this),e),hn(hh.get(this))}:function(...e){return hn(t.apply(Cs(this),e))}}function xg(t){return typeof t=="function"?Vg(t):(t instanceof IDBTransaction&&kg(t),Ag(t,Sg())?new Proxy(t,Ys):t)}function hn(t){if(t instanceof IDBRequest)return Rg(t);if(Ss.has(t))return Ss.get(t);const e=xg(t);return e!==t&&(Ss.set(t,e),ka.set(e,t)),e}const Cs=t=>ka.get(t);function fh(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=hn(a);return i&&a.addEventListener("upgradeneeded",c=>{i(hn(a.result),c.oldVersion,c.newVersion,hn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Dg=["get","getKey","getAll","getAllKeys","count"],Ng=["put","add","delete","clear"],Rs=new Map;function hu(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rs.get(e))return Rs.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Ng.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Dg.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&c.done]))[0]};return Rs.set(e,s),s}Pg(t=>({...t,get:(e,n,i)=>hu(e,n)||t.get(e,n,i),has:(e,n)=>!!hu(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Og(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Og(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Js="@firebase/app",du="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt=new Ra("@firebase/app"),Lg="@firebase/app-compat",Fg="@firebase/analytics-compat",Bg="@firebase/analytics",qg="@firebase/app-check-compat",$g="@firebase/app-check",Ug="@firebase/auth",zg="@firebase/auth-compat",jg="@firebase/database",Hg="@firebase/data-connect",Kg="@firebase/database-compat",Wg="@firebase/functions",Qg="@firebase/functions-compat",Gg="@firebase/installations",Xg="@firebase/installations-compat",Yg="@firebase/messaging",Jg="@firebase/messaging-compat",Zg="@firebase/performance",ep="@firebase/performance-compat",tp="@firebase/remote-config",np="@firebase/remote-config-compat",ip="@firebase/storage",rp="@firebase/storage-compat",op="@firebase/firestore",sp="@firebase/ai",ap="@firebase/firestore-compat",lp="firebase",up="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="[DEFAULT]",cp={[Js]:"fire-core",[Lg]:"fire-core-compat",[Bg]:"fire-analytics",[Fg]:"fire-analytics-compat",[$g]:"fire-app-check",[qg]:"fire-app-check-compat",[Ug]:"fire-auth",[zg]:"fire-auth-compat",[jg]:"fire-rtdb",[Hg]:"fire-data-connect",[Kg]:"fire-rtdb-compat",[Wg]:"fire-fn",[Qg]:"fire-fn-compat",[Gg]:"fire-iid",[Xg]:"fire-iid-compat",[Yg]:"fire-fcm",[Jg]:"fire-fcm-compat",[Zg]:"fire-perf",[ep]:"fire-perf-compat",[tp]:"fire-rc",[np]:"fire-rc-compat",[ip]:"fire-gcs",[rp]:"fire-gcs-compat",[op]:"fire-fst",[ap]:"fire-fst-compat",[sp]:"fire-vertex","fire-js":"fire-js",[lp]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Map,hp=new Map,ea=new Map;function fu(t,e){try{t.container.addComponent(e)}catch(n){Xt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pn(t){const e=t.name;if(ea.has(e))return Xt.debug(`There were multiple attempts to register component ${e}.`),!1;ea.set(e,t);for(const n of Eo.values())fu(n,t);for(const n of hp.values())fu(n,t);return!0}function Cr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},dn=new Go("app","Firebase",fp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=up;function mh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Zs,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw dn.create("bad-app-name",{appName:String(r)});if(n||(n=lh()),!n)throw dn.create("no-options");const s=Eo.get(r);if(s){if(dr(n,s.options)&&dr(i,s.config))return s;throw dn.create("duplicate-app",{appName:r})}const a=new wg(r);for(const c of ea.values())a.addComponent(c);const l=new mp(n,i,a);return Eo.set(r,l),l}function gh(t=Zs){const e=Eo.get(t);if(!e&&t===Zs&&lh())return mh();if(!e)throw dn.create("no-app",{appName:t});return e}function Ot(t,e,n){var i;let r=(i=cp[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xt.warn(l.join(" "));return}pn(new Gt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="firebase-heartbeat-database",vp=1,fr="firebase-heartbeat-store";let ks=null;function ph(){return ks||(ks=fh(pp,vp,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fr)}catch(n){console.warn(n)}}}}).catch(t=>{throw dn.create("idb-open",{originalErrorMessage:t.message})})),ks}async function yp(t){try{const n=(await ph()).transaction(fr),i=await n.objectStore(fr).get(vh(t));return await n.done,i}catch(e){if(e instanceof bn)Xt.warn(e.message);else{const n=dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xt.warn(n.message)}}}async function mu(t,e){try{const i=(await ph()).transaction(fr,"readwrite");await i.objectStore(fr).put(e,vh(t)),await i.done}catch(n){if(n instanceof bn)Xt.warn(n.message);else{const i=dn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xt.warn(i.message)}}}function vh(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=1024,wp=30;class Ep{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bp(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gu();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>wp){const a=Ip(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Xt.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gu(),{heartbeatsToSend:i,unsentEntries:r}=Tp(this._heartbeatsCache.heartbeats),s=wo(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xt.warn(n),""}}}function gu(){return new Date().toISOString().substring(0,10)}function Tp(t,e=_p){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),pu(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),pu(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class bp{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uh()?ch().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yp(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return mu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return mu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pu(t){return wo(JSON.stringify({version:2,heartbeats:t})).length}function Ip(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){pn(new Gt("platform-logger",e=>new Mg(e),"PRIVATE")),pn(new Gt("heartbeat",e=>new Ep(e),"PRIVATE")),Ot(Js,du,t),Ot(Js,du,"esm2017"),Ot("fire-js","")}Ap("");var vu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fn,yh;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function p(){}p.prototype=y.prototype,I.D=y.prototype,I.prototype=new p,I.prototype.constructor=I,I.C=function(v,b,E){for(var w=Array(arguments.length-2),te=2;te<arguments.length;te++)w[te-2]=arguments[te];return y.prototype[b].apply(v,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,y,p){p||(p=0);var v=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)v[b]=y.charCodeAt(p++)|y.charCodeAt(p++)<<8|y.charCodeAt(p++)<<16|y.charCodeAt(p++)<<24;else for(b=0;16>b;++b)v[b]=y[p++]|y[p++]<<8|y[p++]<<16|y[p++]<<24;y=I.g[0],p=I.g[1],b=I.g[2];var E=I.g[3],w=y+(E^p&(b^E))+v[0]+3614090360&4294967295;y=p+(w<<7&4294967295|w>>>25),w=E+(b^y&(p^b))+v[1]+3905402710&4294967295,E=y+(w<<12&4294967295|w>>>20),w=b+(p^E&(y^p))+v[2]+606105819&4294967295,b=E+(w<<17&4294967295|w>>>15),w=p+(y^b&(E^y))+v[3]+3250441966&4294967295,p=b+(w<<22&4294967295|w>>>10),w=y+(E^p&(b^E))+v[4]+4118548399&4294967295,y=p+(w<<7&4294967295|w>>>25),w=E+(b^y&(p^b))+v[5]+1200080426&4294967295,E=y+(w<<12&4294967295|w>>>20),w=b+(p^E&(y^p))+v[6]+2821735955&4294967295,b=E+(w<<17&4294967295|w>>>15),w=p+(y^b&(E^y))+v[7]+4249261313&4294967295,p=b+(w<<22&4294967295|w>>>10),w=y+(E^p&(b^E))+v[8]+1770035416&4294967295,y=p+(w<<7&4294967295|w>>>25),w=E+(b^y&(p^b))+v[9]+2336552879&4294967295,E=y+(w<<12&4294967295|w>>>20),w=b+(p^E&(y^p))+v[10]+4294925233&4294967295,b=E+(w<<17&4294967295|w>>>15),w=p+(y^b&(E^y))+v[11]+2304563134&4294967295,p=b+(w<<22&4294967295|w>>>10),w=y+(E^p&(b^E))+v[12]+1804603682&4294967295,y=p+(w<<7&4294967295|w>>>25),w=E+(b^y&(p^b))+v[13]+4254626195&4294967295,E=y+(w<<12&4294967295|w>>>20),w=b+(p^E&(y^p))+v[14]+2792965006&4294967295,b=E+(w<<17&4294967295|w>>>15),w=p+(y^b&(E^y))+v[15]+1236535329&4294967295,p=b+(w<<22&4294967295|w>>>10),w=y+(b^E&(p^b))+v[1]+4129170786&4294967295,y=p+(w<<5&4294967295|w>>>27),w=E+(p^b&(y^p))+v[6]+3225465664&4294967295,E=y+(w<<9&4294967295|w>>>23),w=b+(y^p&(E^y))+v[11]+643717713&4294967295,b=E+(w<<14&4294967295|w>>>18),w=p+(E^y&(b^E))+v[0]+3921069994&4294967295,p=b+(w<<20&4294967295|w>>>12),w=y+(b^E&(p^b))+v[5]+3593408605&4294967295,y=p+(w<<5&4294967295|w>>>27),w=E+(p^b&(y^p))+v[10]+38016083&4294967295,E=y+(w<<9&4294967295|w>>>23),w=b+(y^p&(E^y))+v[15]+3634488961&4294967295,b=E+(w<<14&4294967295|w>>>18),w=p+(E^y&(b^E))+v[4]+3889429448&4294967295,p=b+(w<<20&4294967295|w>>>12),w=y+(b^E&(p^b))+v[9]+568446438&4294967295,y=p+(w<<5&4294967295|w>>>27),w=E+(p^b&(y^p))+v[14]+3275163606&4294967295,E=y+(w<<9&4294967295|w>>>23),w=b+(y^p&(E^y))+v[3]+4107603335&4294967295,b=E+(w<<14&4294967295|w>>>18),w=p+(E^y&(b^E))+v[8]+1163531501&4294967295,p=b+(w<<20&4294967295|w>>>12),w=y+(b^E&(p^b))+v[13]+2850285829&4294967295,y=p+(w<<5&4294967295|w>>>27),w=E+(p^b&(y^p))+v[2]+4243563512&4294967295,E=y+(w<<9&4294967295|w>>>23),w=b+(y^p&(E^y))+v[7]+1735328473&4294967295,b=E+(w<<14&4294967295|w>>>18),w=p+(E^y&(b^E))+v[12]+2368359562&4294967295,p=b+(w<<20&4294967295|w>>>12),w=y+(p^b^E)+v[5]+4294588738&4294967295,y=p+(w<<4&4294967295|w>>>28),w=E+(y^p^b)+v[8]+2272392833&4294967295,E=y+(w<<11&4294967295|w>>>21),w=b+(E^y^p)+v[11]+1839030562&4294967295,b=E+(w<<16&4294967295|w>>>16),w=p+(b^E^y)+v[14]+4259657740&4294967295,p=b+(w<<23&4294967295|w>>>9),w=y+(p^b^E)+v[1]+2763975236&4294967295,y=p+(w<<4&4294967295|w>>>28),w=E+(y^p^b)+v[4]+1272893353&4294967295,E=y+(w<<11&4294967295|w>>>21),w=b+(E^y^p)+v[7]+4139469664&4294967295,b=E+(w<<16&4294967295|w>>>16),w=p+(b^E^y)+v[10]+3200236656&4294967295,p=b+(w<<23&4294967295|w>>>9),w=y+(p^b^E)+v[13]+681279174&4294967295,y=p+(w<<4&4294967295|w>>>28),w=E+(y^p^b)+v[0]+3936430074&4294967295,E=y+(w<<11&4294967295|w>>>21),w=b+(E^y^p)+v[3]+3572445317&4294967295,b=E+(w<<16&4294967295|w>>>16),w=p+(b^E^y)+v[6]+76029189&4294967295,p=b+(w<<23&4294967295|w>>>9),w=y+(p^b^E)+v[9]+3654602809&4294967295,y=p+(w<<4&4294967295|w>>>28),w=E+(y^p^b)+v[12]+3873151461&4294967295,E=y+(w<<11&4294967295|w>>>21),w=b+(E^y^p)+v[15]+530742520&4294967295,b=E+(w<<16&4294967295|w>>>16),w=p+(b^E^y)+v[2]+3299628645&4294967295,p=b+(w<<23&4294967295|w>>>9),w=y+(b^(p|~E))+v[0]+4096336452&4294967295,y=p+(w<<6&4294967295|w>>>26),w=E+(p^(y|~b))+v[7]+1126891415&4294967295,E=y+(w<<10&4294967295|w>>>22),w=b+(y^(E|~p))+v[14]+2878612391&4294967295,b=E+(w<<15&4294967295|w>>>17),w=p+(E^(b|~y))+v[5]+4237533241&4294967295,p=b+(w<<21&4294967295|w>>>11),w=y+(b^(p|~E))+v[12]+1700485571&4294967295,y=p+(w<<6&4294967295|w>>>26),w=E+(p^(y|~b))+v[3]+2399980690&4294967295,E=y+(w<<10&4294967295|w>>>22),w=b+(y^(E|~p))+v[10]+4293915773&4294967295,b=E+(w<<15&4294967295|w>>>17),w=p+(E^(b|~y))+v[1]+2240044497&4294967295,p=b+(w<<21&4294967295|w>>>11),w=y+(b^(p|~E))+v[8]+1873313359&4294967295,y=p+(w<<6&4294967295|w>>>26),w=E+(p^(y|~b))+v[15]+4264355552&4294967295,E=y+(w<<10&4294967295|w>>>22),w=b+(y^(E|~p))+v[6]+2734768916&4294967295,b=E+(w<<15&4294967295|w>>>17),w=p+(E^(b|~y))+v[13]+1309151649&4294967295,p=b+(w<<21&4294967295|w>>>11),w=y+(b^(p|~E))+v[4]+4149444226&4294967295,y=p+(w<<6&4294967295|w>>>26),w=E+(p^(y|~b))+v[11]+3174756917&4294967295,E=y+(w<<10&4294967295|w>>>22),w=b+(y^(E|~p))+v[2]+718787259&4294967295,b=E+(w<<15&4294967295|w>>>17),w=p+(E^(b|~y))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+E&4294967295}i.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var p=y-this.blockSize,v=this.B,b=this.h,E=0;E<y;){if(b==0)for(;E<=p;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<y;)if(v[b++]=I.charCodeAt(E++),b==this.blockSize){r(this,v),b=0;break}}else for(;E<y;)if(v[b++]=I[E++],b==this.blockSize){r(this,v),b=0;break}}this.h=b,this.o+=y},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var p=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=p&255,p/=256;for(this.u(I),I=Array(16),y=p=0;4>y;++y)for(var v=0;32>v;v+=8)I[p++]=this.g[y]>>>v&255;return I};function s(I,y){var p=l;return Object.prototype.hasOwnProperty.call(p,I)?p[I]:p[I]=y(I)}function a(I,y){this.h=y;for(var p=[],v=!0,b=I.length-1;0<=b;b--){var E=I[b]|0;v&&E==y||(p[b]=E,v=!1)}this.g=p}var l={};function c(I){return-128<=I&&128>I?s(I,function(y){return new a([y|0],0>y?-1:0)}):new a([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return R(d(-I));for(var y=[],p=1,v=0;I>=p;v++)y[v]=I/p|0,p*=4294967296;return new a(y,0)}function f(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return R(f(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var p=d(Math.pow(y,8)),v=g,b=0;b<I.length;b+=8){var E=Math.min(8,I.length-b),w=parseInt(I.substring(b,b+E),y);8>E?(E=d(Math.pow(y,E)),v=v.j(E).add(d(w))):(v=v.j(p),v=v.add(d(w)))}return v}var g=c(0),T=c(1),_=c(16777216);t=a.prototype,t.m=function(){if(V(this))return-R(this).m();for(var I=0,y=1,p=0;p<this.g.length;p++){var v=this.i(p);I+=(0<=v?v:4294967296+v)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(V(this))return"-"+R(this).toString(I);for(var y=d(Math.pow(I,6)),p=this,v="";;){var b=U(p,y).g;p=L(p,b.j(y));var E=((0<p.g.length?p.g[0]:p.h)>>>0).toString(I);if(p=b,A(p))return E+v;for(;6>E.length;)E="0"+E;v=E+v}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function V(I){return I.h==-1}t.l=function(I){return I=L(this,I),V(I)?-1:A(I)?0:1};function R(I){for(var y=I.g.length,p=[],v=0;v<y;v++)p[v]=~I.g[v];return new a(p,~I.h).add(T)}t.abs=function(){return V(this)?R(this):this},t.add=function(I){for(var y=Math.max(this.g.length,I.g.length),p=[],v=0,b=0;b<=y;b++){var E=v+(this.i(b)&65535)+(I.i(b)&65535),w=(E>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);v=w>>>16,E&=65535,w&=65535,p[b]=w<<16|E}return new a(p,p[p.length-1]&-2147483648?-1:0)};function L(I,y){return I.add(R(y))}t.j=function(I){if(A(this)||A(I))return g;if(V(this))return V(I)?R(this).j(R(I)):R(R(this).j(I));if(V(I))return R(this.j(R(I)));if(0>this.l(_)&&0>I.l(_))return d(this.m()*I.m());for(var y=this.g.length+I.g.length,p=[],v=0;v<2*y;v++)p[v]=0;for(v=0;v<this.g.length;v++)for(var b=0;b<I.g.length;b++){var E=this.i(v)>>>16,w=this.i(v)&65535,te=I.i(b)>>>16,ce=I.i(b)&65535;p[2*v+2*b]+=w*ce,M(p,2*v+2*b),p[2*v+2*b+1]+=E*ce,M(p,2*v+2*b+1),p[2*v+2*b+1]+=w*te,M(p,2*v+2*b+1),p[2*v+2*b+2]+=E*te,M(p,2*v+2*b+2)}for(v=0;v<y;v++)p[v]=p[2*v+1]<<16|p[2*v];for(v=y;v<2*y;v++)p[v]=0;return new a(p,0)};function M(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function U(I,y){if(A(y))throw Error("division by zero");if(A(I))return new F(g,g);if(V(I))return y=U(R(I),y),new F(R(y.g),R(y.h));if(V(y))return y=U(I,R(y)),new F(R(y.g),y.h);if(30<I.g.length){if(V(I)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var p=T,v=y;0>=v.l(I);)p=H(p),v=H(v);var b=G(p,1),E=G(v,1);for(v=G(v,2),p=G(p,2);!A(v);){var w=E.add(v);0>=w.l(I)&&(b=b.add(p),E=w),v=G(v,1),p=G(p,1)}return y=L(I,b.j(y)),new F(b,y)}for(b=g;0<=I.l(y);){for(p=Math.max(1,Math.floor(I.m()/y.m())),v=Math.ceil(Math.log(p)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),E=d(p),w=E.j(y);V(w)||0<w.l(I);)p-=v,E=d(p),w=E.j(y);A(E)&&(E=T),b=b.add(E),I=L(I,w)}return new F(b,I)}t.A=function(I){return U(this,I).h},t.and=function(I){for(var y=Math.max(this.g.length,I.g.length),p=[],v=0;v<y;v++)p[v]=this.i(v)&I.i(v);return new a(p,this.h&I.h)},t.or=function(I){for(var y=Math.max(this.g.length,I.g.length),p=[],v=0;v<y;v++)p[v]=this.i(v)|I.i(v);return new a(p,this.h|I.h)},t.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),p=[],v=0;v<y;v++)p[v]=this.i(v)^I.i(v);return new a(p,this.h^I.h)};function H(I){for(var y=I.g.length+1,p=[],v=0;v<y;v++)p[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(p,I.h)}function G(I,y){var p=y>>5;y%=32;for(var v=I.g.length-p,b=[],E=0;E<v;E++)b[E]=0<y?I.i(E+p)>>>y|I.i(E+p+1)<<32-y:I.i(E+p);return new a(b,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yh=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,fn=a}).apply(typeof vu!="undefined"?vu:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Xr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _h,Zi,wh,lo,ta,Eh,Th,bh;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xr=="object"&&Xr];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=n(this);function r(o,u){if(u)e:{var h=i;o=o.split(".");for(var m=0;m<o.length-1;m++){var P=o[m];if(!(P in h))break e;h=h[P]}o=o[o.length-1],m=h[o],u=u(m),u!=m&&u!=null&&e(h,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var h=0,m=!1,P={next:function(){if(!m&&h<o.length){var N=h++;return{value:u(N,o[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}r("Array.prototype.values",function(o){return o||function(){return s(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,h){return o.call.apply(o.bind,arguments)}function g(o,u,h){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,m),o.apply(u,P)}}return function(){return o.apply(u,arguments)}}function T(o,u,h){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,T.apply(null,arguments)}function _(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function A(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(m,P,N){for(var W=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)W[Ce-2]=arguments[Ce];return u.prototype[P].apply(m,W)}}function V(o){const u=o.length;if(0<u){const h=Array(u);for(let m=0;m<u;m++)h[m]=o[m];return h}return[]}function R(o,u){for(let h=1;h<arguments.length;h++){const m=arguments[h];if(c(m)){const P=o.length||0,N=m.length||0;o.length=P+N;for(let W=0;W<N;W++)o[P+W]=m[W]}else o.push(m)}}class L{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function M(o){return/^[\s\xa0]*$/.test(o)}function F(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function U(o){return U[" "](o),o}U[" "]=function(){};var H=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function G(o,u,h){for(const m in o)u.call(h,o[m],m,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function y(o){const u={};for(const h in o)u[h]=o[h];return u}const p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,u){let h,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(h in m)o[h]=m[h];for(let N=0;N<p.length;N++)h=p[N],Object.prototype.hasOwnProperty.call(m,h)&&(o[h]=m[h])}}function b(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function E(o){l.setTimeout(()=>{throw o},0)}function w(){var o=Z;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class te{constructor(){this.h=this.g=null}add(u,h){const m=ce.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var ce=new L(()=>new ee,o=>o.reset());class ee{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,K=!1,Z=new te,re=()=>{const o=l.Promise.resolve(void 0);oe=()=>{o.then(D)}};var D=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(h){E(h)}var u=ce;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}K=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o}();function se(o,u){if($.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(H){e:{try{U(u.nodeName);var P=!0;break e}catch{}P=!1}P||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:C[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&se.aa.h.call(this)}}A(se,$);var C={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var x="closure_listenable_"+(1e6*Math.random()|0),ne=0;function j(o,u,h,m,P){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=P,this.key=++ne,this.da=this.fa=!1}function ye(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Me(o){this.src=o,this.g={},this.h=0}Me.prototype.add=function(o,u,h,m,P){var N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);var W=lt(o,u,m,P);return-1<W?(u=o[W],h||(u.fa=!1)):(u=new j(u,this.src,N,!!m,P),u.fa=h,o.push(u)),u};function St(o,u){var h=u.type;if(h in o.g){var m=o.g[h],P=Array.prototype.indexOf.call(m,u,void 0),N;(N=0<=P)&&Array.prototype.splice.call(m,P,1),N&&(ye(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function lt(o,u,h,m){for(var P=0;P<o.length;++P){var N=o[P];if(!N.da&&N.listener==u&&N.capture==!!h&&N.ha==m)return P}return-1}var Zt="closure_lm_"+(1e6*Math.random()|0),Et={};function Ct(o,u,h,m,P){if(m&&m.once)return ei(o,u,h,m,P);if(Array.isArray(u)){for(var N=0;N<u.length;N++)Ct(o,u[N],h,m,P);return null}return h=ti(h),o&&o[x]?o.K(u,h,d(m)?!!m.capture:!!m,P):Sn(o,u,h,!1,m,P)}function Sn(o,u,h,m,P,N){if(!u)throw Error("Invalid event type");var W=d(P)?!!P.capture:!!P,Ce=nn(o);if(Ce||(o[Zt]=Ce=new Me(o)),h=Ce.add(u,h,m,W,N),h.proxy)return h;if(m=Cn(),h.proxy=m,m.src=o,m.listener=h,o.addEventListener)le||(P=W),P===void 0&&(P=!1),o.addEventListener(u.toString(),m,P);else if(o.attachEvent)o.attachEvent(tt(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Cn(){function o(h){return u.call(o.src,o.listener,h)}const u=tn;return o}function ei(o,u,h,m,P){if(Array.isArray(u)){for(var N=0;N<u.length;N++)ei(o,u[N],h,m,P);return null}return h=ti(h),o&&o[x]?o.L(u,h,d(m)?!!m.capture:!!m,P):Sn(o,u,h,!0,m,P)}function en(o,u,h,m,P){if(Array.isArray(u))for(var N=0;N<u.length;N++)en(o,u[N],h,m,P);else m=d(m)?!!m.capture:!!m,h=ti(h),o&&o[x]?(o=o.i,u=String(u).toString(),u in o.g&&(N=o.g[u],h=lt(N,h,m,P),-1<h&&(ye(N[h]),Array.prototype.splice.call(N,h,1),N.length==0&&(delete o.g[u],o.h--)))):o&&(o=nn(o))&&(u=o.g[u.toString()],o=-1,u&&(o=lt(u,h,m,P)),(h=-1<o?u[o]:null)&&ut(h))}function ut(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[x])St(u.i,o);else{var h=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(h,m,o.capture):u.detachEvent?u.detachEvent(tt(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=nn(u))?(St(h,o),h.h==0&&(h.src=null,u[Zt]=null)):ye(o)}}}function tt(o){return o in Et?Et[o]:Et[o]="on"+o}function tn(o,u){if(o.da)o=!0;else{u=new se(u,this);var h=o.listener,m=o.ha||o.src;o.fa&&ut(o),o=h.call(m,u)}return o}function nn(o){return o=o[Zt],o instanceof Me?o:null}var Mi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ti(o){return typeof o=="function"?o:(o[Mi]||(o[Mi]=function(u){return o.handleEvent(u)}),o[Mi])}function Fe(){k.call(this),this.i=new Me(this),this.M=this,this.F=null}A(Fe,k),Fe.prototype[x]=!0,Fe.prototype.removeEventListener=function(o,u,h,m){en(this,o,u,h,m)};function We(o,u){var h,m=o.F;if(m)for(h=[];m;m=m.F)h.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new $(u,o);else if(u instanceof $)u.target=u.target||o;else{var P=u;u=new $(m,o),v(u,P)}if(P=!0,h)for(var N=h.length-1;0<=N;N--){var W=u.g=h[N];P=Rn(W,m,!0,u)&&P}if(W=u.g=o,P=Rn(W,m,!0,u)&&P,P=Rn(W,m,!1,u)&&P,h)for(N=0;N<h.length;N++)W=u.g=h[N],P=Rn(W,m,!1,u)&&P}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],m=0;m<h.length;m++)ye(h[m]);delete o.g[u],o.h--}}this.F=null},Fe.prototype.K=function(o,u,h,m){return this.i.add(String(o),u,!1,h,m)},Fe.prototype.L=function(o,u,h,m){return this.i.add(String(o),u,!0,h,m)};function Rn(o,u,h,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var P=!0,N=0;N<u.length;++N){var W=u[N];if(W&&!W.da&&W.capture==h){var Ce=W.listener,Ge=W.ha||W.src;W.fa&&St(o.i,W),P=Ce.call(Ge,m)!==!1&&P}}return P&&!m.defaultPrevented}function Rt(o,u,h){if(typeof o=="function")h&&(o=T(o,h));else if(o&&typeof o.handleEvent=="function")o=T(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function zt(o){o.g=Rt(()=>{o.g=null,o.i&&(o.i=!1,zt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class ni extends k{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:zt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(o){k.call(this),this.h=o,this.g={}}A(kn,k);var ii=[];function Oi(o){G(o.g,function(u,h){this.g.hasOwnProperty(h)&&ut(u)},o),o.g={}}kn.prototype.N=function(){kn.aa.N.call(this),Oi(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=l.JSON.stringify,Nr=l.JSON.parse,Mr=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function oi(){}oi.prototype.h=null;function Li(o){return o.h||(o.h=o.i())}function Or(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function si(){$.call(this,"d")}A(si,$);function Fi(){$.call(this,"c")}A(Fi,$);var kt={},Vn=null;function Pt(){return Vn=Vn||new Fe}kt.La="serverreachability";function jt(o){$.call(this,kt.La,o)}A(jt,$);function xn(o){const u=Pt();We(u,new jt(u))}kt.STAT_EVENT="statevent";function Lr(o,u){$.call(this,kt.STAT_EVENT,o),this.stat=u}A(Lr,$);function Qe(o){const u=Pt();We(u,new Lr(u,o))}kt.Ma="timingevent";function Fr(o,u){$.call(this,kt.Ma,o),this.size=u}A(Fr,$);function Dn(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function ps(o,u,h,m,P,N){o.info(function(){if(o.g)if(N)for(var W="",Ce=N.split("&"),Ge=0;Ge<Ce.length;Ge++){var Te=Ce[Ge].split("=");if(1<Te.length){var nt=Te[0];Te=Te[1];var it=nt.split("_");W=2<=it.length&&it[1]=="type"?W+(nt+"="+Te+"&"):W+(nt+"=redacted&")}}else W=null;else W=N;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+u+`
`+h+`
`+W})}function vs(o,u,h,m,P,N,W){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+u+`
`+h+`
`+N+" "+W})}function rn(o,u,h,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+sn(o,h)+(m?" "+m:"")})}function on(o,u){o.info(function(){return"TIMEOUT: "+u})}Nn.prototype.info=function(){};function sn(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var m=h[o];if(!(2>m.length)){var P=m[1];if(Array.isArray(P)&&!(1>P.length)){var N=P[0];if(N!="noop"&&N!="stop"&&N!="close")for(var W=1;W<P.length;W++)P[W]=""}}}}return ri(h)}catch{return u}}var yt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mn;function ai(){}A(ai,oi),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},Mn=new ai;function Tt(o,u,h,m){this.j=o,this.i=u,this.l=h,this.R=m||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bi}function Bi(){this.i=null,this.g="",this.h=!1}var qi={},li={};function S(o,u,h){o.L=1,o.v=$r(Kt(u)),o.m=h,o.P=!0,Q(o,null)}function Q(o,u){o.F=Date.now(),be(o),o.A=Kt(o.v);var h=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Ll(h.i,"t",m),o.C=0,h=o.j.J,o.h=new Bi,o.g=tu(o.j,h?u:null,!o.m),0<o.O&&(o.M=new ni(T(o.Y,o,o.g),o.O)),u=o.U,h=o.g,m=o.ca;var P="readystatechange";Array.isArray(P)||(P&&(ii[0]=P.toString()),P=ii);for(var N=0;N<P.length;N++){var W=Ct(h,P[N],m||u.handleEvent,!1,u.h||u);if(!W)break;u.g[W.key]=W}u=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),xn(),ps(o.i,o.u,o.A,o.l,o.R,o.m)}Tt.prototype.ca=function(o){o=o.target;const u=this.M;u&&Wt(o)==3?u.j():this.Y(o)},Tt.prototype.Y=function(o){try{if(o==this.g)e:{const it=Wt(this.g);var u=this.g.Ba();const hi=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||jl(this.g)))){this.J||it!=4||u==7||(u==8||0>=hi?xn(3):xn(2)),Ie(this);var h=this.g.Z();this.X=h;t:if(X(this)){var m=jl(this.g);o="";var P=m.length,N=Wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){ct(this),Se(this);var W="";break t}this.h.i=new l.TextDecoder}for(u=0;u<P;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(N&&u==P-1)});m.length=0,this.h.g+=o,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=h==200,vs(this.i,this.u,this.A,this.l,this.R,it,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,Ge=this.g;if((Ce=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(Ce)){var Te=Ce;break t}}Te=null}if(h=Te)rn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ys(this,h);else{this.o=!1,this.s=3,Qe(12),ct(this),Se(this);break e}}if(this.P){h=!0;let bt;for(;!this.J&&this.C<W.length;)if(bt=ge(this,W),bt==li){it==4&&(this.s=4,Qe(14),h=!1),rn(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==qi){this.s=4,Qe(15),rn(this.i,this.l,W,"[Invalid Chunk]"),h=!1;break}else rn(this.i,this.l,bt,null),ys(this,bt);if(X(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||W.length!=0||this.h.h||(this.s=1,Qe(16),h=!1),this.o=this.o&&h,!h)rn(this.i,this.l,W,"[Invalid Chunked Response]"),ct(this),Se(this);else if(0<W.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Is(nt),nt.M=!0,Qe(11))}}else rn(this.i,this.l,W,null),ys(this,W);it==4&&ct(this),this.o&&!this.J&&(it==4?Yl(this.j,this):(this.o=!1,be(this)))}else om(this.g),h==400&&0<W.indexOf("Unknown SID")?(this.s=3,Qe(12)):(this.s=0,Qe(13)),ct(this),Se(this)}}}catch{}finally{}};function X(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function ge(o,u){var h=o.C,m=u.indexOf(`
`,h);return m==-1?li:(h=Number(u.substring(h,m)),isNaN(h)?qi:(m+=1,m+h>u.length?li:(u=u.slice(m,m+h),o.C=m+h,u)))}Tt.prototype.cancel=function(){this.J=!0,ct(this)};function be(o){o.S=Date.now()+o.I,ke(o,o.I)}function ke(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Dn(T(o.ba,o),u)}function Ie(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Tt.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(on(this.i,this.A),this.L!=2&&(xn(),Qe(17)),ct(this),this.s=2,Se(this)):ke(this,this.S-o)};function Se(o){o.j.G==0||o.J||Yl(o.j,o)}function ct(o){Ie(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Oi(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function ys(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||_s(h.h,o))){if(!o.K&&_s(h.h,o)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Wr(h),Hr(h);else break e;bs(h),Qe(18)}}else h.za=P[1],0<h.za-h.T&&37500>P[2]&&h.F&&h.v==0&&!h.C&&(h.C=Dn(T(h.Za,h),6e3));if(1>=Rl(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Ln(h,11)}else if((o.K||h.g==o)&&Wr(h),!M(u))for(P=h.Da.g.parse(u),u=0;u<P.length;u++){let Te=P[u];if(h.T=Te[0],Te=Te[1],h.G==2)if(Te[0]=="c"){h.K=Te[1],h.ia=Te[2];const nt=Te[3];nt!=null&&(h.la=nt,h.j.info("VER="+h.la));const it=Te[4];it!=null&&(h.Aa=it,h.j.info("SVER="+h.Aa));const hi=Te[5];hi!=null&&typeof hi=="number"&&0<hi&&(m=1.5*hi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;const bt=o.g;if(bt){const Gr=bt.g?bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gr){var N=m.h;N.g||Gr.indexOf("spdy")==-1&&Gr.indexOf("quic")==-1&&Gr.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(ws(N,N.h),N.h=null))}if(m.D){const As=bt.g?bt.g.getResponseHeader("X-HTTP-Session-Id"):null;As&&(m.ya=As,Re(m.I,m.D,As))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var W=o;if(m.qa=eu(m,m.J?m.ia:null,m.W),W.K){kl(m.h,W);var Ce=W,Ge=m.L;Ge&&(Ce.I=Ge),Ce.B&&(Ie(Ce),be(Ce)),m.g=W}else Gl(m);0<h.i.length&&Kr(h)}else Te[0]!="stop"&&Te[0]!="close"||Ln(h,7);else h.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Ln(h,7):Ts(h):Te[0]!="noop"&&h.l&&h.l.ta(Te),h.v=0)}}xn(4)}catch{}}var zf=class{constructor(o,u){this.g=o,this.map=u}};function Sl(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Rl(o){return o.h?1:o.g?o.g.size:0}function _s(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function ws(o,u){o.g?o.g.add(u):o.h=u}function kl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Sl.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Pl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return V(o.i)}function jf(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map!="undefined"&&o instanceof Map||typeof Set!="undefined"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,m=0;m<h;m++)u.push(o[m]);return u}u=[],h=0;for(m in o)u[h++]=o[m];return u}function Hf(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map!="undefined"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set!="undefined"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const m in o)u[h++]=m;return u}}}function Vl(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Hf(o),m=jf(o),P=m.length,N=0;N<P;N++)u.call(void 0,m[N],h&&h[N],o)}var xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kf(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var m=o[h].indexOf("="),P=null;if(0<=m){var N=o[h].substring(0,m);P=o[h].substring(m+1)}else N=o[h];u(N,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function On(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof On){this.h=o.h,Br(this,o.j),this.o=o.o,this.g=o.g,qr(this,o.s),this.l=o.l;var u=o.i,h=new zi;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Dl(this,h),this.m=o.m}else o&&(u=String(o).match(xl))?(this.h=!1,Br(this,u[1]||"",!0),this.o=$i(u[2]||""),this.g=$i(u[3]||"",!0),qr(this,u[4]),this.l=$i(u[5]||"",!0),Dl(this,u[6]||"",!0),this.m=$i(u[7]||"")):(this.h=!1,this.i=new zi(null,this.h))}On.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Ui(u,Nl,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ui(u,Nl,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Ui(h,h.charAt(0)=="/"?Gf:Qf,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Ui(h,Yf)),o.join("")};function Kt(o){return new On(o)}function Br(o,u,h){o.j=h?$i(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function qr(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Dl(o,u,h){u instanceof zi?(o.i=u,Jf(o.i,o.h)):(h||(u=Ui(u,Xf)),o.i=new zi(u,o.h))}function Re(o,u,h){o.i.set(u,h)}function $r(o){return Re(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function $i(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ui(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Wf),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Wf(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Nl=/[#\/\?@]/g,Qf=/[#\?:]/g,Gf=/[#\?]/g,Xf=/[#\?@]/g,Yf=/#/g;function zi(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function an(o){o.g||(o.g=new Map,o.h=0,o.i&&Kf(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}t=zi.prototype,t.add=function(o,u){an(this),this.i=null,o=ui(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Ml(o,u){an(o),u=ui(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Ol(o,u){return an(o),u=ui(o,u),o.g.has(u)}t.forEach=function(o,u){an(this),this.g.forEach(function(h,m){h.forEach(function(P){o.call(u,P,m,this)},this)},this)},t.na=function(){an(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){const P=o[m];for(let N=0;N<P.length;N++)h.push(u[m])}return h},t.V=function(o){an(this);let u=[];if(typeof o=="string")Ol(this,o)&&(u=u.concat(this.g.get(ui(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},t.set=function(o,u){return an(this),this.i=null,o=ui(this,o),Ol(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Ll(o,u,h){Ml(o,u),0<h.length&&(o.i=null,o.g.set(ui(o,u),V(h)),o.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];const N=encodeURIComponent(String(m)),W=this.V(m);for(m=0;m<W.length;m++){var P=N;W[m]!==""&&(P+="="+encodeURIComponent(String(W[m]))),o.push(P)}}return this.i=o.join("&")};function ui(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Jf(o,u){u&&!o.j&&(an(o),o.i=null,o.g.forEach(function(h,m){var P=m.toLowerCase();m!=P&&(Ml(this,m),Ll(this,P,h))},o)),o.j=u}function Zf(o,u){const h=new Nn;if(l.Image){const m=new Image;m.onload=_(ln,h,"TestLoadImage: loaded",!0,u,m),m.onerror=_(ln,h,"TestLoadImage: error",!1,u,m),m.onabort=_(ln,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=_(ln,h,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function em(o,u){const h=new Nn,m=new AbortController,P=setTimeout(()=>{m.abort(),ln(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(N=>{clearTimeout(P),N.ok?ln(h,"TestPingServer: ok",!0,u):ln(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),ln(h,"TestPingServer: error",!1,u)})}function ln(o,u,h,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(h)}catch{}}function tm(){this.g=new Mr}function nm(o,u,h){const m=h||"";try{Vl(o,function(P,N){let W=P;d(P)&&(W=ri(P)),u.push(m+N+"="+encodeURIComponent(W))})}catch(P){throw u.push(m+"type="+encodeURIComponent("_badmap")),P}}function Ur(o){this.l=o.Ub||null,this.j=o.eb||!1}A(Ur,oi),Ur.prototype.g=function(){return new zr(this.l,this.j)},Ur.prototype.i=function(o){return function(){return o}}({});function zr(o,u){Fe.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(zr,Fe),t=zr.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Hi(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream!="undefined"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fl(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fl(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?ji(this):Hi(this),this.readyState==3&&Fl(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,ji(this))},t.Qa=function(o){this.g&&(this.response=o,ji(this))},t.ga=function(){this.g&&ji(this)};function ji(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Hi(o)}t.setRequestHeader=function(o,u){this.u.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function Hi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Bl(o){let u="";return G(o,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function Es(o,u,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=Bl(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Re(o,u,h))}function De(o){Fe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(De,Fe);var im=/^https?$/i,rm=["POST","PUT"];t=De.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mn.g(),this.v=this.o?Li(this.o):Li(Mn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(N){ql(this,N);return}if(o=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)h.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const N of m.keys())h.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(N=>N.toLowerCase()=="content-type"),P=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(rm,u,void 0))||m||P||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,W]of h)this.g.setRequestHeader(N,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zl(this),this.u=!0,this.g.send(o),this.u=!1}catch(N){ql(this,N)}};function ql(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,$l(o),jr(o)}function $l(o){o.A||(o.A=!0,We(o,"complete"),We(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,We(this,"complete"),We(this,"abort"),jr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jr(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ul(this):this.bb())},t.bb=function(){Ul(this)};function Ul(o){if(o.h&&typeof a!="undefined"&&(!o.v[1]||Wt(o)!=4||o.Z()!=2)){if(o.u&&Wt(o)==4)Rt(o.Ea,0,o);else if(We(o,"readystatechange"),Wt(o)==4){o.h=!1;try{const W=o.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var m;if(m=W===0){var P=String(o.D).match(xl)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),m=!im.test(P?P.toLowerCase():"")}h=m}if(h)We(o,"complete"),We(o,"success");else{o.m=6;try{var N=2<Wt(o)?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.Z()+"]",$l(o)}}finally{jr(o)}}}}function jr(o,u){if(o.g){zl(o);const h=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||We(o,"ready");try{h.onreadystatechange=m}catch{}}}function zl(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Wt(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Nr(u)}};function jl(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function om(o){const u={};o=(o.g&&2<=Wt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(M(o[m]))continue;var h=b(o[m]);const P=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const N=u[P]||[];u[P]=N,N.push(h)}I(u,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ki(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function Hl(o){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ki("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ki("baseRetryDelayMs",5e3,o),this.cb=Ki("retryDelaySeedMs",1e4,o),this.Wa=Ki("forwardChannelMaxRetries",2,o),this.wa=Ki("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Sl(o&&o.concurrentRequestLimit),this.Da=new tm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hl.prototype,t.la=8,t.G=1,t.connect=function(o,u,h,m){Qe(0),this.W=o,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=eu(this,null,this.W),Kr(this)};function Ts(o){if(Kl(o),o.G==3){var u=o.U++,h=Kt(o.I);if(Re(h,"SID",o.K),Re(h,"RID",u),Re(h,"TYPE","terminate"),Wi(o,h),u=new Tt(o,o.j,u),u.L=2,u.v=$r(Kt(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=tu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),be(u)}Zl(o)}function Hr(o){o.g&&(Is(o),o.g.cancel(),o.g=null)}function Kl(o){Hr(o),o.u&&(l.clearTimeout(o.u),o.u=null),Wr(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Kr(o){if(!Cl(o.h)&&!o.s){o.s=!0;var u=o.Ga;oe||re(),K||(oe(),K=!0),Z.add(u,o),o.B=0}}function sm(o,u){return Rl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Dn(T(o.Ga,o,u),Jl(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const P=new Tt(this,this.j,o);let N=this.o;if(this.S&&(N?(N=y(N),v(N,this.S)):N=this.S),this.m!==null||this.O||(P.H=N,N=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=Ql(this,P,u),h=Kt(this.I),Re(h,"RID",o),Re(h,"CVER",22),this.D&&Re(h,"X-HTTP-Session-Id",this.D),Wi(this,h),N&&(this.O?u="headers="+encodeURIComponent(String(Bl(N)))+"&"+u:this.m&&Es(h,this.m,N)),ws(this.h,P),this.Ua&&Re(h,"TYPE","init"),this.P?(Re(h,"$req",u),Re(h,"SID","null"),P.T=!0,S(P,h,null)):S(P,h,u),this.G=2}}else this.G==3&&(o?Wl(this,o):this.i.length==0||Cl(this.h)||Wl(this))};function Wl(o,u){var h;u?h=u.l:h=o.U++;const m=Kt(o.I);Re(m,"SID",o.K),Re(m,"RID",h),Re(m,"AID",o.T),Wi(o,m),o.m&&o.o&&Es(m,o.m,o.o),h=new Tt(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Ql(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ws(o.h,h),S(h,m,u)}function Wi(o,u){o.H&&G(o.H,function(h,m){Re(u,m,h)}),o.l&&Vl({},function(h,m){Re(u,m,h)})}function Ql(o,u,h){h=Math.min(o.i.length,h);var m=o.l?T(o.l.Na,o.l,o):null;e:{var P=o.i;let N=-1;for(;;){const W=["count="+h];N==-1?0<h?(N=P[0].g,W.push("ofs="+N)):N=0:W.push("ofs="+N);let Ce=!0;for(let Ge=0;Ge<h;Ge++){let Te=P[Ge].g;const nt=P[Ge].map;if(Te-=N,0>Te)N=Math.max(0,P[Ge].g-100),Ce=!1;else try{nm(nt,W,"req"+Te+"_")}catch{m&&m(nt)}}if(Ce){m=W.join("&");break e}}}return o=o.i.splice(0,h),u.D=o,m}function Gl(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;oe||re(),K||(oe(),K=!0),Z.add(u,o),o.v=0}}function bs(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Dn(T(o.Fa,o),Jl(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Xl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Dn(T(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qe(10),Hr(this),Xl(this))};function Is(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Xl(o){o.g=new Tt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Kt(o.qa);Re(u,"RID","rpc"),Re(u,"SID",o.K),Re(u,"AID",o.T),Re(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Re(u,"TO",o.ja),Re(u,"TYPE","xmlhttp"),Wi(o,u),o.m&&o.o&&Es(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=$r(Kt(u)),h.m=null,h.P=!0,Q(h,o)}t.Za=function(){this.C!=null&&(this.C=null,Hr(this),bs(this),Qe(19))};function Wr(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Yl(o,u){var h=null;if(o.g==u){Wr(o),Is(o),o.g=null;var m=2}else if(_s(o.h,u))h=u.D,kl(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var P=o.B;m=Pt(),We(m,new Fr(m,h)),Kr(o)}else Gl(o);else if(P=u.s,P==3||P==0&&0<u.X||!(m==1&&sm(o,u)||m==2&&bs(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),P){case 1:Ln(o,5);break;case 4:Ln(o,10);break;case 3:Ln(o,6);break;default:Ln(o,2)}}}function Jl(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Ln(o,u){if(o.j.info("Error code "+u),u==2){var h=T(o.fb,o),m=o.Xa;const P=!m;m=new On(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Br(m,"https"),$r(m),P?Zf(m.toString(),h):em(m.toString(),h)}else Qe(2);o.G=0,o.l&&o.l.sa(u),Zl(o),Kl(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function Zl(o){if(o.G=0,o.ka=[],o.l){const u=Pl(o.h);(u.length!=0||o.i.length!=0)&&(R(o.ka,u),R(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function eu(o,u,h){var m=h instanceof On?Kt(h):new On(h);if(m.g!="")u&&(m.g=u+"."+m.g),qr(m,m.s);else{var P=l.location;m=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;var N=new On(null);m&&Br(N,m),u&&(N.g=u),P&&qr(N,P),h&&(N.l=h),m=N}return h=o.D,u=o.ya,h&&u&&Re(m,h,u),Re(m,"VER",o.la),Wi(o,m),m}function tu(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new De(new Ur({eb:h})):new De(o.pa),u.Ha(o.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nu(){}t=nu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qr(){}Qr.prototype.g=function(o,u){return new mt(o,u)};function mt(o,u){Fe.call(this),this.g=new Hl(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!M(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!M(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new ci(this)}A(mt,Fe),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Ts(this.g)},mt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=ri(o),o=h);u.i.push(new zf(u.Ya++,o)),u.G==3&&Kr(u)},mt.prototype.N=function(){this.g.l=null,delete this.j,Ts(this.g),delete this.g,mt.aa.N.call(this)};function iu(o){si.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const h in u){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}A(iu,si);function ru(){Fi.call(this),this.status=1}A(ru,Fi);function ci(o){this.g=o}A(ci,nu),ci.prototype.ua=function(){We(this.g,"a")},ci.prototype.ta=function(o){We(this.g,new iu(o))},ci.prototype.sa=function(o){We(this.g,new ru)},ci.prototype.ra=function(){We(this.g,"b")},Qr.prototype.createWebChannel=Qr.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,bh=function(){return new Qr},Th=function(){return Pt()},Eh=kt,ta={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yt.NO_ERROR=0,yt.TIMEOUT=8,yt.HTTP_ERROR=6,lo=yt,Ht.COMPLETE="complete",wh=Ht,Or.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,Zi=Or,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,_h=De}).apply(typeof Xr!="undefined"?Xr:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const yu="@firebase/firestore",_u="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new Ra("@firebase/firestore");function fi(){return Wn.logLevel}function J(t,...e){if(Wn.logLevel<=we.DEBUG){const n=e.map(Pa);Wn.debug(`Firestore (${ki}): ${t}`,...n)}}function Yt(t,...e){if(Wn.logLevel<=we.ERROR){const n=e.map(Pa);Wn.error(`Firestore (${ki}): ${t}`,...n)}}function Ei(t,...e){if(Wn.logLevel<=we.WARN){const n=e.map(Pa);Wn.warn(`Firestore (${ki}): ${t}`,...n)}}function Pa(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Ih(t,i,n)}function Ih(t,e,n){let i=`FIRESTORE (${ki}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Yt(i),new Error(i)}function Ae(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||Ih(e,r,i)}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}}class Cp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Rp{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mn,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string",31837,{l:i}),new Ah(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new ot(e)}}class kp{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Pp{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new kp(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vp{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const i=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wu(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=xp(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function pe(t,e){return t<e?-1:t>e?1:0}function na(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return pe(i,r);{const s=Sh(),a=Dp(s.encode(Eu(t,n)),s.encode(Eu(e,n)));return a!==0?a:pe(i,r)}}n+=i>65535?2:1}return pe(t.length,e.length)}function Eu(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Dp(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return pe(t[n],e[n]);return pe(t.length,e.length)}function Ti(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=-62135596800,bu=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*bu);return new ze(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tu)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bu}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Tu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new ze(0,0))}static max(){return new he(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="__name__";class xt{constructor(e,n,i){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ue(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return xt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xt?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=xt.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return pe(e.length,n.length)}static compareSegments(e,n){const i=xt.isNumericId(e),r=xt.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?xt.extractNumericId(e).compare(xt.extractNumericId(n)):na(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fn.fromString(e.substring(4,e.length-2))}}class Ve extends xt{construct(e,n,i){return new Ve(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const Np=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends xt{construct(e,n,i){return new Je(e,n,i)}static isValidIdentifier(e){return Np.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Iu}static keyField(){return new Je([Iu])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ie(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ie(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ie(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new ie(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ve.fromString(e))}static fromName(e){return new ae(Ve.fromString(e).popFirst(5))}static empty(){return new ae(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=-1;function Mp(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=he.fromTimestamp(i===1e9?new ze(n+1,0):new ze(n,i));return new vn(r,ae.empty(),e)}function Op(t){return new vn(t.readTime,t.key,mr)}class vn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vn(he.min(),ae.empty(),mr)}static max(){return new vn(he.max(),ae.empty(),mr)}}function Lp(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Fp)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,i)=>{n(e)})}static reject(e){return new B((n,i)=>{i(e)})}static waitFor(e){return new B((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},c=>i(c))}),a=!0,s===r&&n()})}static or(e){let n=B.resolve(!1);for(const i of e)n=n.next(r=>r?B.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new B((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(f=>{a[d]=f,++l,l===s&&i(a)},f=>r(f))}})}static doWhile(e,n){return new B((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function qp(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Xo.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=-1;function Yo(t){return t==null}function To(t){return t===0&&1/t==-1/0}function $p(t){return typeof t=="number"&&Number.isInteger(t)&&!To(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="";function Up(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Au(e)),e=zp(t.get(n),e);return Au(e)}function zp(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case Rh:n+="";break;default:n+=s}}return n}function Au(t){return t+Rh+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function In(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yr(this.root,e,this.comparator,!0)}}class Yr{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i!=null?i:Ye.RED,this.left=r!=null?r:Ye.EMPTY,this.right=s!=null?s:Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Ye(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ye.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cu(this.data.getIterator())}getIteratorFrom(e){return new Cu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class Cu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new pt([])}unionWith(e){let n=new je(Je.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ti(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new Ph("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const jp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yn(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=jp.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _n(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="server_timestamp",xh="__type__",Dh="__previous_value__",Nh="__local_write_time__";function xa(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[xh])===null||n===void 0?void 0:n.stringValue)===Vh}function Jo(t){const e=t.mapValue.fields[Dh];return xa(e)?Jo(e):e}function gr(t){const e=yn(t.mapValue.fields[Nh].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,i,r,s,a,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const bo="(default)";class pr{constructor(e,n){this.projectId=e,this.database=n||bo}static empty(){return new pr("","")}get isDefaultDatabase(){return this.database===bo}isEqual(e){return e instanceof pr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="__type__",Oh="__max__",Jr={mapValue:{fields:{__type__:{stringValue:Oh}}}},Lh="__vector__",Io="value";function wn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xa(t)?4:Wp(t)?9007199254740991:Kp(t)?10:11:ue(28295,{value:t})}function qt(t,e){if(t===e)return!0;const n=wn(t);if(n!==wn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gr(t).isEqual(gr(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=yn(r.timestampValue),l=yn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return _n(r.bytesValue).isEqual(_n(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Oe(r.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(r.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Oe(r.integerValue)===Oe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Oe(r.doubleValue),l=Oe(s.doubleValue);return a===l?To(a)===To(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ti(t.arrayValue.values||[],e.arrayValue.values||[],qt);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Su(a)!==Su(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!qt(a[c],l[c])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function vr(t,e){return(t.values||[]).find(n=>qt(n,e))!==void 0}function bi(t,e){if(t===e)return 0;const n=wn(t),i=wn(e);if(n!==i)return pe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Oe(s.integerValue||s.doubleValue),c=Oe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ru(t.timestampValue,e.timestampValue);case 4:return Ru(gr(t),gr(e));case 5:return na(t.stringValue,e.stringValue);case 6:return function(s,a){const l=_n(s),c=_n(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=pe(l[d],c[d]);if(f!==0)return f}return pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=pe(Oe(s.latitude),Oe(a.latitude));return l!==0?l:pe(Oe(s.longitude),Oe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ku(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,d,f;const g=s.fields||{},T=a.fields||{},_=(l=g[Io])===null||l===void 0?void 0:l.arrayValue,A=(c=T[Io])===null||c===void 0?void 0:c.arrayValue,V=pe(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:ku(_,A)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Jr.mapValue&&a===Jr.mapValue)return 0;if(s===Jr.mapValue)return 1;if(a===Jr.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=a.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const T=na(c[g],f[g]);if(T!==0)return T;const _=bi(l[c[g]],d[f[g]]);if(_!==0)return _}return pe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{Pe:n})}}function Ru(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=yn(t),i=yn(e),r=pe(n.seconds,i.seconds);return r!==0?r:pe(n.nanos,i.nanos)}function ku(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=bi(n[r],i[r]);if(s)return s}return pe(n.length,i.length)}function Ii(t){return ia(t)}function ia(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=yn(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _n(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=ia(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${ia(n.fields[a])}`;return r+"}"}(t.mapValue):ue(61005,{value:t})}function uo(t){switch(wn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jo(t);return e?16+uo(e):16;case 5:return 2*t.stringValue.length;case 6:return _n(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+uo(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return In(i.fields,(s,a)=>{r+=s.length+uo(a)}),r}(t.mapValue);default:throw ue(13486,{value:t})}}function ra(t){return!!t&&"integerValue"in t}function Da(t){return!!t&&"arrayValue"in t}function Pu(t){return!!t&&"nullValue"in t}function Vu(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function co(t){return!!t&&"mapValue"in t}function Kp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mh])===null||n===void 0?void 0:n.stringValue)===Lh}function rr(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return In(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=rr(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rr(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Wp(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Oh}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.value=e}static empty(){return new dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!co(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rr(n)}setAll(e){let n=Je.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=rr(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());co(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];co(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){In(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new dt(rr(this.value))}}function Fh(t){const e=[];return In(t.fields,(n,i)=>{const r=new Je([n]);if(co(i)){const s=Fh(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new st(e,0,he.min(),he.min(),he.min(),dt.empty(),0)}static newFoundDocument(e,n,i,r){return new st(e,1,n,he.min(),i,r,0)}static newNoDocument(e,n){return new st(e,2,n,he.min(),he.min(),dt.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,he.min(),he.min(),dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.position=e,this.inclusive=n}}function xu(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=ae.comparator(ae.fromName(a.referenceValue),n.key):i=bi(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Du(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qp(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{}class Ue extends Bh{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Xp(e,n,i):n==="array-contains"?new Zp(e,i):n==="in"?new ev(e,i):n==="not-in"?new tv(e,i):n==="array-contains-any"?new nv(e,i):new Ue(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Yp(e,i):new Jp(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bi(n,this.value)):n!==null&&wn(this.value)===wn(n)&&this.matchesComparison(bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends Bh{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new $t(e,n)}matches(e){return qh(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function qh(t){return t.op==="and"}function $h(t){return Gp(t)&&qh(t)}function Gp(t){for(const e of t.filters)if(e instanceof $t)return!1;return!0}function oa(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Ii(t.value);if($h(t))return t.filters.map(e=>oa(e)).join(",");{const e=t.filters.map(n=>oa(n)).join(",");return`${t.op}(${e})`}}function Uh(t,e){return t instanceof Ue?function(i,r){return r instanceof Ue&&i.op===r.op&&i.field.isEqual(r.field)&&qt(i.value,r.value)}(t,e):t instanceof $t?function(i,r){return r instanceof $t&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&Uh(a,r.filters[l]),!0):!1}(t,e):void ue(19439)}function zh(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Ii(n.value)}`}(t):t instanceof $t?function(n){return n.op.toString()+" {"+n.getFilters().map(zh).join(" ,")+"}"}(t):"Filter"}class Xp extends Ue{constructor(e,n,i){super(e,n,i),this.key=ae.fromName(i.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yp extends Ue{constructor(e,n){super(e,"in",n),this.keys=jh("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Jp extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=jh("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ae.fromName(i.referenceValue))}class Zp extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Da(n)&&vr(n.arrayValue,this.value)}}class ev extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vr(this.value.arrayValue,n)}}class tv extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(vr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vr(this.value.arrayValue,n)}}class nv extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Da(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>vr(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Ie=null}}function Nu(t,e=null,n=[],i=[],r=null,s=null,a=null){return new iv(t,e,n,i,r,s,a)}function Na(t){const e=de(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>oa(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Yo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ii(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ii(i)).join(",")),e.Ie=n}return e.Ie}function Ma(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qp(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Uh(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Du(t.startAt,e.startAt)&&Du(t.endAt,e.endAt)}function sa(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function rv(t,e,n,i,r,s,a,l){return new Zo(t,e,n,i,r,s,a,l)}function Hh(t){return new Zo(t)}function Mu(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ov(t){return t.collectionGroup!==null}function or(t){const e=de(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new je(Je.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new So(s,i))}),n.has(Je.keyField().canonicalString())||e.Ee.push(new So(Je.keyField(),i))}return e.Ee}function Lt(t){const e=de(t);return e.de||(e.de=sv(e,or(t))),e.de}function sv(t,e){if(t.limitType==="F")return Nu(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new So(r.field,s)});const n=t.endAt?new Ao(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ao(t.startAt.position,t.startAt.inclusive):null;return Nu(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function aa(t,e,n){return new Zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function es(t,e){return Ma(Lt(t),Lt(e))&&t.limitType===e.limitType}function Kh(t){return`${Na(Lt(t))}|lt:${t.limitType}`}function mi(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>zh(r)).join(", ")}]`),Yo(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ii(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ii(r)).join(",")),`Target(${i})`}(Lt(t))}; limitType=${t.limitType})`}function ts(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ae.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of or(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,c){const d=xu(a,l,c);return a.inclusive?d<=0:d<0}(i.startAt,or(i),r)||i.endAt&&!function(a,l,c){const d=xu(a,l,c);return a.inclusive?d>=0:d>0}(i.endAt,or(i),r))}(t,e)}function av(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Wh(t){return(e,n)=>{let i=!1;for(const r of or(t)){const s=lv(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function lv(t,e,n){const i=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),d=l.data.field(s);return c!==null&&d!==null?bi(c,d):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){In(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return kh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new xe(ae.comparator);function Jt(){return uv}const Qh=new xe(ae.comparator);function er(...t){let e=Qh;for(const n of t)e=e.insert(n.key,n);return e}function Gh(t){let e=Qh;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function qn(){return sr()}function Xh(){return sr()}function sr(){return new Jn(t=>t.toString(),(t,e)=>t.isEqual(e))}const cv=new xe(ae.comparator),hv=new je(ae.comparator);function ve(...t){let e=hv;for(const n of t)e=e.add(n);return e}const dv=new je(pe);function fv(){return dv}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:To(e)?"-0":e}}function Yh(t){return{integerValue:""+t}}function mv(t,e){return $p(e)?Yh(e):Oa(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this._=void 0}}function gv(t,e,n){return t instanceof Co?function(r,s){const a={fields:{[xh]:{stringValue:Vh},[Nh]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&xa(s)&&(s=Jo(s)),s&&(a.fields[Dh]=s),{mapValue:a}}(n,e):t instanceof yr?Zh(t,e):t instanceof _r?ed(t,e):function(r,s){const a=Jh(r,s),l=Ou(a)+Ou(r.Re);return ra(a)&&ra(r.Re)?Yh(l):Oa(r.serializer,l)}(t,e)}function pv(t,e,n){return t instanceof yr?Zh(t,e):t instanceof _r?ed(t,e):n}function Jh(t,e){return t instanceof Ro?function(i){return ra(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Co extends ns{}class yr extends ns{constructor(e){super(),this.elements=e}}function Zh(t,e){const n=td(e);for(const i of t.elements)n.some(r=>qt(r,i))||n.push(i);return{arrayValue:{values:n}}}class _r extends ns{constructor(e){super(),this.elements=e}}function ed(t,e){let n=td(e);for(const i of t.elements)n=n.filter(r=>!qt(r,i));return{arrayValue:{values:n}}}class Ro extends ns{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Ou(t){return Oe(t.integerValue||t.doubleValue)}function td(t){return Da(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vv(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof yr&&r instanceof yr||i instanceof _r&&r instanceof _r?Ti(i.elements,r.elements,qt):i instanceof Ro&&r instanceof Ro?qt(i.Re,r.Re):i instanceof Co&&r instanceof Co}(t.transform,e.transform)}class yv{constructor(e,n){this.version=e,this.transformResults=n}}class At{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new At}static exists(e){return new At(void 0,e)}static updateTime(e){return new At(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ho(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class is{}function nd(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new La(t.key,At.none()):new Rr(t.key,t.data,At.none());{const n=t.data,i=dt.empty();let r=new je(Je.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new An(t.key,i,new pt(r.toArray()),At.none())}}function _v(t,e,n){t instanceof Rr?function(r,s,a){const l=r.value.clone(),c=Fu(r.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof An?function(r,s,a){if(!ho(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Fu(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(id(r)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ar(t,e,n,i){return t instanceof Rr?function(s,a,l,c){if(!ho(s.precondition,a))return l;const d=s.value.clone(),f=Bu(s.fieldTransforms,c,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof An?function(s,a,l,c){if(!ho(s.precondition,a))return l;const d=Bu(s.fieldTransforms,c,a),f=a.data;return f.setAll(id(s)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,a,l){return ho(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function wv(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Jh(i.transform,r||null);s!=null&&(n===null&&(n=dt.empty()),n.set(i.field,s))}return n||null}function Lu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ti(i,r,(s,a)=>vv(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rr extends is{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class An extends is{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function id(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Fu(t,e,n){const i=new Map;Ae(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,pv(a,l,n[r]))}return i}function Bu(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,gv(s,a,e))}return i}class La extends is{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ev extends is{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&_v(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ar(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ar(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Xh();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const c=nd(a,l);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(he.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(n,i)=>Lu(n,i))&&Ti(this.baseMutations,e.baseMutations,(n,i)=>Lu(n,i))}}class Fa{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ae(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let r=function(){return cv}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Fa(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,_e;function Av(t){switch(t){case z.OK:return ue(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function rd(t){if(t===void 0)return Yt("GRPC error has no .code"),z.UNKNOWN;switch(t){case qe.OK:return z.OK;case qe.CANCELLED:return z.CANCELLED;case qe.UNKNOWN:return z.UNKNOWN;case qe.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case qe.INTERNAL:return z.INTERNAL;case qe.UNAVAILABLE:return z.UNAVAILABLE;case qe.UNAUTHENTICATED:return z.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case qe.NOT_FOUND:return z.NOT_FOUND;case qe.ALREADY_EXISTS:return z.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return z.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case qe.ABORTED:return z.ABORTED;case qe.OUT_OF_RANGE:return z.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return z.UNIMPLEMENTED;case qe.DATA_LOSS:return z.DATA_LOSS;default:return ue(39323,{code:t})}}(_e=qe||(qe={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new fn([4294967295,4294967295],0);function qu(t){const e=Sh().encode(t),n=new yh;return n.update(e),new Uint8Array(n.digest())}function $u(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fn([n,i],0),new fn([r,s],0)]}class Ba{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new tr(`Invalid padding: ${n}`);if(i<0)throw new tr(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tr(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new tr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=fn.fromNumber(this.pe)}we(e,n,i){let r=e.add(n.multiply(fn.fromNumber(i)));return r.compare(Sv)===1&&(r=new fn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=qu(e),[i,r]=$u(n);for(let s=0;s<this.hashCount;s++){const a=this.we(i,r,s);if(!this.be(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Ba(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.pe===0)return;const n=qu(e),[i,r]=$u(n);for(let s=0;s<this.hashCount;s++){const a=this.we(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class tr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,kr.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new rs(he.min(),r,new xe(pe),Jt(),ve())}}class kr{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new kr(i,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,i,r){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=r}}class od{constructor(e,n){this.targetId=e,this.Ce=n}}class sd{constructor(e,n,i=et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Uu{constructor(){this.Fe=0,this.Me=zu(),this.xe=et.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ve(),n=ve(),i=ve();return this.Me.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ue(38017,{changeType:s})}}),new kr(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=zu()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ae(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Cv{constructor(e){this.ze=e,this.je=new Map,this.He=Jt(),this.Je=Zr(),this.Ye=Zr(),this.Ze=new xe(pe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,i=e.Ce.count,r=this._t(n);if(r){const s=r.target;if(sa(s))if(i===0){const a=new ae(s.path);this.tt(n,a,st.newNoDocument(a,he.min()))}else Ae(i===1,20013,{expectedCount:i});else{const a=this.ut(n);if(a!==i){const l=this.ct(e),c=l?this.lt(l,e,a):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=_n(i).toUint8Array()}catch(c){if(c instanceof Ph)return Ei("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ba(a,r,s)}catch(c){return Ei(c instanceof tr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,s,null),r++)}),r}It(e){const n=new Map;this.je.forEach((s,a)=>{const l=this._t(a);if(l){if(s.current&&sa(l.target)){const c=new ae(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,st.newNoDocument(c,e))}s.Le&&(n.set(a,s.qe()),s.Qe())}});let i=ve();this.Ye.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const r=new rs(e,n,this.Ze,this.He,i);return this.He=Jt(),this.Je=Zr(),this.Ye=Zr(),this.Ze=new xe(pe),r}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Uu,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new je(pe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new je(pe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Uu),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Zr(){return new xe(ae.comparator)}function zu(){return new xe(ae.comparator)}const Rv=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),kv=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Pv=(()=>({and:"AND",or:"OR"}))();class Vv{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function la(t,e){return t.useProto3Json||Yo(e)?e:{value:e}}function ko(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ad(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xv(t,e){return ko(t,e.toTimestamp())}function Ft(t){return Ae(!!t,49232),he.fromTimestamp(function(n){const i=yn(n);return new ze(i.seconds,i.nanos)}(t))}function qa(t,e){return ua(t,e).canonicalString()}function ua(t,e){const n=function(r){return new Ve(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ld(t){const e=Ve.fromString(t);return Ae(fd(e),10190,{key:e.toString()}),e}function ca(t,e){return qa(t.databaseId,e.path)}function Ps(t,e){const n=ld(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(cd(n))}function ud(t,e){return qa(t.databaseId,e)}function Dv(t){const e=ld(t);return e.length===4?Ve.emptyPath():cd(e)}function ha(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cd(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ju(t,e,n){return{name:ca(t,e),fields:n.value.mapValue.fields}}function Nv(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Ae(f===void 0||typeof f=="string",58123),et.fromBase64String(f||"")):(Ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),et.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?z.UNKNOWN:rd(d.code);return new ie(f,d.message||"")}(a);n=new sd(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ps(t,i.document.name),s=Ft(i.document.updateTime),a=i.document.createTime?Ft(i.document.createTime):he.min(),l=new dt({mapValue:{fields:i.document.fields}}),c=st.newFoundDocument(r,s,a,l),d=i.targetIds||[],f=i.removedTargetIds||[];n=new fo(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ps(t,i.document),s=i.readTime?Ft(i.readTime):he.min(),a=st.newNoDocument(r,s),l=i.removedTargetIds||[];n=new fo([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ps(t,i.document),s=i.removedTargetIds||[];n=new fo([],s,r,null)}else{if(!("filter"in e))return ue(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new Iv(r,s),l=i.targetId;n=new od(l,a)}}return n}function Mv(t,e){let n;if(e instanceof Rr)n={update:ju(t,e.key,e.value)};else if(e instanceof La)n={delete:ca(t,e.key)};else if(e instanceof An)n={update:ju(t,e.key,e.data),updateMask:jv(e.fieldMask)};else{if(!(e instanceof Ev))return ue(16599,{ft:e.type});n={verify:ca(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Co)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _r)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ro)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw ue(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:xv(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue(27497)}(t,e.precondition)),n}function Ov(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?Ft(r.updateTime):Ft(s);return a.isEqual(he.min())&&(a=Ft(s)),new yv(a,r.transformResults||[])}(n,e))):[]}function Lv(t,e){return{documents:[ud(t,e.path)]}}function Fv(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ud(t,r);const s=function(d){if(d.length!==0)return dd($t.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(f=>function(T){return{field:gi(T.field),direction:$v(T.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=la(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:r}}function Bv(t){let e=Dv(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ae(i===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const T=hd(g);return T instanceof $t&&$h(T)?T.getFilters():[T]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(T=>function(A){return new So(pi(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(T))}(n.orderBy));let l=null;n.limit&&(l=function(g){let T;return T=typeof g=="object"?g.value:g,Yo(T)?null:T}(n.limit));let c=null;n.startAt&&(c=function(g){const T=!!g.before,_=g.values||[];return new Ao(_,T)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const T=!g.before,_=g.values||[];return new Ao(_,T)}(n.endAt)),rv(e,r,a,s,l,"F",c,d)}function qv(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hd(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=pi(n.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=pi(n.unaryFilter.field);return Ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=pi(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=pi(n.unaryFilter.field);return Ue.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(pi(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $t.create(n.compositeFilter.filters.map(i=>hd(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function $v(t){return Rv[t]}function Uv(t){return kv[t]}function zv(t){return Pv[t]}function gi(t){return{fieldPath:t.canonicalString()}}function pi(t){return Je.fromServerFormat(t.fieldPath)}function dd(t){return t instanceof Ue?function(n){if(n.op==="=="){if(Vu(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NAN"}};if(Pu(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vu(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NOT_NAN"}};if(Pu(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gi(n.field),op:Uv(n.op),value:n.value}}}(t):t instanceof $t?function(n){const i=n.getFilters().map(r=>dd(r));return i.length===1?i[0]:{compositeFilter:{op:zv(n.op),filters:i}}}(t):ue(54877,{filter:t})}function jv(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fd(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,i,r,s=he.min(),a=he.min(),l=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this.wt=e}}function Kv(t){const e=Bv({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?aa(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.Cn=new Qv}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(vn.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(vn.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class Qv{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new je(Ve.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new je(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},md=41943040;class ht{static withCacheSize(e){return new ht(e,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(md,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ai(0)}static lr(){return new Ai(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku="LruGarbageCollector",Gv=1048576;function Wu([t,e],[n,i]){const r=pe(t,n);return r===0?pe(e,i):r}class Xv{constructor(e){this.Er=e,this.buffer=new je(Wu),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Wu(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Yv{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){J(Ku,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vi(n)?J(Ku,"Ignoring IndexedDB error during garbage collection: ",n):await Pi(n)}await this.mr(3e5)})}}class Jv{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Xo.le);const i=new Xv(n);return this.gr.forEachTarget(e,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Hu)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hu):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,r,s,a,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(e,i,n))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(d=Date.now(),fi()<=we.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function Zv(t,e){return new Jv(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.changes=new Jn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ar(i.mutation,r,pt.empty(),ze.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ve()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ve()){const r=qn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=er();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=qn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ve()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=Jt();const a=sr(),l=function(){return sr()}();return n.forEach((c,d)=>{const f=i.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof An)?s=s.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),ar(f.mutation,d,f.mutation.getFieldMask(),ze.now())):a.set(d.key,pt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var g;return l.set(d,new ty(f,(g=a.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const i=sr();let r=new xe((a,l)=>a-l),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=i.get(c)||pt.empty();f=l.applyToLocalView(d,f),i.set(c,f);const g=(r.get(l.batchId)||ve()).add(c);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,g=Xh();f.forEach(T=>{if(!s.has(T)){const _=nd(n.get(T),i.get(T));_!==null&&g.set(T,_),s=s.add(T)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ov(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):B.resolve(qn());let l=mr,c=s;return a.next(d=>B.forEach(d,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(T=>{c=c.insert(f,T)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,ve())).next(f=>({batchId:l,changes:Gh(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(i=>{let r=er();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=er();return this.indexManager.getCollectionParents(e,s).next(l=>B.forEach(l,c=>{const d=function(g,T){return new Zo(T,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(f=>{f.forEach((g,T)=>{a=a.insert(g,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((c,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,st.newInvalidDocument(f)))});let l=er();return a.forEach((c,d)=>{const f=s.get(c);f!==void 0&&ar(f.mutation,d,pt.empty(),ze.now()),ts(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return B.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ft(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:Kv(r.bundledQuery),readTime:Ft(r.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.overlays=new xe(ae.comparator),this.Qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qn();return B.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){const r=qn(),s=n.length+1,a=new ae(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new xe((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let f=s.get(d.largestBatchId);f===null&&(f=qn(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=qn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=r)););return B.resolve(l)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new bv(n,i));let s=this.Qr.get(n);s===void 0&&(s=ve(),this.Qr.set(n,s)),this.Qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.$r=new je(He.Ur),this.Kr=new je(He.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new He(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new He(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new ae(new Ve([])),i=new He(n,e),r=new He(n,e+1),s=[];return this.Kr.forEachInRange([i,r],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ae(new Ve([])),i=new He(n,e),r=new He(n,e+1);let s=ve();return this.Kr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new He(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class He{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ae.comparator(e.key,n.key)||pe(e.Zr,n.Zr)}static Wr(e,n){return pe(e.Zr,n.Zr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new je(He.Ur)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Tv(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Xr=this.Xr.add(new He(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ti(i),s=r<0?0:r;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Va:this.nr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new He(n,0),r=new He(n,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([i,r],a=>{const l=this.ei(a.Zr);s.push(l)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new je(pe);return n.forEach(r=>{const s=new He(r,0),a=new He(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],l=>{i=i.add(l.Zr)})}),B.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ae.isDocumentKey(s)||(s=s.child(""));const a=new He(new ae(s),0);let l=new je(pe);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(l=l.add(c.Zr)),!0)},a),B.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(i=>{const r=this.ei(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ae(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return B.forEach(n.mutations,r=>{const s=new He(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new He(n,0),r=this.Xr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this.ii=e,this.docs=function(){return new xe(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let i=Jt();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():st.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Jt();const a=n.path,l=new ae(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Lp(Op(f),i)<=0||(r.has(f.key)||ts(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ue(9500)}si(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ly(this)}getSize(e){return B.resolve(this.size)}}class ly extends ey{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.persistence=e,this.oi=new Jn(n=>Na(n),Ma),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this._i=0,this.ai=new $a,this.targetCount=0,this.ui=Ai.cr()}forEachTarget(e,n){return this.oi.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),B.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ai(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Tr(n),B.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),B.waitFor(s).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.ci={},this.overlays={},this.li=new Xo(0),this.hi=!1,this.hi=!0,this.Pi=new oy,this.referenceDelegate=e(this),this.Ti=new uy(this),this.indexManager=new Wv,this.remoteDocumentCache=function(r){return new ay(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new Hv(n),this.Ei=new iy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ry,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new sy(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){J("MemoryPersistence","Starting transaction:",e);const r=new cy(this.li.next());return this.referenceDelegate.di(),i(r).next(s=>this.referenceDelegate.Ai(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ri(e,n){return B.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class cy extends Bp{constructor(e){super(),this.currentSequenceNumber=e}}class Ua{constructor(e){this.persistence=e,this.Vi=new $a,this.mi=null}static fi(e){return new Ua(e)}get gi(){if(this.mi)return this.mi;throw ue(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.gi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.gi,i=>{const r=ae.fromPath(i);return this.pi(e,r).next(s=>{s||n.removeEntry(r,he.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return B.or([()=>B.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Po{constructor(e,n){this.persistence=e,this.yi=new Jn(i=>Up(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Zv(this,n)}static fi(e,n){return new Po(e,n)}di(){}Ai(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return B.forEach(this.yi,(i,r)=>this.Dr(e,i,r).next(s=>s?B.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,a=>this.Dr(e,a,n).next(l=>{l||(i++,s.removeEntry(a,he.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),B.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uo(e.data.value)),n}Dr(e,n,i){return B.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return B.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ds=i,this.As=r}static Rs(e,n){let i=ve(),r=ve();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new za(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return lg()?8:qp(og())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ws(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.bs(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new hy;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.fs)return this.Ds(e,n,a,l.size)})}).next(()=>s.result)}Ds(e,n,i,r){return i.documentReadCount<this.gs?(fi()<=we.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",mi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),B.resolve()):(fi()<=we.DEBUG&&J("QueryEngine","Query:",mi(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(fi()<=we.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",mi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lt(n))):B.resolve())}ws(e,n){if(Mu(n))return B.resolve(null);let i=Lt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=aa(n,null,"F"),i=Lt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ve(...s);return this.ys.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.vs(n,l);return this.Cs(n,d,a,c.readTime)?this.ws(e,aa(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,i,r){return Mu(n)||r.isEqual(he.min())?B.resolve(null):this.ys.getDocuments(e,i).next(s=>{const a=this.vs(n,s);return this.Cs(n,a,i,r)?B.resolve(null):(fi()<=we.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mi(n)),this.Fs(e,a,n,Mp(r,mr)).next(l=>l))})}vs(e,n){let i=new je(Wh(e));return n.forEach((r,s)=>{ts(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return fi()<=we.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",mi(n)),this.ys.getDocumentsMatchingQuery(e,n,vn.min(),i)}Fs(e,n,i,r){return this.ys.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="LocalStore",fy=3e8;class my{constructor(e,n,i,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new xe(pe),this.Os=new Jn(s=>Na(s),Ma),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ny(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function gy(t,e,n,i){return new my(t,e,n,i)}async function pd(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let c=ve();for(const d of r){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(i,c).next(d=>({ks:d,removedBatchIds:a,addedBatchIds:l}))})})}function py(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const g=d.batch,T=g.keys();let _=B.resolve();return T.forEach(A=>{_=_.next(()=>f.getEntry(c,A)).next(V=>{const R=d.docVersions.get(A);Ae(R!==null,48541),V.version.compareTo(R)<0&&(g.applyToRemoteDocument(V,d),V.isValidDocument()&&(V.setReadTime(d.commitVersion),f.addEntry(V)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=ve();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function vd(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function vy(t,e){const n=de(t),i=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const l=[];e.targetChanges.forEach((f,g)=>{const T=r.get(g);if(!T)return;l.push(n.Ti.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Ti.addMatchingKeys(s,f.addedDocuments,g)));let _=T.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(et.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,i)),r=r.insert(g,_),function(V,R,L){return V.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=fy?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(T,_,f)&&l.push(n.Ti.updateTargetData(s,_))});let c=Jt(),d=ve();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(yy(s,a,e.documentUpdates).next(f=>{c=f.qs,d=f.Qs})),!i.isEqual(he.min())){const f=n.Ti.getLastRemoteSnapshotVersion(s).next(g=>n.Ti.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(f)}return B.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.xs=r,s))}function yy(t,e,n){let i=ve(),r=ve();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Jt();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):J(ja,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{qs:a,Qs:r}})}function _y(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Va),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function wy(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ti.getTargetData(i,e).next(s=>s?(r=s,B.resolve(r)):n.Ti.allocateTargetId(i).next(a=>(r=new un(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function da(t,e,n){const i=de(t),r=i.xs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Vi(a))throw a;J(ja,`Failed to update sequence numbers for target ${e}: ${a}`)}i.xs=i.xs.remove(e),i.Os.delete(r.target)}function Qu(t,e,n){const i=de(t);let r=he.min(),s=ve();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,f){const g=de(c),T=g.Os.get(f);return T!==void 0?B.resolve(g.xs.get(T)):g.Ti.getTargetData(d,f)}(i,a,Lt(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>i.Ms.getDocumentsMatchingQuery(a,e,n?r:he.min(),n?s:ve())).next(l=>(Ey(i,av(e),l),{documents:l,$s:s})))}function Ey(t,e,n){let i=t.Ns.get(e)||he.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Ns.set(e,i)}class Gu{constructor(){this.activeTargetIds=fv()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ty{constructor(){this.xo=new Gu,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Gu,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="ConnectivityMonitor";class Yu{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){J(Xu,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){J(Xu,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo=null;function fa(){return eo===null?eo=function(){return 268435456+Math.round(2147483648*Math.random())}():eo++,"0x"+eo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="RestConnection",Iy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ay{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===bo?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(e,n,i,r,s){const a=fa(),l=this.jo(e,n.toUriEncodedString());J(Vs,`Sending RPC '${e}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,r,s);const{host:d}=new URL(l),f=Ca(d);return this.Jo(e,l,c,i,f).then(g=>(J(Vs,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Ei(Vs,`RPC '${e}' ${a} failed with error: `,g,"url: ",l,"request:",i),g})}Yo(e,n,i,r,s,a){return this.zo(e,n,i,r,s)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ki}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}jo(e,n){const i=Iy[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt="WebChannelConnection";class Cy extends Ay{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=fa();return new Promise((l,c)=>{const d=new _h;d.setWithCredentials(!0),d.listenOnce(wh.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case lo.NO_ERROR:const g=d.getResponseJson();J(rt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case lo.TIMEOUT:J(rt,`RPC '${e}' ${a} timed out`),c(new ie(z.DEADLINE_EXCEEDED,"Request time out"));break;case lo.HTTP_ERROR:const T=d.getStatus();if(J(rt,`RPC '${e}' ${a} failed with status:`,T,"response text:",d.getResponseText()),T>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const V=function(L){const M=L.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(M)>=0?M:z.UNKNOWN}(A.status);c(new ie(V,A.message))}else c(new ie(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ie(z.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{h_:e,streamId:a,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{J(rt,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(r);J(rt,`RPC '${e}' ${a} sending request:`,r),d.send(n,"POST",f,i,15)})}I_(e,n,i){const r=fa(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bh(),l=Th(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const f=s.join("");J(rt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const g=a.createWebChannel(f,c);this.E_(g);let T=!1,_=!1;const A=new Sy({Zo:R=>{_?J(rt,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(T||(J(rt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),T=!0),J(rt,`RPC '${e}' stream ${r} sending:`,R),g.send(R))},Xo:()=>g.close()}),V=(R,L,M)=>{R.listen(L,F=>{try{M(F)}catch(U){setTimeout(()=>{throw U},0)}})};return V(g,Zi.EventType.OPEN,()=>{_||(J(rt,`RPC '${e}' stream ${r} transport opened.`),A.__())}),V(g,Zi.EventType.CLOSE,()=>{_||(_=!0,J(rt,`RPC '${e}' stream ${r} transport closed`),A.u_(),this.d_(g))}),V(g,Zi.EventType.ERROR,R=>{_||(_=!0,Ei(rt,`RPC '${e}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),A.u_(new ie(z.UNAVAILABLE,"The operation could not be completed")))}),V(g,Zi.EventType.MESSAGE,R=>{var L;if(!_){const M=R.data[0];Ae(!!M,16349);const F=M,U=(F==null?void 0:F.error)||((L=F[0])===null||L===void 0?void 0:L.error);if(U){J(rt,`RPC '${e}' stream ${r} received error:`,U);const H=U.status;let G=function(p){const v=qe[p];if(v!==void 0)return rd(v)}(H),I=U.message;G===void 0&&(G=z.INTERNAL,I="Unknown error status: "+H+" with message "+U.message),_=!0,A.u_(new ie(G,I)),g.close()}else J(rt,`RPC '${e}' stream ${r} received:`,M),A.c_(M)}}),V(l,Eh.STAT_EVENT,R=>{R.stat===ta.PROXY?J(rt,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===ta.NOPROXY&&J(rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{A.a_()},0),A}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function xs(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t){return new Vv(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,i=1e3,r=1.5,s=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-i);r>0&&J("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="PersistentStream";class _d{constructor(e,n,i,r,s,a,l,c){this.xi=e,this.S_=i,this.D_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new yd(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Yt(n.toString()),Yt("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===n&&this.z_(i,r)},i=>{e(()=>{const r=new ie(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return J(Ju,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(J(Ju,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ry extends _d{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=Nv(this.serializer,e),i=function(s){if(!("targetChange"in s))return he.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?he.min():a.readTime?Ft(a.readTime):he.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=ha(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=sa(c)?{documents:Lv(s,c)}:{query:Fv(s,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=ad(s,a.resumeToken);const d=la(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(he.min())>0){l.readTime=ko(s,a.snapshotVersion.toTimestamp());const d=la(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const i=qv(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=ha(this.serializer),n.removeTarget=e,this.Q_(n)}}class ky extends _d{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=Ov(e.writeResults,e.commitTime),i=Ft(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=ha(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Mv(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{}class Vy extends Py{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(e,ua(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(z.UNKNOWN,s.toString())})}Yo(e,n,i,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(e,ua(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(z.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class xy{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Yt(n),this.ua=!1):J("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="RemoteStore";class Dy{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(a=>{i.enqueueAndForget(async()=>{Zn(this)&&(J(Qn,"Restarting streams for network reachability change."),await async function(c){const d=de(c);d.da.add(4),await Pr(d),d.Va.set("Unknown"),d.da.delete(4),await ss(d)}(this))})}),this.Va=new xy(i,r)}}async function ss(t){if(Zn(t))for(const e of t.Aa)await e(!0)}async function Pr(t){for(const e of t.Aa)await e(!1)}function wd(t,e){const n=de(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Qa(n)?Wa(n):xi(n).N_()&&Ka(n,e))}function Ha(t,e){const n=de(t),i=xi(n);n.Ea.delete(e),i.N_()&&Ed(n,e),n.Ea.size===0&&(i.N_()?i.k_():Zn(n)&&n.Va.set("Unknown"))}function Ka(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xi(t).Z_(e)}function Ed(t,e){t.ma.Ke(e),xi(t).X_(e)}function Wa(t){t.ma=new Cv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),xi(t).start(),t.Va.ca()}function Qa(t){return Zn(t)&&!xi(t).O_()&&t.Ea.size>0}function Zn(t){return de(t).da.size===0}function Td(t){t.ma=void 0}async function Ny(t){t.Va.set("Online")}async function My(t){t.Ea.forEach((e,n)=>{Ka(t,e)})}async function Oy(t,e){Td(t),Qa(t)?(t.Va.Pa(e),Wa(t)):t.Va.set("Unknown")}async function Ly(t,e,n){if(t.Va.set("Online"),e instanceof sd&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ea.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ea.delete(l),r.ma.removeTarget(l))}(t,e)}catch(i){J(Qn,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vo(t,i)}else if(e instanceof fo?t.ma.Xe(e):e instanceof od?t.ma.ot(e):t.ma.nt(e),!n.isEqual(he.min()))try{const i=await vd(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.ma.It(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.Ea.get(d);f&&s.Ea.set(d,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const f=s.Ea.get(c);if(!f)return;s.Ea.set(c,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),Ed(s,c);const g=new un(f.target,c,d,f.sequenceNumber);Ka(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){J(Qn,"Failed to raise snapshot:",i),await Vo(t,i)}}async function Vo(t,e,n){if(!Vi(e))throw e;t.da.add(1),await Pr(t),t.Va.set("Offline"),n||(n=()=>vd(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Qn,"Retrying IndexedDB access"),await n(),t.da.delete(1),await ss(t)})}function bd(t,e){return e().catch(n=>Vo(t,n,e))}async function as(t){const e=de(t),n=En(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Va;for(;Fy(e);)try{const r=await _y(e.localStore,i);if(r===null){e.Ia.length===0&&n.k_();break}i=r.batchId,By(e,r)}catch(r){await Vo(e,r)}Id(e)&&Ad(e)}function Fy(t){return Zn(t)&&t.Ia.length<10}function By(t,e){t.Ia.push(e);const n=En(t);n.N_()&&n.ea&&n.ta(e.mutations)}function Id(t){return Zn(t)&&!En(t).O_()&&t.Ia.length>0}function Ad(t){En(t).start()}async function qy(t){En(t).ia()}async function $y(t){const e=En(t);for(const n of t.Ia)e.ta(n.mutations)}async function Uy(t,e,n){const i=t.Ia.shift(),r=Fa.from(i,e,n);await bd(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await as(t)}async function zy(t,e){e&&En(t).ea&&await async function(i,r){if(function(a){return Av(a)&&a!==z.ABORTED}(r.code)){const s=i.Ia.shift();En(i).L_(),await bd(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await as(i)}}(t,e),Id(t)&&Ad(t)}async function Zu(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),J(Qn,"RemoteStore received new credentials");const i=Zn(n);n.da.add(3),await Pr(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await ss(n)}async function jy(t,e){const n=de(t);e?(n.da.delete(2),await ss(n)):e||(n.da.add(2),await Pr(n),n.Va.set("Unknown"))}function xi(t){return t.fa||(t.fa=function(n,i,r){const s=de(n);return s.oa(),new Ry(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{e_:Ny.bind(null,t),n_:My.bind(null,t),i_:Oy.bind(null,t),Y_:Ly.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Qa(t)?Wa(t):t.Va.set("Unknown")):(await t.fa.stop(),Td(t))})),t.fa}function En(t){return t.ga||(t.ga=function(n,i,r){const s=de(n);return s.oa(),new ky(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:qy.bind(null,t),i_:zy.bind(null,t),na:$y.bind(null,t),ra:Uy.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await as(t)):(await t.ga.stop(),t.Ia.length>0&&(J(Qn,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new Ga(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xa(t,e){if(Yt("AsyncQueue",`${e}: ${t}`),Vi(t))return new ie(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{static emptySet(e){return new vi(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ae.comparator(n.key,i.key):(n,i)=>ae.comparator(n.key,i.key),this.keyedMap=er(),this.sortedSet=new xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new vi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.pa=new xe(ae.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ue(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Si{constructor(e,n,i,r,s,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Si(e,n,vi.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&es(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Ky{constructor(){this.queries=tc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=de(n),s=r.queries;r.queries=tc(),s.forEach((a,l)=>{for(const c of l.Sa)c.onError(i)})})(this,new ie(z.ABORTED,"Firestore shutting down"))}}function tc(){return new Jn(t=>Kh(t),es)}async function Wy(t,e){const n=de(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Da()&&e.va()&&(i=2):(s=new Hy,i=e.va()?0:1);try{switch(i){case 0:s.ba=await n.onListen(r,!0);break;case 1:s.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Xa(a,`Initialization of query '${mi(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.Sa.push(e),e.Fa(n.onlineState),s.ba&&e.Ma(s.ba)&&Ya(n)}async function Qy(t,e){const n=de(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.va()?0:1:!s.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Gy(t,e){const n=de(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Ma(r)&&(i=!0);a.ba=r}}i&&Ya(n)}function Xy(t,e,n){const i=de(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function Ya(t){t.Ca.forEach(e=>{e.next()})}var ma,nc;(nc=ma||(ma={})).xa="default",nc.Cache="cache";class Yy{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Si(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ma.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this.key=e}}class Cd{constructor(e){this.key=e}}class Jy{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ve(),this.mutatedKeys=ve(),this.Za=Wh(e),this.Xa=new vi(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new ec,r=n?n.Xa:this.Xa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,g)=>{const T=r.get(f),_=ts(this.query,g)?g:null,A=!!T&&this.mutatedKeys.has(T.key),V=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let R=!1;T&&_?T.data.isEqual(_.data)?A!==V&&(i.track({type:3,doc:_}),R=!0):this.ru(T,_)||(i.track({type:2,doc:_}),R=!0,(c&&this.Za(_,c)>0||d&&this.Za(_,d)<0)&&(l=!0)):!T&&_?(i.track({type:0,doc:_}),R=!0):T&&!_&&(i.track({type:1,doc:T}),R=!0,(c||d)&&(l=!0)),R&&(_?(a=a.add(_),s=V?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Xa:a,nu:i,Cs:l,mutatedKeys:s}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const a=e.nu.wa();a.sort((f,g)=>function(_,A){const V=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Vt:R})}};return V(_)-V(A)}(f.type,g.type)||this.Za(f.doc,g.doc)),this.iu(i),r=r!=null&&r;const l=n&&!r?this.su():[],c=this.Ya.size===0&&this.current&&!r?1:0,d=c!==this.Ja;return this.Ja=c,a.length!==0||d?{snapshot:new Si(this.query,e.Xa,s,a,e.mutatedKeys,c===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ec,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ve(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new Cd(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new Sd(i))}),n}au(e){this.Ha=e.$s,this.Ya=ve();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Si.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ja="SyncEngine";class Zy{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class e_{constructor(e){this.key=e,this.cu=!1}}class t_{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new Jn(l=>Kh(l),es),this.Pu=new Map,this.Tu=new Set,this.Iu=new xe(ae.comparator),this.Eu=new Map,this.du=new $a,this.Au={},this.Ru=new Map,this.Vu=Ai.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function n_(t,e,n=!0){const i=Dd(t);let r;const s=i.hu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.uu()):r=await Rd(i,e,n,!0),r}async function i_(t,e){const n=Dd(t);await Rd(n,e,!0,!1)}async function Rd(t,e,n,i){const r=await wy(t.localStore,Lt(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await r_(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&wd(t.remoteStore,r),l}async function r_(t,e,n,i,r){t.fu=(g,T,_)=>async function(V,R,L,M){let F=R.view.tu(L);F.Cs&&(F=await Qu(V.localStore,R.query,!1).then(({documents:I})=>R.view.tu(I,F)));const U=M&&M.targetChanges.get(R.targetId),H=M&&M.targetMismatches.get(R.targetId)!=null,G=R.view.applyChanges(F,V.isPrimaryClient,U,H);return rc(V,R.targetId,G.ou),G.snapshot}(t,g,T,_);const s=await Qu(t.localStore,e,!0),a=new Jy(e,s.$s),l=a.tu(s.documents),c=kr.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(l,t.isPrimaryClient,c);rc(t,n,d.ou);const f=new Zy(e,n,a);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function o_(t,e,n){const i=de(t),r=i.hu.get(e),s=i.Pu.get(r.targetId);if(s.length>1)return i.Pu.set(r.targetId,s.filter(a=>!es(a,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await da(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ha(i.remoteStore,r.targetId),ga(i,r.targetId)}).catch(Pi)):(ga(i,r.targetId),await da(i.localStore,r.targetId,!0))}async function s_(t,e){const n=de(t),i=n.hu.get(e),r=n.Pu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ha(n.remoteStore,i.targetId))}async function a_(t,e,n){const i=m_(t);try{const r=await function(a,l){const c=de(a),d=ze.now(),f=l.reduce((_,A)=>_.add(A.key),ve());let g,T;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=Jt(),V=ve();return c.Bs.getEntries(_,f).next(R=>{A=R,A.forEach((L,M)=>{M.isValidDocument()||(V=V.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,A)).next(R=>{g=R;const L=[];for(const M of l){const F=wv(M,g.get(M.key).overlayedDocument);F!=null&&L.push(new An(M.key,F,Fh(F.value.mapValue),At.exists(!0)))}return c.mutationQueue.addMutationBatch(_,d,L,l)}).next(R=>{T=R;const L=R.applyToLocalDocumentSet(g,V);return c.documentOverlayCache.saveOverlays(_,R.batchId,L)})}).then(()=>({batchId:T.batchId,changes:Gh(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let d=a.Au[a.currentUser.toKey()];d||(d=new xe(pe)),d=d.insert(l,c),a.Au[a.currentUser.toKey()]=d}(i,r.batchId,n),await Vr(i,r.changes),await as(i.remoteStore)}catch(r){const s=Xa(r,"Failed to persist write");n.reject(s)}}async function kd(t,e){const n=de(t);try{const i=await vy(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Eu.get(s);a&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.cu=!0:r.modifiedDocuments.size>0?Ae(a.cu,14607):r.removedDocuments.size>0&&(Ae(a.cu,42227),a.cu=!1))}),await Vr(n,i,e)}catch(i){await Pi(i)}}function ic(t,e,n){const i=de(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.hu.forEach((s,a)=>{const l=a.view.Fa(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=de(a);c.onlineState=l;let d=!1;c.queries.forEach((f,g)=>{for(const T of g.Sa)T.Fa(l)&&(d=!0)}),d&&Ya(c)}(i.eventManager,e),r.length&&i.lu.Y_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function l_(t,e,n){const i=de(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let a=new xe(ae.comparator);a=a.insert(s,st.newNoDocument(s,he.min()));const l=ve().add(s),c=new rs(he.min(),new Map,new xe(pe),a,l);await kd(i,c),i.Iu=i.Iu.remove(s),i.Eu.delete(e),Za(i)}else await da(i.localStore,e,!1).then(()=>ga(i,e,n)).catch(Pi)}async function u_(t,e){const n=de(t),i=e.batch.batchId;try{const r=await py(n.localStore,e);Vd(n,i,null),Pd(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vr(n,r)}catch(r){await Pi(r)}}async function c_(t,e,n){const i=de(t);try{const r=await function(a,l){const c=de(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(g=>(Ae(g!==null,37113),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(i.localStore,e);Vd(i,e,n),Pd(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Vr(i,r)}catch(r){await Pi(r)}}function Pd(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function Vd(t,e,n){const i=de(t);let r=i.Au[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Au[i.currentUser.toKey()]=r}}function ga(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||xd(t,i)})}function xd(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Ha(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Za(t))}function rc(t,e,n){for(const i of n)i instanceof Sd?(t.du.addReference(i.key,e),h_(t,i)):i instanceof Cd?(J(Ja,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||xd(t,i.key)):ue(19791,{pu:i})}function h_(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(J(Ja,"New document in limbo: "+n),t.Tu.add(i),Za(t))}function Za(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new ae(Ve.fromString(e)),i=t.Vu.next();t.Eu.set(i,new e_(n)),t.Iu=t.Iu.insert(n,i),wd(t.remoteStore,new un(Lt(Hh(n.path)),i,"TargetPurposeLimboResolution",Xo.le))}}async function Vr(t,e,n){const i=de(t),r=[],s=[],a=[];i.hu.isEmpty()||(i.hu.forEach((l,c)=>{a.push(i.fu(c,e,n).then(d=>{var f;if((d||n)&&i.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){r.push(d);const g=za.Rs(c.targetId,d);s.push(g)}}))}),await Promise.all(a),i.lu.Y_(r),await async function(c,d){const f=de(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>B.forEach(d,T=>B.forEach(T.ds,_=>f.persistence.referenceDelegate.addReference(g,T.targetId,_)).next(()=>B.forEach(T.As,_=>f.persistence.referenceDelegate.removeReference(g,T.targetId,_)))))}catch(g){if(!Vi(g))throw g;J(ja,"Failed to update sequence numbers: "+g)}for(const g of d){const T=g.targetId;if(!g.fromCache){const _=f.xs.get(T),A=_.snapshotVersion,V=_.withLastLimboFreeSnapshotVersion(A);f.xs=f.xs.insert(T,V)}}}(i.localStore,s))}async function d_(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){J(Ja,"User change. New user:",e.toKey());const i=await pd(n.localStore,e);n.currentUser=e,function(s,a){s.Ru.forEach(l=>{l.forEach(c=>{c.reject(new ie(z.CANCELLED,a))})}),s.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vr(n,i.ks)}}function f_(t,e){const n=de(t),i=n.Eu.get(e);if(i&&i.cu)return ve().add(i.key);{let r=ve();const s=n.Pu.get(e);if(!s)return r;for(const a of s){const l=n.hu.get(a);r=r.unionWith(l.view.eu)}return r}}function Dd(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l_.bind(null,e),e.lu.Y_=Gy.bind(null,e.eventManager),e.lu.gu=Xy.bind(null,e.eventManager),e}function m_(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c_.bind(null,e),e}class xo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=os(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return gy(this.persistence,new dy,e.initialUser,this.serializer)}Su(e){return new gd(Ua.fi,this.serializer)}bu(e){return new Ty}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xo.provider={build:()=>new xo};class g_ extends xo{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Ae(this.persistence.referenceDelegate instanceof Po,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Yv(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?ht.withCacheSize(this.cacheSizeBytes):ht.DEFAULT;return new gd(i=>Po.fi(i,n),this.serializer)}}class pa{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ic(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=d_.bind(null,this.syncEngine),await jy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ky}()}createDatastore(e){const n=os(e.databaseInfo.databaseId),i=function(s){return new Cy(s)}(e.databaseInfo);return function(s,a,l,c){return new Vy(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new Dy(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ic(this.syncEngine,n,0),function(){return Yu.C()?new Yu:new by}())}createSyncEngine(e,n){return function(r,s,a,l,c,d,f){const g=new t_(r,s,a,l,c,d);return f&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=de(r);J(Qn,"RemoteStore shutting down."),s.da.add(5),await Pr(s),s.Ra.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pa.provider={build:()=>new pa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Yt("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="FirestoreClient";class v_{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ot.UNAUTHENTICATED,this.clientId=Ch.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{J(Tn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(J(Tn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Xa(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ds(t,e){t.asyncQueue.verifyOperationInProgress(),J(Tn,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await pd(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function oc(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y_(t);J(Tn,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Zu(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Zu(e.remoteStore,r)),t._onlineComponents=e}async function y_(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Tn,"Using user provided OfflineComponentProvider");try{await Ds(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ei("Error using user provided cache. Falling back to memory cache: "+n),await Ds(t,new xo)}}else J(Tn,"Using default OfflineComponentProvider"),await Ds(t,new g_(void 0));return t._offlineComponents}async function Nd(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Tn,"Using user provided OnlineComponentProvider"),await oc(t,t._uninitializedComponentsProvider._online)):(J(Tn,"Using default OnlineComponentProvider"),await oc(t,new pa))),t._onlineComponents}function __(t){return Nd(t).then(e=>e.syncEngine)}async function w_(t){const e=await Nd(t),n=e.eventManager;return n.onListen=n_.bind(null,e.syncEngine),n.onUnlisten=o_.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=i_.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s_.bind(null,e.syncEngine),n}function E_(t,e,n={}){const i=new mn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const f=new p_({next:T=>{f.xu(),a.enqueueAndForget(()=>Qy(s,g)),T.fromCache&&c.source==="server"?d.reject(new ie(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(T)},error:T=>d.reject(T)}),g=new Yy(l,f,{includeMetadataChanges:!0,Qa:!0});return Wy(s,g)}(await w_(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t,e,n){if(!n)throw new ie(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T_(t,e,n,i){if(e===!0&&i===!0)throw new ie(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ac(t){if(!ae.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lc(t){if(ae.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function el(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function Gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=el(t);throw new ie(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="firestore.googleapis.com",uc=!0;class cc{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ld,this.ssl=uc}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:uc;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=md;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gv)throw new ie(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Md((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ls{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cc(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Sp;switch(i.type){case"firstParty":return new Pp(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=sc.get(n);i&&(J("ComponentProvider","Removing Datastore"),sc.delete(n),i.terminate())}(this),Promise.resolve()}}function b_(t,e,n,i={}){var r;t=Gn(t,ls);const s=Ca(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(eg(`https://${c}`),rg("Firestore",!0)),a.host!==Ld&&a.host!==c&&Ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:c,ssl:s,emulatorOptions:i});if(!dr(d,l)&&(t._setSettings(d),i.mockUserToken)){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=ot.MOCK_USER;else{f=tg(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ie(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ot(T)}t._authCredentials=new Cp(new Ah(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class wt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}}class gn extends us{constructor(e,n,i){super(e,n,Hh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new ae(e))}withConverter(e){return new gn(this.firestore,e,this._path)}}function wr(t,e,...n){if(t=Bt(t),Od("collection","path",e),t instanceof ls){const i=Ve.fromString(e,...n);return lc(i),new gn(t,null,i)}{if(!(t instanceof wt||t instanceof gn))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ve.fromString(e,...n));return lc(i),new gn(t.firestore,null,i)}}function Er(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=Ch.newId()),Od("doc","path",e),t instanceof ls){const i=Ve.fromString(e,...n);return ac(i),new wt(t,null,new ae(i))}{if(!(t instanceof wt||t instanceof gn))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ve.fromString(e,...n));return ac(i),new wt(t.firestore,t instanceof gn?t.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="AsyncQueue";class dc{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new yd(this,"async_queue_retry"),this.rc=()=>{const i=xs();i&&J(hc,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=xs();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=xs();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new mn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Vi(e))throw e;J(hc,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,Yt("INTERNAL UNHANDLED ERROR: ",fc(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=Ga.createAndSchedule(this,e,n,i,s=>this.uc(s));return this.Zu.push(r),r}oc(){this.Xu&&ue(47125,{cc:fc(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function fc(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class xr extends ls{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new dc,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dc(e),this._firestoreClient=void 0,await e}}}function I_(t,e){const n=typeof t=="object"?t:gh(),i=typeof t=="string"?t:e||bo,r=Cr(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=Jm("firestore");s&&b_(r,...s)}return r}function Fd(t){if(t._terminated)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A_(t),t._firestoreClient}function A_(t){var e,n,i;const r=t._freezeSettings(),s=function(l,c,d,f){return new Hp(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Md(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||((n=r.localCache)===null||n===void 0?void 0:n._offlineComponentProvider)&&((i=r.localCache)===null||i===void 0?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new v_(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ci(et.fromBase64String(e))}catch(n){throw new ie(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ci(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=/^__.*__$/;class C_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new An(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rr(e,this.data,n,this.fieldTransforms)}}class Bd{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new An(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ic:t})}}class rl{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new rl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:i,Rc:!1});return r.Vc(e),r}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Do(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(qd(this.Ic)&&S_.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class R_{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||os(e)}bc(e,n,i,r=!1){return new rl({Ic:e,methodName:n,wc:i,path:Je.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(t){const e=t._freezeSettings(),n=os(t._databaseId);return new R_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k_(t,e,n,i,r,s={}){const a=t.bc(s.merge||s.mergeFields?2:0,e,n,r);ol("Data must be an object, but it was:",a,i);const l=Ud(i,a);let c,d;if(s.merge)c=new pt(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const T=va(e,g,n);if(!a.contains(T))throw new ie(z.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);jd(f,T)||f.push(T)}c=new pt(f),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new C_(new dt(l),c,d)}class hs extends tl{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hs}}function P_(t,e,n,i){const r=t.bc(1,e,n);ol("Data must be an object, but it was:",r,i);const s=[],a=dt.empty();In(i,(c,d)=>{const f=sl(e,c,n);d=Bt(d);const g=r.mc(f);if(d instanceof hs)s.push(f);else{const T=ds(d,g);T!=null&&(s.push(f),a.set(f,T))}});const l=new pt(s);return new Bd(a,l,r.fieldTransforms)}function V_(t,e,n,i,r,s){const a=t.bc(1,e,n),l=[va(e,i,n)],c=[r];if(s.length%2!=0)throw new ie(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)l.push(va(e,s[T])),c.push(s[T+1]);const d=[],f=dt.empty();for(let T=l.length-1;T>=0;--T)if(!jd(d,l[T])){const _=l[T];let A=c[T];A=Bt(A);const V=a.mc(_);if(A instanceof hs)d.push(_);else{const R=ds(A,V);R!=null&&(d.push(_),f.set(_,R))}}const g=new pt(d);return new Bd(f,g,a.fieldTransforms)}function ds(t,e){if(zd(t=Bt(t)))return ol("Unsupported field value:",e,t),Ud(t,e);if(t instanceof tl)return function(i,r){if(!qd(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let c=ds(l,r.fc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Bt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return mv(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=ze.fromDate(i);return{timestampValue:ko(r.serializer,s)}}if(i instanceof ze){const s=new ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ko(r.serializer,s)}}if(i instanceof nl)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ci)return{bytesValue:ad(r.serializer,i._byteString)};if(i instanceof wt){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qa(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof il)return function(a,l){return{mapValue:{fields:{[Mh]:{stringValue:Lh},[Io]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return Oa(l.serializer,d)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${el(i)}`)}(t,e)}function Ud(t,e){const n={};return kh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):In(t,(i,r)=>{const s=ds(r,e.Ac(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function zd(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof nl||t instanceof Ci||t instanceof wt||t instanceof tl||t instanceof il)}function ol(t,e,n){if(!zd(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=el(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function va(t,e,n){if((e=Bt(e))instanceof cs)return e._internalPath;if(typeof e=="string")return sl(t,e);throw Do("Field path arguments must be of type string or ",t,!1,void 0,n)}const x_=new RegExp("[~\\*/\\[\\]]");function sl(t,e,n){if(e.search(x_)>=0)throw Do(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cs(...e.split("."))._internalPath}catch{throw Do(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Do(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new ie(z.INVALID_ARGUMENT,l+t+c)}function jd(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D_ extends Hd{data(){return super.data()}}function Kd(t,e){return typeof e=="string"?sl(t,e):e instanceof cs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M_{convertValue(e,n="none"){switch(wn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return In(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Io].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Oe(a.doubleValue));return new il(s)}convertGeoPoint(e){return new nl(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Jo(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(gr(e));default:return null}}convertTimestamp(e){const n=yn(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ve.fromString(e);Ae(fd(i),9688,{name:e});const r=new pr(i.get(1),i.get(3)),s=new ae(i.popFirst(5));return r.isEqual(n)||Yt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class L_ extends Hd{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Kd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class mo extends L_{data(e={}){return super.data(e)}}class F_{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new to(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new mo(this._firestore,this._userDataWriter,i.key,i,new to(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new mo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new to(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new mo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new to(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:B_(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function B_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}class q_ extends M_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function ya(t){t=Gn(t,us);const e=Gn(t.firestore,xr),n=Fd(e),i=new q_(e);return N_(t._query),E_(n,t._query).then(r=>new F_(e,i,t,r))}function $_(t,e,n,...i){t=Gn(t,wt);const r=Gn(t.firestore,xr),s=$d(r);let a;return a=typeof(e=Bt(e))=="string"||e instanceof cs?V_(s,"updateDoc",t._key,e,n,i):P_(s,"updateDoc",t._key,e),al(r,[a.toMutation(t._key,At.exists(!0))])}function _a(t){return al(Gn(t.firestore,xr),[new La(t._key,At.none())])}function Wd(t,e){const n=Gn(t.firestore,xr),i=Er(t),r=O_(t.converter,e);return al(n,[k_($d(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,At.exists(!1))]).then(()=>i)}function al(t,e){return function(i,r){const s=new mn;return i.asyncQueue.enqueueAndForget(async()=>a_(await __(i),r,s)),s.promise}(Fd(t),e)}(function(e,n=!0){(function(r){ki=r})(gp),pn(new Gt("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new xr(new Rp(i.getProvider("auth-internal")),new Vp(a,i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ie(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pr(d.options.projectId,f)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ot(yu,_u,e),Ot(yu,_u,"esm2017")})();var U_="firebase",z_="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot(U_,z_,"app");const Qd="@firebase/installations",ll="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=1e4,Xd=`w:${ll}`,Yd="FIS_v2",j_="https://firebaseinstallations.googleapis.com/v1",H_=60*60*1e3,K_="installations",W_="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Xn=new Go(K_,W_,Q_);function Jd(t){return t instanceof bn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd({projectId:t}){return`${j_}/projects/${t}/installations`}function ef(t){return{token:t.token,requestStatus:2,expiresIn:X_(t.expiresIn),creationTime:Date.now()}}async function tf(t,e){const i=(await e.json()).error;return Xn.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function nf({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function G_(t,{refreshToken:e}){const n=nf(t);return n.append("Authorization",Y_(e)),n}async function rf(t){const e=await t();return e.status>=500&&e.status<600?t():e}function X_(t){return Number(t.replace("s","000"))}function Y_(t){return`${Yd} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J_({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Zd(t),r=nf(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const a={fid:n,authVersion:Yd,appId:t.appId,sdkVersion:Xd},l={method:"POST",headers:r,body:JSON.stringify(a)},c=await rf(()=>fetch(i,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:ef(d.authToken)}}else throw await tf("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=/^[cdef][\w-]{21}$/,wa="";function t0(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=n0(t);return e0.test(n)?n:wa}catch{return wa}}function n0(t){return Z_(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new Map;function af(t,e){const n=fs(t);lf(n,e),i0(n,e)}function lf(t,e){const n=sf.get(t);if(!!n)for(const i of n)i(e)}function i0(t,e){const n=r0();n&&n.postMessage({key:t,fid:e}),o0()}let $n=null;function r0(){return!$n&&"BroadcastChannel"in self&&($n=new BroadcastChannel("[Firebase] FID Change"),$n.onmessage=t=>{lf(t.data.key,t.data.fid)}),$n}function o0(){sf.size===0&&$n&&($n.close(),$n=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="firebase-installations-database",a0=1,Yn="firebase-installations-store";let Ns=null;function ul(){return Ns||(Ns=fh(s0,a0,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Yn)}}})),Ns}async function No(t,e){const n=fs(t),r=(await ul()).transaction(Yn,"readwrite"),s=r.objectStore(Yn),a=await s.get(n);return await s.put(e,n),await r.done,(!a||a.fid!==e.fid)&&af(t,e.fid),e}async function uf(t){const e=fs(t),i=(await ul()).transaction(Yn,"readwrite");await i.objectStore(Yn).delete(e),await i.done}async function ms(t,e){const n=fs(t),r=(await ul()).transaction(Yn,"readwrite"),s=r.objectStore(Yn),a=await s.get(n),l=e(a);return l===void 0?await s.delete(n):await s.put(l,n),await r.done,l&&(!a||a.fid!==l.fid)&&af(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){let e;const n=await ms(t.appConfig,i=>{const r=l0(i),s=u0(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===wa?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function l0(t){const e=t||{fid:t0(),registrationStatus:0};return cf(e)}function u0(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Xn.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=c0(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:h0(t)}:{installationEntry:e}}async function c0(t,e){try{const n=await J_(t,e);return No(t.appConfig,n)}catch(n){throw Jd(n)&&n.customData.serverCode===409?await uf(t.appConfig):await No(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function h0(t){let e=await mc(t.appConfig);for(;e.registrationStatus===1;)await of(100),e=await mc(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await cl(t);return i||n}return e}function mc(t){return ms(t,e=>{if(!e)throw Xn.create("installation-not-found");return cf(e)})}function cf(t){return d0(t)?{fid:t.fid,registrationStatus:0}:t}function d0(t){return t.registrationStatus===1&&t.registrationTime+Gd<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0({appConfig:t,heartbeatServiceProvider:e},n){const i=m0(t,n),r=G_(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const a={installation:{sdkVersion:Xd,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(a)},c=await rf(()=>fetch(i,l));if(c.ok){const d=await c.json();return ef(d)}else throw await tf("Generate Auth Token",c)}function m0(t,{fid:e}){return`${Zd(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t,e=!1){let n;const i=await ms(t.appConfig,s=>{if(!hf(s))throw Xn.create("not-registered");const a=s.authToken;if(!e&&v0(a))return s;if(a.requestStatus===1)return n=g0(t,e),s;{if(!navigator.onLine)throw Xn.create("app-offline");const l=_0(s);return n=p0(t,l),l}});return n?await n:i.authToken}async function g0(t,e){let n=await gc(t.appConfig);for(;n.authToken.requestStatus===1;)await of(100),n=await gc(t.appConfig);const i=n.authToken;return i.requestStatus===0?hl(t,e):i}function gc(t){return ms(t,e=>{if(!hf(e))throw Xn.create("not-registered");const n=e.authToken;return w0(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function p0(t,e){try{const n=await f0(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await No(t.appConfig,i),n}catch(n){if(Jd(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await uf(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await No(t.appConfig,i)}throw n}}function hf(t){return t!==void 0&&t.registrationStatus===2}function v0(t){return t.requestStatus===2&&!y0(t)}function y0(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+H_}function _0(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function w0(t){return t.requestStatus===1&&t.requestTime+Gd<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0(t){const e=t,{installationEntry:n,registrationPromise:i}=await cl(e);return i?i.catch(console.error):hl(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T0(t,e=!1){const n=t;return await b0(n),(await hl(n,e)).token}async function b0(t){const{registrationPromise:e}=await cl(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){if(!t||!t.options)throw Ms("App Configuration");if(!t.name)throw Ms("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ms(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ms(t){return Xn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="installations",A0="installations-internal",S0=t=>{const e=t.getProvider("app").getImmediate(),n=I0(e),i=Cr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},C0=t=>{const e=t.getProvider("app").getImmediate(),n=Cr(e,df).getImmediate();return{getId:()=>E0(n),getToken:r=>T0(n,r)}};function R0(){pn(new Gt(df,S0,"PUBLIC")),pn(new Gt(A0,C0,"PRIVATE"))}R0();Ot(Qd,ll);Ot(Qd,ll,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="analytics",k0="firebase_id",P0="origin",V0=60*1e3,x0="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dl="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft=new Ra("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',["no-client-id"]:'The "client_id" field is empty.',["invalid-gtag-resource"]:"Trusted Types detected an invalid gtag resource: {$gtagURL}."},vt=new Go("analytics","Analytics",D0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){if(!t.startsWith(dl)){const e=vt.create("invalid-gtag-resource",{gtagURL:t});return ft.warn(e.message),""}return t}function ff(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function M0(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function O0(t,e){const n=M0("firebase-js-sdk-policy",{createScriptURL:N0}),i=document.createElement("script"),r=`${dl}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function L0(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function F0(t,e,n,i,r,s){const a=i[r];try{if(a)await e[a];else{const c=(await ff(n)).find(d=>d.measurementId===r);c&&await e[c.appId]}}catch(l){ft.error(l)}t("config",r,s)}async function B0(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);const l=await ff(n);for(const c of a){const d=l.find(g=>g.measurementId===c),f=d&&e[d.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){ft.error(s)}}function q0(t,e,n,i){async function r(s,...a){try{if(s==="event"){const[l,c]=a;await B0(t,e,n,l,c)}else if(s==="config"){const[l,c]=a;await F0(t,e,n,i,l,c)}else if(s==="consent"){const[l,c]=a;t("consent",l,c)}else if(s==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(s==="set"){const[l]=a;t("set",l)}else t(s,...a)}catch(l){ft.error(l)}}return r}function $0(t,e,n,i,r){let s=function(...a){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=q0(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function U0(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(dl)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=30,j0=1e3;class H0{constructor(e={},n=j0){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const mf=new H0;function K0(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function W0(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:K0(i)},s=x0.replace("{app-id}",n),a=await fetch(s,r);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw vt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function Q0(t,e=mf,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw vt.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw vt.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Y0;return setTimeout(async()=>{l.abort()},n!==void 0?n:V0),gf({appId:i,apiKey:r,measurementId:s},a,l,e)}async function gf(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=mf){var s;const{appId:a,measurementId:l}=t;try{await G0(i,e)}catch(c){if(l)return ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:l};throw c}try{const c=await W0(t);return r.deleteThrottleMetadata(a),c}catch(c){const d=c;if(!X0(d)){if(r.deleteThrottleMetadata(a),l)return ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:l};throw c}const f=Number((s=d==null?void 0:d.customData)===null||s===void 0?void 0:s.httpStatus)===503?lu(n,r.intervalMillis,z0):lu(n,r.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return r.setThrottleMetadata(a,g),ft.debug(`Calling attemptFetch again in ${f} millis`),gf(t,g,i,r)}}function G0(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(vt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function X0(t){if(!(t instanceof bn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Y0{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function J0(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,a=Object.assign(Object.assign({},i),{send_to:s});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z0(){if(uh())try{await ch()}catch(t){return ft.warn(vt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ft.warn(vt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ew(t,e,n,i,r,s,a){var l;const c=Q0(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>ft.error(_)),e.push(c);const d=Z0().then(_=>{if(_)return i.getId()}),[f,g]=await Promise.all([c,d]);U0(s)||O0(s,f.measurementId),r("js",new Date);const T=(l=a==null?void 0:a.config)!==null&&l!==void 0?l:{};return T[P0]="firebase",T.update=!0,g!=null&&(T[k0]=g),r("config",f.measurementId,T),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.app=e}_delete(){return delete lr[this.app.options.appId],Promise.resolve()}}let lr={},pc=[];const vc={};let Os="dataLayer",nw="gtag",yc,pf,_c=!1;function iw(){const t=[];if(ag()&&t.push("This is a browser extension environment."),ug()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=vt.create("invalid-analytics-context",{errorInfo:e});ft.warn(n.message)}}function rw(t,e,n){iw();const i=t.options.appId;if(!i)throw vt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw vt.create("no-api-key");if(lr[i]!=null)throw vt.create("already-exists",{id:i});if(!_c){L0(Os);const{wrappedGtag:s,gtagCore:a}=$0(lr,pc,vc,Os,nw);pf=s,yc=a,_c=!0}return lr[i]=ew(t,pc,vc,e,yc,Os,n),new tw(t)}function ow(t=gh()){t=Bt(t);const e=Cr(t,Mo);return e.isInitialized()?e.getImmediate():sw(t)}function sw(t,e={}){const n=Cr(t,Mo);if(n.isInitialized()){const r=n.getImmediate();if(dr(e,n.getOptions()))return r;throw vt.create("already-initialized")}return n.initialize({options:e})}function aw(t,e,n,i){t=Bt(t),J0(pf,lr[t.app.options.appId],e,n,i).catch(r=>ft.error(r))}const wc="@firebase/analytics",Ec="0.10.16";function lw(){pn(new Gt(Mo,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return rw(i,r,n)},"PUBLIC")),pn(new Gt("analytics-internal",t,"PRIVATE")),Ot(wc,Ec),Ot(wc,Ec,"esm2017");function t(e){try{const n=e.getProvider(Mo).getImmediate();return{logEvent:(i,r,s)=>aw(n,i,r,s)}}catch(n){throw vt.create("interop-component-reg-failed",{reason:n})}}}lw();const uw={apiKey:"AIzaSyAJBhq5z_RfteMOz2z1iXcj0Uq2URPwnWk",authDomain:"notedfirebase.firebaseapp.com",projectId:"notedfirebase",storageBucket:"notedfirebase.firebasestorage.app",messagingSenderId:"542456717235",appId:"1:542456717235:web:f8bab45ca8b5d48305f5c6",measurementId:"G-E60D51CS73"},vf=mh(uw),Qt=I_(vf);ow(vf);let Ls,no=0;const Xe=new Array(256);for(let t=0;t<256;t++)Xe[t]=(t+256).toString(16).substring(1);const cw=(()=>{const t=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let i=e;i>0;i--)n.push(Math.floor(Math.random()*256));return n}})(),Tc=4096;function Ea(){(Ls===void 0||no+16>Tc)&&(no=0,Ls=cw(Tc));const t=Array.prototype.slice.call(Ls,no,no+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,Xe[t[0]]+Xe[t[1]]+Xe[t[2]]+Xe[t[3]]+"-"+Xe[t[4]]+Xe[t[5]]+"-"+Xe[t[6]]+Xe[t[7]]+"-"+Xe[t[8]]+Xe[t[9]]+"-"+Xe[t[10]]+Xe[t[11]]+Xe[t[12]]+Xe[t[13]]+Xe[t[14]]+Xe[t[15]]}function hw(t){return t==null?null:t}function bc(t,e){return t==null?e===!0?`f_${Ea()}`:null:t}function yf({getValue:t,required:e=!0}={}){if(um.value===!0){const n=t!==void 0?Y(hw(t())):Y(null);return e===!0&&n.value===null&&Ut(()=>{n.value=`f_${Ea()}`}),t!==void 0&&me(t,i=>{n.value=bc(i,e)}),n}return t!==void 0?O(()=>bc(t(),e)):Y(`f_${Ea()}`)}const Ic=/^on[A-Z]/;function _f(){const{attrs:t,vnode:e}=Ne(),n={listeners:Y({}),attributes:Y({})};function i(){const r={},s={};for(const a in t)a!=="class"&&a!=="style"&&Ic.test(a)===!1&&(r[a]=t[a]);for(const a in e.props)Ic.test(a)===!0&&(s[a]=e.props[a]);n.attributes.value=r,n.listeners.value=s}return Kc(i),i(),n}const Di={dark:{type:Boolean,default:null}};function Ni(t,e){return O(()=>t.dark===null?e.dark.isActive:t.dark)}function dw({validate:t,resetValidation:e,requiresQForm:n}){const i=go(cm,!1);if(i!==!1){const{props:r,proxy:s}=Ne();Object.assign(s,{validate:t,resetValidation:e}),me(()=>r.disable,a=>{a===!0?(typeof e=="function"&&e(),i.unbindComponent(s)):i.bindComponent(s)}),Ut(()=>{r.disable!==!0&&i.bindComponent(s)}),Ze(()=>{r.disable!==!0&&i.unbindComponent(s)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Ac=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Sc=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Cc=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,io=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,ro=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Fs={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>Ac.test(t),hexaColor:t=>Sc.test(t),hexOrHexaColor:t=>Cc.test(t),rgbColor:t=>io.test(t),rgbaColor:t=>ro.test(t),rgbOrRgbaColor:t=>io.test(t)||ro.test(t),hexOrRgbColor:t=>Ac.test(t)||io.test(t),hexaOrRgbaColor:t=>Sc.test(t)||ro.test(t),anyColor:t=>Cc.test(t)||io.test(t)||ro.test(t)},fw=[!0,!1,"ondemand"],mw={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:t=>fw.includes(t)}};function gw(t,e){const{props:n,proxy:i}=Ne(),r=Y(!1),s=Y(null),a=Y(!1);dw({validate:V,resetValidation:A});let l=0,c;const d=O(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),f=O(()=>n.disable!==!0&&d.value===!0&&e.value===!1),g=O(()=>n.error===!0||r.value===!0),T=O(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:s.value);me(()=>n.modelValue,()=>{a.value=!0,f.value===!0&&n.lazyRules===!1&&R()});function _(){n.lazyRules!=="ondemand"&&f.value===!0&&a.value===!0&&R()}me(()=>n.reactiveRules,L=>{L===!0?c===void 0&&(c=me(()=>n.rules,_,{immediate:!0,deep:!0})):c!==void 0&&(c(),c=void 0)},{immediate:!0}),me(()=>n.lazyRules,_),me(t,L=>{L===!0?a.value=!0:f.value===!0&&n.lazyRules!=="ondemand"&&R()});function A(){l++,e.value=!1,a.value=!1,r.value=!1,s.value=null,R.cancel()}function V(L=n.modelValue){if(n.disable===!0||d.value===!1)return!0;const M=++l,F=e.value!==!0?()=>{a.value=!0}:()=>{},U=(G,I)=>{G===!0&&F(),r.value=G,s.value=I||null,e.value=!1},H=[];for(let G=0;G<n.rules.length;G++){const I=n.rules[G];let y;if(typeof I=="function"?y=I(L,Fs):typeof I=="string"&&Fs[I]!==void 0&&(y=Fs[I](L)),y===!1||typeof y=="string")return U(!0,y),!1;y!==!0&&y!==void 0&&H.push(y)}return H.length===0?(U(!1),!0):(e.value=!0,Promise.all(H).then(G=>{if(G===void 0||Array.isArray(G)===!1||G.length===0)return M===l&&U(!1),!0;const I=G.find(y=>y===!1||typeof y=="string");return M===l&&U(I!==void 0,I),I===void 0},G=>(M===l&&(console.error(G),U(!0)),!1)))}const R=Wc(V,0);return Ze(()=>{c==null||c(),R.cancel()}),Object.assign(i,{resetValidation:A,validate:V}),Aa(i,"hasError",()=>g.value),{isDirtyModel:a,hasRules:d,hasError:g,errorMessage:T,validate:V,resetValidation:A}}let Un=[],Tr=[];function wf(t){Tr=Tr.filter(e=>e!==t)}function pw(t){wf(t),Tr.push(t)}function Rc(t){wf(t),Tr.length===0&&Un.length!==0&&(Un[Un.length-1](),Un=[])}function Dr(t){Tr.length===0?t():Un.push(t)}function vw(t){Un=Un.filter(e=>e!==t)}function br(t){return t!=null&&(""+t).length!==0}const yw={...Di,...mw,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},gs={...yw,maxlength:[Number,String]},fl=["update:modelValue","clear","focus","blur"];function ml({requiredForAttr:t=!0,tagProp:e,changeEvent:n=!1}={}){const{props:i,proxy:r}=Ne(),s=Ni(i,r.$q),a=yf({required:t,getValue:()=>i.for});return{requiredForAttr:t,changeEvent:n,tag:e===!0?O(()=>i.tag):{value:"label"},isDark:s,editable:O(()=>i.disable!==!0&&i.readonly!==!0),innerLoading:Y(!1),focused:Y(!1),hasPopupOpen:!1,splitAttrs:_f(),targetUid:a,rootRef:Y(null),targetRef:Y(null),controlRef:Y(null)}}function gl(t){const{props:e,emit:n,slots:i,attrs:r,proxy:s}=Ne(),{$q:a}=s;let l=null;t.hasValue===void 0&&(t.hasValue=O(()=>br(e.modelValue))),t.emitValue===void 0&&(t.emitValue=K=>{n("update:modelValue",K)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:p,onFocusout:v}),Object.assign(t,{clearValue:b,onControlFocusin:p,onControlFocusout:v,focus:I}),t.computedCounter===void 0&&(t.computedCounter=O(()=>{if(e.counter!==!1){const K=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,Z=e.maxlength!==void 0?e.maxlength:e.maxValues;return K+(Z!==void 0?" / "+Z:"")}}));const{isDirtyModel:c,hasRules:d,hasError:f,errorMessage:g,resetValidation:T}=gw(t.focused,t.innerLoading),_=t.floatingLabel!==void 0?O(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):O(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),A=O(()=>e.bottomSlots===!0||e.hint!==void 0||d.value===!0||e.counter===!0||e.error!==null),V=O(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),R=O(()=>`q-field row no-wrap items-start q-field--${V.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(_.value===!0?" q-field--float":"")+(M.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(f.value===!0?" q-field--error":"")+(f.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&A.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),L=O(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(f.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),M=O(()=>e.labelSlot===!0||e.label!==void 0),F=O(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&f.value!==!0?` text-${e.labelColor}`:"")),U=O(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:_.value,modelValue:e.modelValue,emitValue:t.emitValue})),H=O(()=>{const K={};return t.targetUid.value&&(K.for=t.targetUid.value),e.disable===!0&&(K["aria-disabled"]="true"),K});function G(){var re;const K=document.activeElement;let Z=(re=t.targetRef)==null?void 0:re.value;Z&&(K===null||K.id!==t.targetUid.value)&&(Z.hasAttribute("tabindex")===!0||(Z=Z.querySelector("[tabindex]")),Z!==K&&(Z==null||Z.focus({preventScroll:!0})))}function I(){Dr(G)}function y(){vw(G);const K=document.activeElement;K!==null&&t.rootRef.value.contains(K)&&K.blur()}function p(K){l!==null&&(clearTimeout(l),l=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,n("focus",K))}function v(K,Z){l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,!(document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1))&&(t.focused.value===!0&&(t.focused.value=!1,n("blur",K)),Z==null||Z())})}function b(K){var Z;gt(K),a.platform.is.mobile!==!0?(((Z=t.targetRef)==null?void 0:Z.value)||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),n("update:modelValue",null),t.changeEvent===!0&&n("change",null),n("clear",e.modelValue),$e(()=>{const re=c.value;T(),c.value=re})}function E(K){[13,32].includes(K.keyCode)&&b(K)}function w(){const K=[];return i.prepend!==void 0&&K.push(q("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:_t},i.prepend())),K.push(q("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},te())),f.value===!0&&e.noErrorIcon===!1&&K.push(ee("error",[q(cn,{name:a.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?K.push(ee("inner-loading-append",i.loading!==void 0?i.loading():[q(hm,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&K.push(ee("inner-clearable-append",[q(cn,{class:"q-field__focusable-action",name:e.clearIcon||a.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":a.lang.label.clear,onKeyup:E,onClick:b})])),i.append!==void 0&&K.push(q("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:_t},i.append())),t.getInnerAppend!==void 0&&K.push(ee("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&K.push(t.getControlChild()),K}function te(){const K=[];return e.prefix!==void 0&&e.prefix!==null&&K.push(q("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&K.push(t.getShadowControl()),t.getControl!==void 0?K.push(t.getControl()):i.rawControl!==void 0?K.push(i.rawControl()):i.control!==void 0&&K.push(q("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},i.control(U.value))),M.value===!0&&K.push(q("div",{class:F.value},at(i.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&K.push(q("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),K.concat(at(i.default))}function ce(){let K,Z;f.value===!0?g.value!==null?(K=[q("div",{role:"alert"},g.value)],Z=`q--slot-error-${g.value}`):(K=at(i.error),Z="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(K=[q("div",e.hint)],Z=`q--slot-hint-${e.hint}`):(K=at(i.hint),Z="q--slot-hint"));const re=e.counter===!0||i.counter!==void 0;if(e.hideBottomSpace===!0&&re===!1&&K===void 0)return;const D=q("div",{key:Z,class:"q-field__messages col"},K);return q("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:_t},[e.hideBottomSpace===!0?D:q(hr,{name:"q-transition--field-message"},()=>D),re===!0?q("div",{class:"q-field__counter"},i.counter!==void 0?i.counter():t.computedCounter.value):null])}function ee(K,Z){return Z===null?null:q("div",{key:K,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},Z)}let oe=!1;return Wo(()=>{oe=!0}),Qc(()=>{oe===!0&&e.autofocus===!0&&s.focus()}),e.autofocus===!0&&Ut(()=>{s.focus()}),Ze(()=>{l!==null&&clearTimeout(l)}),Object.assign(s,{focus:I,blur:y}),function(){const Z=t.getControl===void 0&&i.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...H.value}:H.value;return q(t.tag.value,{ref:t.rootRef,class:[R.value,r.class],style:r.style,...Z},[i.before!==void 0?q("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:_t},i.before()):null,q("div",{class:"q-field__inner relative-position col self-stretch"},[q("div",{ref:t.controlRef,class:L.value,tabindex:-1,...t.controlEvents},w()),A.value===!0?ce():null]),i.after!==void 0?q("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:_t},i.after()):null])}}const kc={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Oo={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},Ef=Object.keys(Oo);Ef.forEach(t=>{Oo[t].regex=new RegExp(Oo[t].pattern)});const _w=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ef.join("")+"])|(.)","g"),Pc=/[.*+?^${}()|[\]\\]/g,Be=String.fromCharCode(1),ww={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Ew(t,e,n,i){let r,s,a,l,c,d;const f=Y(null),g=Y(_());function T(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}me(()=>t.type+t.autogrow,V),me(()=>t.mask,p=>{if(p!==void 0)R(g.value,!0);else{const v=I(g.value);V(),t.modelValue!==v&&e("update:modelValue",v)}}),me(()=>t.fillMask+t.reverseFillMask,()=>{f.value===!0&&R(g.value,!0)}),me(()=>t.unmaskedValue,()=>{f.value===!0&&R(g.value)});function _(){if(V(),f.value===!0){const p=H(I(t.modelValue));return t.fillMask!==!1?y(p):p}return t.modelValue}function A(p){if(p<r.length)return r.slice(-p);let v="",b=r;const E=b.indexOf(Be);if(E!==-1){for(let w=p-b.length;w>0;w--)v+=Be;b=b.slice(0,E)+v+b.slice(E)}return b}function V(){if(f.value=t.mask!==void 0&&t.mask.length!==0&&T(),f.value===!1){l=void 0,r="",s="";return}const p=kc[t.mask]===void 0?t.mask:kc[t.mask],v=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",b=v.replace(Pc,"\\$&"),E=[],w=[],te=[];let ce=t.reverseFillMask===!0,ee="",oe="";p.replace(_w,(D,k,$,le,se)=>{if(le!==void 0){const C=Oo[le];te.push(C),oe=C.negate,ce===!0&&(w.push("(?:"+oe+"+)?("+C.pattern+"+)?(?:"+oe+"+)?("+C.pattern+"+)?"),ce=!1),w.push("(?:"+oe+"+)?("+C.pattern+")?")}else if($!==void 0)ee="\\"+($==="\\"?"":$),te.push($),E.push("([^"+ee+"]+)?"+ee+"?");else{const C=k!==void 0?k:se;ee=C==="\\"?"\\\\\\\\":C.replace(Pc,"\\\\$&"),te.push(C),E.push("([^"+ee+"]+)?"+ee+"?")}});const K=new RegExp("^"+E.join("")+"("+(ee===""?".":"[^"+ee+"]")+"+)?"+(ee===""?"":"["+ee+"]*")+"$"),Z=w.length-1,re=w.map((D,k)=>k===0&&t.reverseFillMask===!0?new RegExp("^"+b+"*"+D):k===Z?new RegExp("^"+D+"("+(oe===""?".":oe)+"+)?"+(t.reverseFillMask===!0?"$":b+"*")):new RegExp("^"+D));a=te,l=D=>{const k=K.exec(t.reverseFillMask===!0?D:D.slice(0,te.length+1));k!==null&&(D=k.slice(1).join(""));const $=[],le=re.length;for(let se=0,C=D;se<le;se++){const x=re[se].exec(C);if(x===null)break;C=C.slice(x.shift().length),$.push(...x)}return $.length!==0?$.join(""):D},r=te.map(D=>typeof D=="string"?D:Be).join(""),s=r.split(Be).join(v)}function R(p,v,b){const E=i.value,w=E.selectionEnd,te=E.value.length-w,ce=I(p);v===!0&&V();const ee=H(ce),oe=t.fillMask!==!1?y(ee):ee,K=g.value!==oe;E.value!==oe&&(E.value=oe),K===!0&&(g.value=oe),document.activeElement===E&&$e(()=>{if(oe===s){const re=t.reverseFillMask===!0?s.length:0;E.setSelectionRange(re,re,"forward");return}if(b==="insertFromPaste"&&t.reverseFillMask!==!0){const re=E.selectionEnd;let D=w-1;for(let k=c;k<=D&&k<re;k++)r[k]!==Be&&D++;M.right(E,D);return}if(["deleteContentBackward","deleteContentForward"].indexOf(b)!==-1){const re=t.reverseFillMask===!0?w===0?oe.length>ee.length?1:0:Math.max(0,oe.length-(oe===s?0:Math.min(ee.length,te)+1))+1:w;E.setSelectionRange(re,re,"forward");return}if(t.reverseFillMask===!0)if(K===!0){const re=Math.max(0,oe.length-(oe===s?0:Math.min(ee.length,te+1)));re===1&&w===1?E.setSelectionRange(re,re,"forward"):M.rightReverse(E,re)}else{const re=oe.length-te;E.setSelectionRange(re,re,"backward")}else if(K===!0){const re=Math.max(0,r.indexOf(Be),Math.min(ee.length,w)-1);M.right(E,re)}else{const re=w-1;M.right(E,re)}});const Z=t.unmaskedValue===!0?I(oe):oe;String(t.modelValue)!==Z&&(t.modelValue!==null||Z!=="")&&n(Z,!0)}function L(p,v,b){const E=H(I(p.value));v=Math.max(0,r.indexOf(Be),Math.min(E.length,v)),c=v,p.setSelectionRange(v,b,"forward")}const M={left(p,v){const b=r.slice(v-1).indexOf(Be)===-1;let E=Math.max(0,v-1);for(;E>=0;E--)if(r[E]===Be){v=E,b===!0&&v++;break}if(E<0&&r[v]!==void 0&&r[v]!==Be)return M.right(p,0);v>=0&&p.setSelectionRange(v,v,"backward")},right(p,v){const b=p.value.length;let E=Math.min(b,v+1);for(;E<=b;E++)if(r[E]===Be){v=E;break}else r[E-1]===Be&&(v=E);if(E>b&&r[v-1]!==void 0&&r[v-1]!==Be)return M.left(p,b);p.setSelectionRange(v,v,"forward")},leftReverse(p,v){const b=A(p.value.length);let E=Math.max(0,v-1);for(;E>=0;E--)if(b[E-1]===Be){v=E;break}else if(b[E]===Be&&(v=E,E===0))break;if(E<0&&b[v]!==void 0&&b[v]!==Be)return M.rightReverse(p,0);v>=0&&p.setSelectionRange(v,v,"backward")},rightReverse(p,v){const b=p.value.length,E=A(b),w=E.slice(0,v+1).indexOf(Be)===-1;let te=Math.min(b,v+1);for(;te<=b;te++)if(E[te-1]===Be){v=te,v>0&&w===!0&&v--;break}if(te>b&&E[v-1]!==void 0&&E[v-1]!==Be)return M.leftReverse(p,b);p.setSelectionRange(v,v,"forward")}};function F(p){e("click",p),d=void 0}function U(p){if(e("keydown",p),Qo(p)===!0||p.altKey===!0)return;const v=i.value,b=v.selectionStart,E=v.selectionEnd;if(p.shiftKey||(d=void 0),p.keyCode===37||p.keyCode===39){p.shiftKey&&d===void 0&&(d=v.selectionDirection==="forward"?b:E);const w=M[(p.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(p.preventDefault(),w(v,d===b?E:b),p.shiftKey){const te=v.selectionStart;v.setSelectionRange(Math.min(d,te),Math.max(d,te),"forward")}}else p.keyCode===8&&t.reverseFillMask!==!0&&b===E?(M.left(v,b),v.setSelectionRange(v.selectionStart,E,"backward")):p.keyCode===46&&t.reverseFillMask===!0&&b===E&&(M.rightReverse(v,E),v.setSelectionRange(b,v.selectionEnd,"forward"))}function H(p){if(p==null||p==="")return"";if(t.reverseFillMask===!0)return G(p);const v=a;let b=0,E="";for(let w=0;w<v.length;w++){const te=p[b],ce=v[w];if(typeof ce=="string")E+=ce,te===ce&&b++;else if(te!==void 0&&ce.regex.test(te))E+=ce.transform!==void 0?ce.transform(te):te,b++;else return E}return E}function G(p){const v=a,b=r.indexOf(Be);let E=p.length-1,w="";for(let te=v.length-1;te>=0&&E!==-1;te--){const ce=v[te];let ee=p[E];if(typeof ce=="string")w=ce+w,ee===ce&&E--;else if(ee!==void 0&&ce.regex.test(ee))do w=(ce.transform!==void 0?ce.transform(ee):ee)+w,E--,ee=p[E];while(b===te&&ee!==void 0&&ce.regex.test(ee));else return w}return w}function I(p){return typeof p!="string"||l===void 0?typeof p=="number"?l(""+p):p:l(p)}function y(p){return s.length-p.length<=0?p:t.reverseFillMask===!0&&p.length!==0?s.slice(0,-p.length)+p:p+s.slice(p.length)}return{innerValue:g,hasMask:f,moveCursorForPaste:L,updateMaskValue:R,onMaskedKeydown:U,onMaskedClick:F}}const Tf={name:String};function bf(t){return O(()=>t.name||t.for)}function Tw(t,e){function n(){const i=t.modelValue;try{const r="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(i)===i&&("length"in i?Array.from(i):[i]).forEach(s=>{r.items.add(s)}),{files:r.files}}catch{return{files:void 0}}}return e===!0?O(()=>{if(t.type==="file")return n()}):O(n)}const bw=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Iw=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Aw=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Sw=/[a-z0-9_ -]$/i;function If(t){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,t(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(Nt.is.firefox===!0?Sw.test(n.data)===!1:bw.test(n.data)===!0||Iw.test(n.data)===!0||Aw.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var Ir=Ke({name:"QInput",inheritAttrs:!1,props:{...gs,...ww,...Tf,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...fl,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:n}){const{proxy:i}=Ne(),{$q:r}=i,s={};let a=NaN,l,c,d=null,f;const g=Y(null),T=bf(t),{innerValue:_,hasMask:A,moveCursorForPaste:V,updateMaskValue:R,onMaskedKeydown:L,onMaskedClick:M}=Ew(t,e,ee,g),F=Tw(t,!0),U=O(()=>br(_.value)),H=If(te),G=ml({changeEvent:!0}),I=O(()=>t.type==="textarea"||t.autogrow===!0),y=O(()=>I.value===!0||["text","search","url","tel","password"].includes(t.type)),p=O(()=>{const k={...G.splitAttrs.listeners.value,onInput:te,onPaste:w,onChange:K,onBlur:Z,onFocus:Dt};return k.onCompositionstart=k.onCompositionupdate=k.onCompositionend=H,A.value===!0&&(k.onKeydown=L,k.onClick=M),t.autogrow===!0&&(k.onAnimationend=ce),k}),v=O(()=>{const k={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:T.value,...G.splitAttrs.attributes.value,id:G.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return I.value===!1&&(k.type=t.type),t.autogrow===!0&&(k.rows=1),k});me(()=>t.type,()=>{g.value&&(g.value.value=t.modelValue)}),me(()=>t.modelValue,k=>{if(A.value===!0){if(c===!0&&(c=!1,String(k)===a))return;R(k)}else _.value!==k&&(_.value=k,t.type==="number"&&s.hasOwnProperty("value")===!0&&(l===!0?l=!1:delete s.value));t.autogrow===!0&&$e(oe)}),me(()=>t.autogrow,k=>{k===!0?$e(oe):g.value!==null&&n.rows>0&&(g.value.style.height="auto")}),me(()=>t.dense,()=>{t.autogrow===!0&&$e(oe)});function b(){Dr(()=>{const k=document.activeElement;g.value!==null&&g.value!==k&&(k===null||k.id!==G.targetUid.value)&&g.value.focus({preventScroll:!0})})}function E(){var k;(k=g.value)==null||k.select()}function w(k){if(A.value===!0&&t.reverseFillMask!==!0){const $=k.target;V($,$.selectionStart,$.selectionEnd)}e("paste",k)}function te(k){if(!k||!k.target)return;if(t.type==="file"){e("update:modelValue",k.target.files);return}const $=k.target.value;if(k.target.qComposing===!0){s.value=$;return}if(A.value===!0)R($,!1,k.inputType);else if(ee($),y.value===!0&&k.target===document.activeElement){const{selectionStart:le,selectionEnd:se}=k.target;le!==void 0&&se!==void 0&&$e(()=>{k.target===document.activeElement&&$.indexOf(k.target.value)===0&&k.target.setSelectionRange(le,se)})}t.autogrow===!0&&oe()}function ce(k){e("animationend",k),oe()}function ee(k,$){f=()=>{d=null,t.type!=="number"&&s.hasOwnProperty("value")===!0&&delete s.value,t.modelValue!==k&&a!==k&&(a=k,$===!0&&(c=!0),e("update:modelValue",k),$e(()=>{a===k&&(a=NaN)})),f=void 0},t.type==="number"&&(l=!0,s.value=k),t.debounce!==void 0?(d!==null&&clearTimeout(d),s.value=k,d=setTimeout(f,t.debounce)):f()}function oe(){requestAnimationFrame(()=>{const k=g.value;if(k!==null){const $=k.parentNode.style,{scrollTop:le}=k,{overflowY:se,maxHeight:C}=r.platform.is.firefox===!0?{}:window.getComputedStyle(k),x=se!==void 0&&se!=="scroll";x===!0&&(k.style.overflowY="hidden"),$.marginBottom=k.scrollHeight-1+"px",k.style.height="1px",k.style.height=k.scrollHeight+"px",x===!0&&(k.style.overflowY=parseInt(C,10)<k.scrollHeight?"auto":"hidden"),$.marginBottom="",k.scrollTop=le}})}function K(k){H(k),d!==null&&(clearTimeout(d),d=null),f==null||f(),e("change",k.target.value)}function Z(k){k!==void 0&&Dt(k),d!==null&&(clearTimeout(d),d=null),f==null||f(),l=!1,c=!1,delete s.value,t.type!=="file"&&setTimeout(()=>{g.value!==null&&(g.value.value=_.value!==void 0?_.value:"")})}function re(){return s.hasOwnProperty("value")===!0?s.value:_.value!==void 0?_.value:""}Ze(()=>{Z()}),Ut(()=>{t.autogrow===!0&&oe()}),Object.assign(G,{innerValue:_,fieldClass:O(()=>`q-${I.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:O(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:g,emitValue:ee,hasValue:U,floatingLabel:O(()=>U.value===!0&&(t.type!=="number"||isNaN(_.value)===!1)||br(t.displayValue)),getControl:()=>q(I.value===!0?"textarea":"input",{ref:g,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...v.value,...p.value,...t.type!=="file"?{value:re()}:F.value}),getShadowControl:()=>q("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(I.value===!0?"":" text-no-wrap")},[q("span",{class:"invisible"},re()),q("span",t.shadowText)])});const D=gl(G);return Object.assign(i,{focus:b,select:E,getNativeElement:()=>g.value}),Aa(i,"nativeEl",()=>g.value),D}}),ur=Ke({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const n=O(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>q(t.tag,{class:n.value},at(e.default))}}),Lo=Ke({name:"QCardActions",props:{...dm,vertical:Boolean},setup(t,{slots:e}){const n=fm(t),i=O(()=>`q-card__actions ${n.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>q("div",{class:i.value},at(e.default))}}),cr=Ke({name:"QCard",props:{...Di,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Ne(),i=Ni(t,n),r=O(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>q(t.tag,{class:r.value},at(e.default))}});function Cw(t,e,n){let i;function r(){i!==void 0&&(po.remove(i),i=void 0)}return Ze(()=>{t.value===!0&&r()}),{removeFromHistory:r,addToHistory(){i={condition:()=>n.value===!0,handler:e},po.add(i)}}}function pl(){let t=null;const e=Ne();function n(){t!==null&&(clearTimeout(t),t=null)}return Wo(n),Ze(n),{removeTimeout:n,registerTimeout(i,r){n(),Gc(e)===!1&&(t=setTimeout(()=>{t=null,i()},r))}}}function vl(){let t;const e=Ne();function n(){t=void 0}return Wo(n),Ze(n),{removeTick:n,registerTick(i){t=i,$e(()=>{t===i&&(Gc(e)===!1&&t(),t=void 0)})}}}const yl={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},_l=["beforeShow","show","beforeHide","hide"];function wl({showing:t,canShow:e,hideOnRouteChange:n,handleShow:i,handleHide:r,processOnMount:s}){const a=Ne(),{props:l,emit:c,proxy:d}=a;let f;function g(M){t.value===!0?A(M):T(M)}function T(M){if(l.disable===!0||(M==null?void 0:M.qAnchorHandled)===!0||e!==void 0&&e(M)!==!0)return;const F=l["onUpdate:modelValue"]!==void 0;F===!0&&(c("update:modelValue",!0),f=M,$e(()=>{f===M&&(f=void 0)})),(l.modelValue===null||F===!1)&&_(M)}function _(M){t.value!==!0&&(t.value=!0,c("beforeShow",M),i!==void 0?i(M):c("show",M))}function A(M){if(l.disable===!0)return;const F=l["onUpdate:modelValue"]!==void 0;F===!0&&(c("update:modelValue",!1),f=M,$e(()=>{f===M&&(f=void 0)})),(l.modelValue===null||F===!1)&&V(M)}function V(M){t.value!==!1&&(t.value=!1,c("beforeHide",M),r!==void 0?r(M):c("hide",M))}function R(M){l.disable===!0&&M===!0?l["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!1):M===!0!==t.value&&(M===!0?_:V)(f)}me(()=>l.modelValue,R),n!==void 0&&Xc(a)===!0&&me(()=>d.$route.fullPath,()=>{n.value===!0&&t.value===!0&&A()}),s===!0&&Ut(()=>{R(l.modelValue)});const L={show:T,hide:A,toggle:g};return Object.assign(d,L),L}const yi={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function El(t,e=()=>{},n=()=>{}){return{transitionProps:O(()=>{const i=`q-transition--${t.transitionShow||e()}`,r=`q-transition--${t.transitionHide||n()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${r}-leave-from`,leaveActiveClass:`${r}-leave-active`,leaveToClass:`${r}-leave-to`}}),transitionStyle:O(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}const _i=[];function Rw(t){return _i.find(e=>e.contentEl!==null&&e.contentEl.contains(t))}function Af(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return ao(t)}else if(t.__qPortal===!0){const n=ao(t);return(n==null?void 0:n.$options.name)==="QPopupProxy"?(t.hide(e),n):t}t=ao(t)}while(t!=null)}function kw(t,e,n){for(;n!==0&&t!==void 0&&t!==null;){if(t.__qPortal===!0){if(n--,t.$options.name==="QMenu"){t=Af(t,e);continue}t.hide(e)}t=ao(t)}}const Pw=Ke({name:"QPortal",setup(t,{slots:e}){return()=>e.default()}});function Vw(t){for(t=t.parent;t!=null;){if(t.type.name==="QGlobalDialog")return!0;if(t.type.name==="QDialog"||t.type.name==="QMenu")return!1;t=t.parent}return!1}function Tl(t,e,n,i){const r=Y(!1),s=Y(!1);let a=null;const l={},c=i==="dialog"&&Vw(t);function d(g){if(g===!0){Rc(l),s.value=!0;return}s.value=!1,r.value===!1&&(c===!1&&a===null&&(a=pm(!1,i)),r.value=!0,_i.push(t.proxy),pw(l))}function f(g){if(s.value=!1,g!==!0)return;Rc(l),r.value=!1;const T=_i.indexOf(t.proxy);T!==-1&&_i.splice(T,1),a!==null&&(vm(a),a=null)}return mm(()=>{f(!0)}),t.proxy.__qPortal=!0,Aa(t.proxy,"contentEl",()=>e.value),{showPortal:d,hidePortal:f,portalIsActive:r,portalIsAccessible:s,renderPortal:()=>c===!0?n():r.value===!0?[q(gm,{to:a},q(Pw,n))]:void 0}}let Gi=0,Bs,qs,nr,$s=!1,Vc,xc,Dc,Fn=null;function xw(t){Dw(t)&&gt(t)}function Dw(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=ym(t),n=t.shiftKey&&!t.deltaX,i=!n&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),r=n||i?t.deltaY:t.deltaX;for(let s=0;s<e.length;s++){const a=e[s];if(Lm(a,i))return i?r<0&&a.scrollTop===0?!0:r>0&&a.scrollTop+a.clientHeight===a.scrollHeight:r<0&&a.scrollLeft===0?!0:r>0&&a.scrollLeft+a.clientWidth===a.scrollWidth}return!0}function Nc(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function oo(t){$s!==!0&&($s=!0,requestAnimationFrame(()=>{$s=!1;const{height:e}=t.target,{clientHeight:n,scrollTop:i}=document.scrollingElement;(nr===void 0||e!==window.innerHeight)&&(nr=n-e,document.scrollingElement.scrollTop=i),i>nr&&(document.scrollingElement.scrollTop-=Math.ceil((i-nr)/8))}))}function Mc(t){const e=document.body,n=window.visualViewport!==void 0;if(t==="add"){const{overflowY:i,overflowX:r}=window.getComputedStyle(e);Bs=Mm(window),qs=Om(window),Vc=e.style.left,xc=e.style.top,Dc=window.location.href,e.style.left=`-${Bs}px`,e.style.top=`-${qs}px`,r!=="hidden"&&(r==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),i!=="hidden"&&(i==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,Nt.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",oo,Vt.passiveCapture),window.visualViewport.addEventListener("scroll",oo,Vt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Nc,Vt.passiveCapture))}Nt.is.desktop===!0&&Nt.is.mac===!0&&window[`${t}EventListener`]("wheel",xw,Vt.notPassive),t==="remove"&&(Nt.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",oo,Vt.passiveCapture),window.visualViewport.removeEventListener("scroll",oo,Vt.passiveCapture)):window.removeEventListener("scroll",Nc,Vt.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=Vc,e.style.top=xc,window.location.href===Dc&&window.scrollTo(Bs,qs),nr=void 0)}function Nw(t){let e="add";if(t===!0){if(Gi++,Fn!==null){clearTimeout(Fn),Fn=null;return}if(Gi>1)return}else{if(Gi===0||(Gi--,Gi>0))return;if(e="remove",Nt.is.ios===!0&&Nt.is.nativeMobile===!0){Fn!==null&&clearTimeout(Fn),Fn=setTimeout(()=>{Mc(e),Fn=null},100);return}}Mc(e)}function Mw(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,Nw(e))}}}const jn=[];let Ri;function Ow(t){Ri=t.keyCode===27}function Lw(){Ri===!0&&(Ri=!1)}function Fw(t){Ri===!0&&(Ri=!1,Sr(t,27)===!0&&jn[jn.length-1](t))}function Sf(t){window[t]("keydown",Ow),window[t]("blur",Lw),window[t]("keyup",Fw),Ri=!1}function Cf(t){Nt.is.desktop===!0&&(jn.push(t),jn.length===1&&Sf("addEventListener"))}function Fo(t){const e=jn.indexOf(t);e!==-1&&(jn.splice(e,1),jn.length===0&&Sf("removeEventListener"))}const Hn=[];function Rf(t){Hn[Hn.length-1](t)}function kf(t){Nt.is.desktop===!0&&(Hn.push(t),Hn.length===1&&document.body.addEventListener("focusin",Rf))}function Ta(t){const e=Hn.indexOf(t);e!==-1&&(Hn.splice(e,1),Hn.length===0&&document.body.removeEventListener("focusin",Rf))}let so=0;const Bw={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Oc={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Ar=Ke({name:"QDialog",inheritAttrs:!1,props:{...yl,...yi,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:t=>["standard","top","bottom","left","right"].includes(t)}},emits:[..._l,"shake","click","escapeKey"],setup(t,{slots:e,emit:n,attrs:i}){const r=Ne(),s=Y(null),a=Y(!1),l=Y(!1);let c=null,d=null,f,g;const T=O(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:_}=Mw(),{registerTimeout:A}=pl(),{registerTick:V,removeTick:R}=vl(),{transitionProps:L,transitionStyle:M}=El(t,()=>Oc[t.position][0],()=>Oc[t.position][1]),F=O(()=>M.value+(t.backdropFilter!==void 0?`;backdrop-filter:${t.backdropFilter};-webkit-backdrop-filter:${t.backdropFilter}`:"")),{showPortal:U,hidePortal:H,portalIsAccessible:G,renderPortal:I}=Tl(r,s,se,"dialog"),{hide:y}=wl({showing:a,hideOnRouteChange:T,handleShow:ce,handleHide:ee,processOnMount:!0}),{addToHistory:p,removeFromHistory:v}=Cw(a,y,T),b=O(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${Bw[t.position]}`+(l.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),E=O(()=>a.value===!0&&t.seamless!==!0),w=O(()=>t.autoClose===!0?{onClick:k}:{}),te=O(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${E.value===!0?"modal":"seamless"}`,i.class]);me(()=>t.maximized,C=>{a.value===!0&&D(C)}),me(E,C=>{_(C),C===!0?(kf(le),Cf(Z)):(Ta(le),Fo(Z))});function ce(C){var x;p(),d=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,D(t.maximized),U(),l.value=!0,t.noFocus!==!0?((x=document.activeElement)==null||x.blur(),V(oe)):R(),A(()=>{if(r.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:ne,bottom:j}=document.activeElement.getBoundingClientRect(),{innerHeight:ye}=window,Me=window.visualViewport!==void 0?window.visualViewport.height:ye;ne>0&&j>Me/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Me,j>=ye?1/0:Math.ceil(document.scrollingElement.scrollTop+j-Me/2))),document.activeElement.scrollIntoView()}g=!0,s.value.click(),g=!1}U(!0),l.value=!1,n("show",C)},t.transitionDuration)}function ee(C){R(),v(),re(!0),l.value=!0,H(),d!==null&&((((C==null?void 0:C.type.indexOf("key"))===0?d.closest('[tabindex]:not([tabindex^="-"])'):void 0)||d).focus(),d=null),A(()=>{H(!0),l.value=!1,n("hide",C)},t.transitionDuration)}function oe(C){Dr(()=>{let x=s.value;if(x!==null){if(C!==void 0){const ne=x.querySelector(C);if(ne!==null){ne.focus({preventScroll:!0});return}}x.contains(document.activeElement)!==!0&&(x=x.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||x.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||x.querySelector("[autofocus], [data-autofocus]")||x,x.focus({preventScroll:!0}))}})}function K(C){C&&typeof C.focus=="function"?C.focus({preventScroll:!0}):oe(),n("shake");const x=s.value;x!==null&&(x.classList.remove("q-animate--scale"),x.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,s.value!==null&&(x.classList.remove("q-animate--scale"),oe())},170))}function Z(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&K():(n("escapeKey"),y()))}function re(C){c!==null&&(clearTimeout(c),c=null),(C===!0||a.value===!0)&&(D(!1),t.seamless!==!0&&(_(!1),Ta(le),Fo(Z))),C!==!0&&(d=null)}function D(C){C===!0?f!==!0&&(so<1&&document.body.classList.add("q-body--dialog"),so++,f=!0):f===!0&&(so<2&&document.body.classList.remove("q-body--dialog"),so--,f=!1)}function k(C){g!==!0&&(y(C),n("click",C))}function $(C){t.persistent!==!0&&t.noBackdropDismiss!==!0?y(C):t.noShake!==!0&&K()}function le(C){t.allowFocusOutside!==!0&&G.value===!0&&Yc(s.value,C.target)!==!0&&oe('[tabindex]:not([tabindex="-1"])')}Object.assign(r.proxy,{focus:oe,shake:K,__updateRefocusTarget(C){d=C||null}}),Ze(re);function se(){return q("div",{role:"dialog","aria-modal":E.value===!0?"true":"false",...i,class:te.value},[q(hr,{name:"q-transition--fade",appear:!0},()=>E.value===!0?q("div",{class:"q-dialog__backdrop fixed-full",style:F.value,"aria-hidden":"true",tabindex:-1,onClick:$}):null),q(hr,L.value,()=>a.value===!0?q("div",{ref:s,class:b.value,style:M.value,tabindex:-1,...w.value},at(e.default)):null)])}return I}}),Bo=Ke({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(t,{slots:e}){const n=O(()=>`q-item__section column q-item__section--${t.avatar===!0||t.side===!0||t.thumbnail===!0?"side":"main"}`+(t.top===!0?" q-item__section--top justify-start":" justify-center")+(t.avatar===!0?" q-item__section--avatar":"")+(t.thumbnail===!0?" q-item__section--thumbnail":"")+(t.noWrap===!0?" q-item__section--nowrap":""));return()=>q("div",{class:n.value},at(e.default))}}),bl=Ke({name:"QItem",props:{...Di,..._m,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(t,{slots:e,emit:n}){const{proxy:{$q:i}}=Ne(),r=Ni(t,i),{hasLink:s,linkAttrs:a,linkClass:l,linkTag:c,navigateOnClick:d}=wm(),f=Y(null),g=Y(null),T=O(()=>t.clickable===!0||s.value===!0||t.tag==="label"),_=O(()=>t.disable!==!0&&T.value===!0),A=O(()=>"q-item q-item-type row no-wrap"+(t.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(s.value===!0&&t.active===null?l.value:t.active===!0?` q-item--active${t.activeClass!==void 0?` ${t.activeClass}`:""}`:"")+(t.disable===!0?" disabled":"")+(_.value===!0?" q-item--clickable q-link cursor-pointer "+(t.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(t.focused===!0?" q-manual-focusable--focused":""):"")),V=O(()=>{if(t.insetLevel===void 0)return null;const F=i.lang.rtl===!0?"Right":"Left";return{["padding"+F]:16+t.insetLevel*56+"px"}});function R(F){_.value===!0&&(g.value!==null&&F.qAvoidFocus!==!0&&(F.qKeyEvent!==!0&&document.activeElement===f.value?g.value.focus():document.activeElement===g.value&&f.value.focus()),d(F))}function L(F){if(_.value===!0&&Sr(F,[13,32])===!0){gt(F),F.qKeyEvent=!0;const U=new MouseEvent("click",F);U.qKeyEvent=!0,f.value.dispatchEvent(U)}n("keyup",F)}function M(){const F=Em(e.default,[]);return _.value===!0&&F.unshift(q("div",{class:"q-focus-helper",tabindex:-1,ref:g})),F}return()=>{const F={ref:f,class:A.value,style:V.value,role:"listitem",onClick:R,onKeyup:L};return _.value===!0?(F.tabindex=t.tabindex||"0",Object.assign(F,a.value)):T.value===!0&&(F["aria-disabled"]="true"),q(c.value,F,M())}}});function Lc(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}var qo=Tm({name:"close-popup",beforeMount(t,{value:e}){const n={depth:Lc(e),handler(i){n.depth!==0&&setTimeout(()=>{const r=Rw(t);r!==void 0&&kw(r,i,n.depth)})},handlerKey(i){Sr(i,13)===!0&&n.handler(i)}};t.__qclosepopup=n,t.addEventListener("click",n.handler),t.addEventListener("keyup",n.handlerKey)},updated(t,{value:e,oldValue:n}){e!==n&&(t.__qclosepopup.depth=Lc(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}}),Pf="/assets/delete.e33f2b66.png";const qw={class:"row"},$w={class:"add-btn-container"},Uw={class:"clear-label"},zw={__name:"SidebarPanel",props:["notebooks","ActiveNotebook"],emits:["odabirKnjige","refresh"],setup(t,{emit:e}){const n=t,i=e,r=Y(""),s=O(()=>{const _=r.value.toLowerCase();return n.notebooks.filter(A=>A.name.toLowerCase().includes(_))}),a=Y(!1),l=Y(""),c=Y(!1),d=Y(null);async function f(){if(!!l.value.trim())try{await Wd(wr(Qt,"notebooks"),{NotebookName:l.value.trim()}),i("refresh"),a.value=!1,l.value=""}catch(_){console.error("Error",_)}}function g(_){d.value=_,c.value=!0}async function T(){const _=d.value;if(!!_)try{const A=await ya(wr(Qt,`notebooks/${_.id}/notes`));for(const V of A.docs)await _a(Er(Qt,`notebooks/${_.id}/notes/${V.id}`));await _a(Er(Qt,`notebooks/${_.id}`)),i("refresh"),c.value=!1,d.value=null}catch(A){console.error("Error",A)}}return(_,A)=>(Mt(),zn(yo,null,[Ee("div",qw,[A[6]||(A[6]=Ee("div",{class:"logo-container"},[Ee("img",{src:"logo.png"})],-1)),A[7]||(A[7]=Ee("div",null,null,-1)),fe(Ir,{class:"notebook-input",modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=V=>r.value=V),outlined:"","bg-color":"white",label:"Notebooks:"},null,8,["modelValue"]),Ee("div",$w,[fe(Le,{class:"add-btn",round:"",label:"+",color:"yellow","text-color":"black",onClick:A[1]||(A[1]=V=>a.value=!0)})])]),Ee("div",null,[fe(Ar,{modelValue:a.value,"onUpdate:modelValue":A[3]||(A[3]=V=>a.value=V)},{default:Pe(()=>[fe(cr,{class:"dialog-card"},{default:Pe(()=>[fe(ur,null,{default:Pe(()=>[A[8]||(A[8]=Ee("div",null,"Create notebook",-1)),fe(Ir,{modelValue:l.value,"onUpdate:modelValue":A[2]||(A[2]=V=>l.value=V),label:"Notebook:"},null,8,["modelValue"])]),_:1,__:[8]}),fe(Lo,null,{default:Pe(()=>[vo(fe(Le,{label:"Exit"},null,512),[[qo]]),fe(Le,{label:"Create",color:"primary",onClick:f})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),fe(Ar,{modelValue:c.value,"onUpdate:modelValue":A[4]||(A[4]=V=>c.value=V)},{default:Pe(()=>[fe(cr,{class:"dialog-card"},{default:Pe(()=>[fe(ur,null,{default:Pe(()=>A[9]||(A[9]=[Ws("Delete Notebook?")])),_:1,__:[9]}),fe(Lo,null,{default:Pe(()=>[vo(fe(Le,{label:"Exit"},null,512),[[qo]]),fe(Le,{label:"Delete",color:"primary",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"]),A[12]||(A[12]=Ee("div",{class:"spacer"},null,-1)),(Mt(!0),zn(yo,null,Jc(s.value,V=>(Mt(),zn("div",{key:V.id,class:"row items-center q-my-xs card-class"},[fe(Le,{class:"col notebook-btn",label:V.name,style:Zc({backgroundColor:V.id===t.ActiveNotebook?"#f8d02e":"#2b2b2b",color:"white"}),onClick:R=>_.$emit("odabirKnjige",V.id)},null,8,["label","style","onClick"]),fe(Le,{flat:"",dense:"",onClick:eh(R=>g(V),["stop"]),class:"delete-btn"},{default:Pe(()=>A[10]||(A[10]=[Ee("img",{src:Pf,class:"delete-icon"},null,-1)])),_:2,__:[10]},1032,["onClick"])]))),128)),fe(bl,{clickable:"",onClick:A[5]||(A[5]=V=>_.$emit("odabirKnjige",null))},{default:Pe(()=>[Ee("div",Uw,[fe(Bo,null,{default:Pe(()=>A[11]||(A[11]=[Ws("Clear")])),_:1,__:[11]})])]),_:1})],64))}};var jw=Ke({name:"QField",inheritAttrs:!1,props:{...gs,tag:{type:String,default:"label"}},emits:fl,setup(){return gl(ml({tagProp:!0}))}});const Hw={xs:8,sm:10,md:14,lg:20,xl:24};var Kw=Ke({name:"QChip",props:{...Di,...bm,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(t,{slots:e,emit:n}){const{proxy:{$q:i}}=Ne(),r=Ni(t,i),s=Im(t,Hw),a=O(()=>t.selected===!0||t.icon!==void 0),l=O(()=>t.selected===!0?t.iconSelected||i.iconSet.chip.selected:t.icon),c=O(()=>t.iconRemove||i.iconSet.chip.remove),d=O(()=>t.disable===!1&&(t.clickable===!0||t.selected!==null)),f=O(()=>{const R=t.outline===!0&&t.color||t.textColor;return"q-chip row inline no-wrap items-center"+(t.outline===!1&&t.color!==void 0?` bg-${t.color}`:"")+(R?` text-${R} q-chip--colored`:"")+(t.disable===!0?" disabled":"")+(t.dense===!0?" q-chip--dense":"")+(t.outline===!0?" q-chip--outline":"")+(t.selected===!0?" q-chip--selected":"")+(d.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(t.square===!0?" q-chip--square":"")+(r.value===!0?" q-chip--dark q-dark":"")}),g=O(()=>{const R=t.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0},L={...R,role:"button","aria-hidden":"false","aria-label":t.removeAriaLabel||i.lang.label.remove};return{chip:R,remove:L}});function T(R){R.keyCode===13&&_(R)}function _(R){t.disable||(n("update:selected",!t.selected),n("click",R))}function A(R){(R.keyCode===void 0||R.keyCode===13)&&(gt(R),t.disable===!1&&(n("update:modelValue",!1),n("remove")))}function V(){const R=[];d.value===!0&&R.push(q("div",{class:"q-focus-helper"})),a.value===!0&&R.push(q(cn,{class:"q-chip__icon q-chip__icon--left",name:l.value}));const L=t.label!==void 0?[q("div",{class:"ellipsis"},[t.label])]:void 0;return R.push(q("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Sm(e.default,L))),t.iconRight&&R.push(q(cn,{class:"q-chip__icon q-chip__icon--right",name:t.iconRight})),t.removable===!0&&R.push(q(cn,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:c.value,...g.value.remove,onClick:A,onKeyup:A})),R}return()=>{if(t.modelValue===!1)return;const R={class:f.value,style:s.value};return d.value===!0&&Object.assign(R,g.value.chip,{onClick:_,onKeyup:T}),Am("div",R,V(),"ripple",t.ripple!==!1&&t.disable!==!0,()=>[[Cm,t.ripple]])}}}),Ww=Ke({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(t,{slots:e}){const n=O(()=>parseInt(t.lines,10)),i=O(()=>"q-item__label"+(t.overline===!0?" q-item__label--overline text-overline":"")+(t.caption===!0?" q-item__label--caption text-caption":"")+(t.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),r=O(()=>t.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>q("div",{style:r.value,class:i.value},at(e.default))}});function ba(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),Rm.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Vf={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},Qw={...Vf,contextMenu:Boolean};function xf({showing:t,avoidEmit:e,configureAnchorEl:n}){const{props:i,proxy:r,emit:s}=Ne(),a=Y(null);let l=null;function c(_){return a.value===null?!1:_===void 0||_.touches===void 0||_.touches.length<=1}const d={};n===void 0&&(Object.assign(d,{hide(_){r.hide(_)},toggle(_){r.toggle(_),_.qAnchorHandled=!0},toggleKey(_){Sr(_,13)===!0&&d.toggle(_)},contextClick(_){r.hide(_),_t(_),$e(()=>{r.show(_),_.qAnchorHandled=!0})},prevent:_t,mobileTouch(_){if(d.mobileCleanup(_),c(_)!==!0)return;r.hide(_),a.value.classList.add("non-selectable");const A=_.target;_o(d,"anchor",[[A,"touchmove","mobileCleanup","passive"],[A,"touchend","mobileCleanup","passive"],[A,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),l=setTimeout(()=>{l=null,r.show(_),_.qAnchorHandled=!0},300)},mobileCleanup(_){a.value.classList.remove("non-selectable"),l!==null&&(clearTimeout(l),l=null),t.value===!0&&_!==void 0&&ba()}}),n=function(_=i.contextMenu){if(i.noParentEvent===!0||a.value===null)return;let A;_===!0?r.$q.platform.is.mobile===!0?A=[[a.value,"touchstart","mobileTouch","passive"]]:A=[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:A=[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],_o(d,"anchor",A)});function f(){Qs(d,"anchor")}function g(_){for(a.value=_;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;n()}function T(){if(i.target===!1||i.target===""||r.$el.parentNode===null)a.value=null;else if(i.target===!0)g(r.$el.parentNode);else{let _=i.target;if(typeof i.target=="string")try{_=document.querySelector(i.target)}catch{_=void 0}_!=null?(a.value=_.$el||_,n()):(a.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return me(()=>i.contextMenu,_=>{a.value!==null&&(f(),n(_))}),me(()=>i.target,()=>{a.value!==null&&f(),T()}),me(()=>i.noParentEvent,_=>{a.value!==null&&(_===!0?f():n())}),Ut(()=>{T(),e!==!0&&i.modelValue===!0&&a.value===null&&s("update:modelValue",!1)}),Ze(()=>{l!==null&&clearTimeout(l),f()}),{anchorEl:a,canShow:c,anchorEvents:d}}function Df(t,e){const n=Y(null);let i;function r(l,c){const d=`${c!==void 0?"add":"remove"}EventListener`,f=c!==void 0?c:i;l!==window&&l[d]("scroll",f,Vt.passive),window[d]("scroll",f,Vt.passive),i=c}function s(){n.value!==null&&(r(n.value),n.value=null)}const a=me(()=>t.noParentEvent,()=>{n.value!==null&&(s(),e())});return Ze(a),{localScrollTarget:n,unconfigureScrollTarget:s,changeScrollEvent:r}}const{notPassiveCapture:$o}=Vt,Kn=[];function Uo(t){const e=t.target;if(e===void 0||e.nodeType===8||e.classList.contains("no-pointer-events")===!0)return;let n=_i.length-1;for(;n>=0;){const i=_i[n].$;if(i.type.name==="QTooltip"){n--;continue}if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=Kn.length-1;i>=0;i--){const r=Kn[i];if((r.anchorEl.value===null||r.anchorEl.value.contains(e)===!1)&&(e===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(e)===!1))t.qClickOutside=!0,r.onClickOutside(t);else return}}function Nf(t){Kn.push(t),Kn.length===1&&(document.addEventListener("mousedown",Uo,$o),document.addEventListener("touchstart",Uo,$o))}function zo(t){const e=Kn.findIndex(n=>n===t);e!==-1&&(Kn.splice(e,1),Kn.length===0&&(document.removeEventListener("mousedown",Uo,$o),document.removeEventListener("touchstart",Uo,$o)))}let Fc,Bc;function jo(t){const e=t.split(" ");return e.length!==2?!1:["top","center","bottom"].includes(e[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(e[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Mf(t){return t?!(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"):!0}const Ia={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(t=>{Ia[`${t}#ltr`]=t,Ia[`${t}#rtl`]=t});function Ho(t,e){const n=t.split(" ");return{vertical:n[0],horizontal:Ia[`${n[1]}#${e===!0?"rtl":"ltr"}`]}}function Gw(t,e){let{top:n,left:i,right:r,bottom:s,width:a,height:l}=t.getBoundingClientRect();return e!==void 0&&(n-=e[1],i-=e[0],s+=e[1],r+=e[0],a+=e[0],l+=e[1]),{top:n,bottom:s,height:l,left:i,right:r,width:a,middle:i+(r-i)/2,center:n+(s-n)/2}}function Xw(t,e,n){let{top:i,left:r}=t.getBoundingClientRect();return i+=e.top,r+=e.left,n!==void 0&&(i+=n[1],r+=n[0]),{top:i,bottom:i+1,height:1,left:r,right:r+1,width:1,middle:r,center:i}}function Yw(t,e){return{top:0,center:e/2,bottom:e,left:0,middle:t/2,right:t}}function qc(t,e,n,i){return{top:t[n.vertical]-e[i.vertical],left:t[n.horizontal]-e[i.horizontal]}}function Il(t,e=0){if(t.targetEl===null||t.anchorEl===null||e>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0){setTimeout(()=>{Il(t,e+1)},10);return}const{targetEl:n,offset:i,anchorEl:r,anchorOrigin:s,selfOrigin:a,absoluteOffset:l,fit:c,cover:d,maxHeight:f,maxWidth:g}=t;if(Nt.is.ios===!0&&window.visualViewport!==void 0){const G=document.body.style,{offsetLeft:I,offsetTop:y}=window.visualViewport;I!==Fc&&(G.setProperty("--q-pe-left",I+"px"),Fc=I),y!==Bc&&(G.setProperty("--q-pe-top",y+"px"),Bc=y)}const{scrollLeft:T,scrollTop:_}=n,A=l===void 0?Gw(r,d===!0?[0,0]:i):Xw(r,l,i);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:g,maxHeight:f,visibility:"visible"});const{offsetWidth:V,offsetHeight:R}=n,{elWidth:L,elHeight:M}=c===!0||d===!0?{elWidth:Math.max(A.width,V),elHeight:d===!0?Math.max(A.height,R):R}:{elWidth:V,elHeight:R};let F={maxWidth:g,maxHeight:f};(c===!0||d===!0)&&(F.minWidth=A.width+"px",d===!0&&(F.minHeight=A.height+"px")),Object.assign(n.style,F);const U=Yw(L,M);let H=qc(A,U,s,a);if(l===void 0||i===void 0)Us(H,A,U,s,a);else{const{top:G,left:I}=H;Us(H,A,U,s,a);let y=!1;if(H.top!==G){y=!0;const p=2*i[1];A.center=A.top-=p,A.bottom-=p+2}if(H.left!==I){y=!0;const p=2*i[0];A.middle=A.left-=p,A.right-=p+2}y===!0&&(H=qc(A,U,s,a),Us(H,A,U,s,a))}F={top:H.top+"px",left:H.left+"px"},H.maxHeight!==void 0&&(F.maxHeight=H.maxHeight+"px",A.height>H.maxHeight&&(F.minHeight=F.maxHeight)),H.maxWidth!==void 0&&(F.maxWidth=H.maxWidth+"px",A.width>H.maxWidth&&(F.minWidth=F.maxWidth)),Object.assign(n.style,F),n.scrollTop!==_&&(n.scrollTop=_),n.scrollLeft!==T&&(n.scrollLeft=T)}function Us(t,e,n,i,r){const s=n.bottom,a=n.right,l=Fm(),c=window.innerHeight-l,d=document.body.clientWidth;if(t.top<0||t.top+s>c)if(r.vertical==="center")t.top=e[i.vertical]>c/2?Math.max(0,c-s):0,t.maxHeight=Math.min(s,c);else if(e[i.vertical]>c/2){const f=Math.min(c,i.vertical==="center"?e.center:i.vertical===r.vertical?e.bottom:e.top);t.maxHeight=Math.min(s,f),t.top=Math.max(0,f-s)}else t.top=Math.max(0,i.vertical==="center"?e.center:i.vertical===r.vertical?e.top:e.bottom),t.maxHeight=Math.min(s,c-t.top);if(t.left<0||t.left+a>d)if(t.maxWidth=Math.min(a,d),r.horizontal==="middle")t.left=e[i.horizontal]>d/2?Math.max(0,d-a):0;else if(e[i.horizontal]>d/2){const f=Math.min(d,i.horizontal==="middle"?e.middle:i.horizontal===r.horizontal?e.right:e.left);t.maxWidth=Math.min(a,f),t.left=Math.max(0,f-t.maxWidth)}else t.left=Math.max(0,i.horizontal==="middle"?e.middle:i.horizontal===r.horizontal?e.left:e.right),t.maxWidth=Math.min(a,d-t.left)}var Of=Ke({name:"QMenu",inheritAttrs:!1,props:{...Qw,...yl,...Di,...yi,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:jo},self:{type:String,validator:jo},offset:{type:Array,validator:Mf},scrollTarget:rh,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[..._l,"click","escapeKey"],setup(t,{slots:e,emit:n,attrs:i}){let r=null,s,a,l;const c=Ne(),{proxy:d}=c,{$q:f}=d,g=Y(null),T=Y(!1),_=O(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),A=Ni(t,f),{registerTick:V,removeTick:R}=vl(),{registerTimeout:L}=pl(),{transitionProps:M,transitionStyle:F}=El(t),{localScrollTarget:U,changeScrollEvent:H,unconfigureScrollTarget:G}=Df(t,$),{anchorEl:I,canShow:y}=xf({showing:T}),{hide:p}=wl({showing:T,canShow:y,handleShow:re,handleHide:D,hideOnRouteChange:_,processOnMount:!0}),{showPortal:v,hidePortal:b,renderPortal:E}=Tl(c,g,ne,"menu"),w={anchorEl:I,innerRef:g,onClickOutside(j){if(t.persistent!==!0&&T.value===!0)return p(j),(j.type==="touchstart"||j.target.classList.contains("q-dialog__backdrop"))&&gt(j),!0}},te=O(()=>Ho(t.anchor||(t.cover===!0?"center middle":"bottom start"),f.lang.rtl)),ce=O(()=>t.cover===!0?te.value:Ho(t.self||"top start",f.lang.rtl)),ee=O(()=>(t.square===!0?" q-menu--square":"")+(A.value===!0?" q-menu--dark q-dark":"")),oe=O(()=>t.autoClose===!0?{onClick:le}:{}),K=O(()=>T.value===!0&&t.persistent!==!0);me(K,j=>{j===!0?(Cf(C),Nf(w)):(Fo(C),zo(w))});function Z(){Dr(()=>{let j=g.value;j&&j.contains(document.activeElement)!==!0&&(j=j.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||j.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||j.querySelector("[autofocus], [data-autofocus]")||j,j.focus({preventScroll:!0}))})}function re(j){if(r=t.noRefocus===!1?document.activeElement:null,kf(se),v(),$(),s=void 0,j!==void 0&&(t.touchPosition||t.contextMenu)){const ye=km(j);if(ye.left!==void 0){const{top:Me,left:St}=I.value.getBoundingClientRect();s={left:ye.left-St,top:ye.top-Me}}}a===void 0&&(a=me(()=>f.screen.width+"|"+f.screen.height+"|"+t.self+"|"+t.anchor+"|"+f.lang.rtl,x)),t.noFocus!==!0&&document.activeElement.blur(),V(()=>{x(),t.noFocus!==!0&&Z()}),L(()=>{f.platform.is.ios===!0&&(l=t.autoClose,g.value.click()),x(),v(!0),n("show",j)},t.transitionDuration)}function D(j){R(),b(),k(!0),r!==null&&(j===void 0||j.qClickOutside!==!0)&&((((j==null?void 0:j.type.indexOf("key"))===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),L(()=>{b(!0),n("hide",j)},t.transitionDuration)}function k(j){s=void 0,a!==void 0&&(a(),a=void 0),(j===!0||T.value===!0)&&(Ta(se),G(),zo(w),Fo(C)),j!==!0&&(r=null)}function $(){(I.value!==null||t.scrollTarget!==void 0)&&(U.value=oh(I.value,t.scrollTarget),H(U.value,x))}function le(j){l!==!0?(Af(d,j),n("click",j)):l=!1}function se(j){K.value===!0&&t.noFocus!==!0&&Yc(g.value,j.target)!==!0&&Z()}function C(j){t.noEscDismiss!==!0&&(n("escapeKey"),p(j))}function x(){Il({targetEl:g.value,offset:t.offset,anchorEl:I.value,anchorOrigin:te.value,selfOrigin:ce.value,absoluteOffset:s,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function ne(){return q(hr,M.value,()=>T.value===!0?q("div",{role:"menu",...i,ref:g,tabindex:-1,class:["q-menu q-position-engine scroll"+ee.value,i.class],style:[i.style,F.value],...oe.value},at(e.default)):null)}return Ze(k),Object.assign(d,{focus:Z,updatePosition:x}),E}});let Ko=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(e),t.scrollLeft=-1e3,Ko=t.scrollLeft>=0,t.remove()}const It=1e3,Jw=["start","center","end","start-force","center-force","end-force"],Lf=Array.prototype.filter,Zw=window.getComputedStyle(document.body).overflowAnchor===void 0?th:function(t,e){t!==null&&(t._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(t._qOverflowAnimationFrame),t._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(t===null)return;t._qOverflowAnimationFrame=void 0;const n=t.children||[];Lf.call(n,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const i=n[e];i!=null&&i.dataset&&(i.dataset.qVsAnchor="")}))};function wi(t,e){return t+e}function zs(t,e,n,i,r,s,a,l){const c=t===window?document.scrollingElement||document.documentElement:t,d=r===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-a-l,scrollMaxSize:0,offsetStart:-a,offsetEnd:-l};if(r===!0?(t===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=c.scrollLeft,f.scrollViewSize+=c.clientWidth),f.scrollMaxSize=c.scrollWidth,s===!0&&(f.scrollStart=(Ko===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(t===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=c.scrollTop,f.scrollViewSize+=c.clientHeight),f.scrollMaxSize=c.scrollHeight),n!==null)for(let g=n.previousElementSibling;g!==null;g=g.previousElementSibling)g.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=g[d]);if(i!==null)for(let g=i.nextElementSibling;g!==null;g=g.nextElementSibling)g.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=g[d]);if(e!==t){const g=c.getBoundingClientRect(),T=e.getBoundingClientRect();r===!0?(f.offsetStart+=T.left-g.left,f.offsetEnd-=T.width):(f.offsetStart+=T.top-g.top,f.offsetEnd-=T.height),t!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function $c(t,e,n,i){e==="end"&&(e=(t===window?document.body:t)[n===!0?"scrollWidth":"scrollHeight"]),t===window?n===!0?(i===!0&&(e=(Ko===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):n===!0?(i===!0&&(e=(Ko===!0?t.scrollWidth-t.offsetWidth:0)-e),t.scrollLeft=e):t.scrollTop=e}function Xi(t,e,n,i){if(n>=i)return 0;const r=e.length,s=Math.floor(n/It),a=Math.floor((i-1)/It)+1;let l=t.slice(s,a).reduce(wi,0);return n%It!==0&&(l-=e.slice(s*It,n).reduce(wi,0)),i%It!==0&&i!==r&&(l-=e.slice(i,a*It).reduce(wi,0)),l}const eE={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Uc={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...eE};function tE({virtualScrollLength:t,getVirtualScrollTarget:e,getVirtualScrollEl:n,virtualScrollItemSizeComputed:i}){const r=Ne(),{props:s,emit:a,proxy:l}=r,{$q:c}=l;let d,f,g,T=[],_;const A=Y(0),V=Y(0),R=Y({}),L=Y(null),M=Y(null),F=Y(null),U=Y({from:0,to:0}),H=O(()=>s.tableColspan!==void 0?s.tableColspan:100);i===void 0&&(i=O(()=>s.virtualScrollItemSize));const G=O(()=>i.value+";"+s.virtualScrollHorizontal),I=O(()=>G.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);me(I,()=>{ee()}),me(G,y);function y(){ce(f,!0)}function p(D){ce(D===void 0?f:D)}function v(D,k){const $=e();if($==null||$.nodeType===8)return;const le=zs($,n(),L.value,M.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);g!==le.scrollViewSize&&ee(le.scrollViewSize),E($,le,Math.min(t.value-1,Math.max(0,parseInt(D,10)||0)),0,Jw.indexOf(k)!==-1?k:f!==-1&&D>f?"end":"start")}function b(){const D=e();if(D==null||D.nodeType===8)return;const k=zs(D,n(),L.value,M.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),$=t.value-1,le=k.scrollMaxSize-k.offsetStart-k.offsetEnd-V.value;if(d===k.scrollStart)return;if(k.scrollMaxSize<=0){E(D,k,0,0);return}g!==k.scrollViewSize&&ee(k.scrollViewSize),w(U.value.from);const se=Math.floor(k.scrollMaxSize-Math.max(k.scrollViewSize,k.offsetEnd)-Math.min(_[$],k.scrollViewSize/2));if(se>0&&Math.ceil(k.scrollStart)>=se){E(D,k,$,k.scrollMaxSize-k.offsetEnd-T.reduce(wi,0));return}let C=0,x=k.scrollStart-k.offsetStart,ne=x;if(x<=le&&x+k.scrollViewSize>=A.value)x-=A.value,C=U.value.from,ne=x;else for(let j=0;x>=T[j]&&C<$;j++)x-=T[j],C+=It;for(;x>0&&C<$;)x-=_[C],x>-k.scrollViewSize?(C++,ne=x):ne=_[C]+x;E(D,k,C,ne)}function E(D,k,$,le,se){const C=typeof se=="string"&&se.indexOf("-force")!==-1,x=C===!0?se.replace("-force",""):se,ne=x!==void 0?x:"start";let j=Math.max(0,$-R.value[ne]),ye=j+R.value.total;ye>t.value&&(ye=t.value,j=Math.max(0,ye-R.value.total)),d=k.scrollStart;const Me=j!==U.value.from||ye!==U.value.to;if(Me===!1&&x===void 0){K($);return}const{activeElement:St}=document,lt=F.value;Me===!0&&lt!==null&&lt!==St&&lt.contains(St)===!0&&(lt.addEventListener("focusout",te),setTimeout(()=>{lt==null||lt.removeEventListener("focusout",te)})),Zw(lt,$-j);const Zt=x!==void 0?_.slice(j,$).reduce(wi,0):0;if(Me===!0){const Et=ye>=U.value.from&&j<=U.value.to?U.value.to:ye;U.value={from:j,to:Et},A.value=Xi(T,_,0,j),V.value=Xi(T,_,ye,t.value),requestAnimationFrame(()=>{U.value.to!==ye&&d===k.scrollStart&&(U.value={from:U.value.from,to:ye},V.value=Xi(T,_,ye,t.value))})}requestAnimationFrame(()=>{if(d!==k.scrollStart)return;Me===!0&&w(j);const Et=_.slice(j,$).reduce(wi,0),Ct=Et+k.offsetStart+A.value,Sn=Ct+_[$];let Cn=Ct+le;if(x!==void 0){const ei=Et-Zt,en=k.scrollStart+ei;Cn=C!==!0&&en<Ct&&Sn<en+k.scrollViewSize?en:x==="end"?Sn-k.scrollViewSize:Ct-(x==="start"?0:Math.round((k.scrollViewSize-_[$])/2))}d=Cn,$c(D,Cn,s.virtualScrollHorizontal,c.lang.rtl),K($)})}function w(D){const k=F.value;if(k){const $=Lf.call(k.children,j=>j.classList&&j.classList.contains("q-virtual-scroll--skip")===!1),le=$.length,se=s.virtualScrollHorizontal===!0?j=>j.getBoundingClientRect().width:j=>j.offsetHeight;let C=D,x,ne;for(let j=0;j<le;){for(x=se($[j]),j++;j<le&&$[j].classList.contains("q-virtual-scroll--with-prev")===!0;)x+=se($[j]),j++;ne=x-_[C],ne!==0&&(_[C]+=ne,T[Math.floor(C/It)]+=ne),C++}}}function te(){var D;(D=F.value)==null||D.focus()}function ce(D,k){const $=1*i.value;(k===!0||Array.isArray(_)===!1)&&(_=[]);const le=_.length;_.length=t.value;for(let C=t.value-1;C>=le;C--)_[C]=$;const se=Math.floor((t.value-1)/It);T=[];for(let C=0;C<=se;C++){let x=0;const ne=Math.min((C+1)*It,t.value);for(let j=C*It;j<ne;j++)x+=_[j];T.push(x)}f=-1,d=void 0,A.value=Xi(T,_,0,U.value.from),V.value=Xi(T,_,U.value.to,t.value),D>=0?(w(U.value.from),$e(()=>{v(D)})):Z()}function ee(D){if(D===void 0&&typeof window!="undefined"){const x=e();x!=null&&x.nodeType!==8&&(D=zs(x,n(),L.value,M.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}g=D;const k=parseFloat(s.virtualScrollSliceRatioBefore)||0,$=parseFloat(s.virtualScrollSliceRatioAfter)||0,le=1+k+$,se=D===void 0||D<=0?1:Math.ceil(D/i.value),C=Math.max(1,se,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/le));R.value={total:Math.ceil(C*le),start:Math.ceil(C*k),center:Math.ceil(C*(.5+k)),end:Math.ceil(C*(1+k)),view:se}}function oe(D,k){const $=s.virtualScrollHorizontal===!0?"width":"height",le={["--q-virtual-scroll-item-"+$]:i.value+"px"};return[D==="tbody"?q(D,{class:"q-virtual-scroll__padding",key:"before",ref:L},[q("tr",[q("td",{style:{[$]:`${A.value}px`,...le},colspan:H.value})])]):q(D,{class:"q-virtual-scroll__padding",key:"before",ref:L,style:{[$]:`${A.value}px`,...le}}),q(D,{class:"q-virtual-scroll__content",key:"content",ref:F,tabindex:-1},k.flat()),D==="tbody"?q(D,{class:"q-virtual-scroll__padding",key:"after",ref:M},[q("tr",[q("td",{style:{[$]:`${V.value}px`,...le},colspan:H.value})])]):q(D,{class:"q-virtual-scroll__padding",key:"after",ref:M,style:{[$]:`${V.value}px`,...le}})]}function K(D){f!==D&&(s.onVirtualScroll!==void 0&&a("virtualScroll",{index:D,from:U.value.from,to:U.value.to-1,direction:D<f?"decrease":"increase",ref:l}),f=D)}ee();const Z=Wc(b,c.platform.is.ios===!0?120:35);nh(()=>{ee()});let re=!1;return Wo(()=>{re=!0}),Qc(()=>{if(re!==!0)return;const D=e();d!==void 0&&D!==void 0&&D!==null&&D.nodeType!==8?$c(D,d,s.virtualScrollHorizontal,c.lang.rtl):v(f)}),Ze(()=>{Z.cancel()}),Object.assign(l,{scrollTo:v,reset:y,refresh:p}),{virtualScrollSliceRange:U,virtualScrollSliceSizeComputed:R,setVirtualScrollSize:ee,onVirtualScrollEvt:Z,localResetVirtualScroll:ce,padVirtualScroll:oe,scrollTo:v,reset:y,refresh:p}}function zc(t,e,n){if(n<=e)return e;const i=n-e+1;let r=e+(t-e)%i;return r<e&&(r=i+r),r===0?0:r}const jc=t=>["add","add-unique","toggle"].includes(t),nE=".*+?^${}()|[]\\",iE=Object.keys(gs);function js(t,e){if(typeof t=="function")return t;const n=t!==void 0?t:e;return i=>i!==null&&typeof i=="object"&&n in i?i[n]:i}var rE=Ke({name:"QSelect",inheritAttrs:!1,props:{...Uc,...Tf,...gs,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:jc},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:Uc.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...fl,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(t,{slots:e,emit:n}){const{proxy:i}=Ne(),{$q:r}=i,s=Y(!1),a=Y(!1),l=Y(-1),c=Y(""),d=Y(!1),f=Y(!1);let g=null,T=null,_,A,V,R=null,L,M,F,U;const H=Y(null),G=Y(null),I=Y(null),y=Y(null),p=Y(null),v=bf(t),b=If(kt),E=O(()=>Array.isArray(t.options)?t.options.length:0),w=O(()=>t.virtualScrollItemSize===void 0?t.optionsDense===!0?24:48:t.virtualScrollItemSize),{virtualScrollSliceRange:te,virtualScrollSliceSizeComputed:ce,localResetVirtualScroll:ee,padVirtualScroll:oe,onVirtualScrollEvt:K,scrollTo:Z,setVirtualScrollSize:re}=tE({virtualScrollLength:E,getVirtualScrollTarget:Or,getVirtualScrollEl:Li,virtualScrollItemSizeComputed:w}),D=ml(),k=O(()=>{const S=t.mapOptions===!0&&t.multiple!==!0,Q=t.modelValue!==void 0&&(t.modelValue!==null||S===!0)?t.multiple===!0&&Array.isArray(t.modelValue)?t.modelValue:[t.modelValue]:[];if(t.mapOptions===!0&&Array.isArray(t.options)===!0){const X=t.mapOptions===!0&&_!==void 0?_:[],ge=Q.map(be=>kn(be,X));return t.modelValue===null&&S===!0?ge.filter(be=>be!==null):ge}return Q}),$=O(()=>{const S={};return iE.forEach(Q=>{const X=t[Q];X!==void 0&&(S[Q]=X)}),S}),le=O(()=>t.optionsDark===null?D.isDark.value:t.optionsDark),se=O(()=>br(k.value)),C=O(()=>{let S="q-field__input q-placeholder col";return t.hideSelected===!0||k.value.length===0?[S,t.inputClass]:(S+=" q-field__input--padding",t.inputClass===void 0?S:[S,t.inputClass])}),x=O(()=>(t.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(t.popupContentClass?" "+t.popupContentClass:"")),ne=O(()=>E.value===0),j=O(()=>k.value.map(S=>tt.value(S)).join(", ")),ye=O(()=>t.displayValue!==void 0?t.displayValue:j.value),Me=O(()=>t.optionsHtml===!0?()=>!0:S=>(S==null?void 0:S.html)===!0),St=O(()=>t.displayValueHtml===!0||t.displayValue===void 0&&(t.optionsHtml===!0||k.value.some(Me.value))),lt=O(()=>D.focused.value===!0?t.tabindex:-1),Zt=O(()=>{const S={tabindex:t.tabindex,role:"combobox","aria-label":t.label,"aria-readonly":t.readonly===!0?"true":"false","aria-autocomplete":t.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-controls":`${D.targetUid.value}_lb`};return l.value>=0&&(S["aria-activedescendant"]=`${D.targetUid.value}_${l.value}`),S}),Et=O(()=>({id:`${D.targetUid.value}_lb`,role:"listbox","aria-multiselectable":t.multiple===!0?"true":"false"})),Ct=O(()=>k.value.map((S,Q)=>({index:Q,opt:S,html:Me.value(S),selected:!0,removeAtIndex:We,toggleOption:Rt,tabindex:lt.value}))),Sn=O(()=>{if(E.value===0)return[];const{from:S,to:Q}=te.value;return t.options.slice(S,Q).map((X,ge)=>{const be=tn.value(X)===!0,ke=ii(X)===!0,Ie=S+ge,Se={clickable:!0,active:ke,activeClass:en.value,manualFocus:!0,focused:!1,disable:be,tabindex:-1,dense:t.optionsDense,dark:le.value,role:"option","aria-selected":ke===!0?"true":"false",id:`${D.targetUid.value}_${Ie}`,onClick:()=>{Rt(X)}};return be!==!0&&(l.value===Ie&&(Se.focused=!0),r.platform.is.desktop===!0&&(Se.onMousemove=()=>{s.value===!0&&zt(Ie)})),{index:Ie,opt:X,html:Me.value(X),label:tt.value(X),selected:Se.active,focused:Se.focused,toggleOption:Rt,setOptionIndex:zt,itemProps:Se}})}),Cn=O(()=>t.dropdownIcon!==void 0?t.dropdownIcon:r.iconSet.arrow.dropdown),ei=O(()=>t.optionsCover===!1&&t.outlined!==!0&&t.standout!==!0&&t.borderless!==!0&&t.rounded!==!0),en=O(()=>t.optionsSelectedClass!==void 0?t.optionsSelectedClass:t.color!==void 0?`text-${t.color}`:""),ut=O(()=>js(t.optionValue,"value")),tt=O(()=>js(t.optionLabel,"label")),tn=O(()=>js(t.optionDisable,"disable")),nn=O(()=>k.value.map(ut.value)),Mi=O(()=>{const S={onInput:kt,onChange:b,onKeydown:oi,onKeyup:Nr,onKeypress:Mr,onFocus:Oi,onClick(Q){A===!0&&Dt(Q)}};return S.onCompositionstart=S.onCompositionupdate=S.onCompositionend=b,S});me(k,S=>{_=S,t.useInput===!0&&t.fillInput===!0&&t.multiple!==!0&&D.innerLoading.value!==!0&&(a.value!==!0&&s.value!==!0||se.value!==!0)&&(V!==!0&&Ht(),(a.value===!0||s.value===!0)&&jt(""))},{immediate:!0}),me(()=>t.fillInput,Ht),me(s,Mn),me(E,ai);function ti(S){return t.emitValue===!0?ut.value(S):S}function Fe(S){if(S!==-1&&S<k.value.length)if(t.multiple===!0){const Q=t.modelValue.slice();n("remove",{index:S,value:Q.splice(S,1)[0]}),n("update:modelValue",Q)}else n("update:modelValue",null)}function We(S){Fe(S),D.focus()}function Rn(S,Q){const X=ti(S);if(t.multiple!==!0){t.fillInput===!0&&Pt(tt.value(S),!0,!0),n("update:modelValue",X);return}if(k.value.length===0){n("add",{index:0,value:X}),n("update:modelValue",t.multiple===!0?[X]:X);return}if(Q===!0&&ii(S)===!0||t.maxValues!==void 0&&t.modelValue.length>=t.maxValues)return;const ge=t.modelValue.slice();n("add",{index:ge.length,value:X}),ge.push(X),n("update:modelValue",ge)}function Rt(S,Q){var ke;if(D.editable.value!==!0||S===void 0||tn.value(S)===!0)return;const X=ut.value(S);if(t.multiple!==!0){Q!==!0&&(Pt(t.fillInput===!0?tt.value(S):"",!0,!0),yt()),(ke=G.value)==null||ke.focus(),(k.value.length===0||Qi(ut.value(k.value[0]),X)!==!0)&&n("update:modelValue",t.emitValue===!0?X:S);return}if((A!==!0||d.value===!0)&&D.focus(),Oi(),k.value.length===0){const Ie=t.emitValue===!0?X:S;n("add",{index:0,value:Ie}),n("update:modelValue",t.multiple===!0?[Ie]:Ie);return}const ge=t.modelValue.slice(),be=nn.value.findIndex(Ie=>Qi(Ie,X));if(be!==-1)n("remove",{index:be,value:ge.splice(be,1)[0]});else{if(t.maxValues!==void 0&&ge.length>=t.maxValues)return;const Ie=t.emitValue===!0?X:S;n("add",{index:ge.length,value:Ie}),ge.push(Ie)}n("update:modelValue",ge)}function zt(S){if(r.platform.is.desktop!==!0)return;const Q=S!==-1&&S<E.value?S:-1;l.value!==Q&&(l.value=Q)}function ni(S=1,Q){if(s.value===!0){let X=l.value;do X=zc(X+S,-1,E.value-1);while(X!==-1&&X!==l.value&&tn.value(t.options[X])===!0);l.value!==X&&(zt(X),Z(X),Q!==!0&&t.useInput===!0&&t.fillInput===!0&&Vn(X>=0?tt.value(t.options[X]):L,!0))}}function kn(S,Q){const X=ge=>Qi(ut.value(ge),S);return t.options.find(X)||Q.find(X)||S}function ii(S){const Q=ut.value(S);return nn.value.find(X=>Qi(X,Q))!==void 0}function Oi(S){t.useInput===!0&&G.value!==null&&(S===void 0||G.value===S.target&&S.target.value===j.value)&&G.value.select()}function ri(S){Sr(S,27)===!0&&s.value===!0&&(Dt(S),yt(),Ht()),n("keyup",S)}function Nr(S){const{value:Q}=S.target;if(S.keyCode!==void 0){ri(S);return}if(S.target.value="",g!==null&&(clearTimeout(g),g=null),T!==null&&(clearTimeout(T),T=null),Ht(),typeof Q=="string"&&Q.length!==0){const X=Q.toLocaleLowerCase(),ge=ke=>{const Ie=t.options.find(Se=>String(ke.value(Se)).toLocaleLowerCase()===X);return Ie===void 0?!1:(k.value.indexOf(Ie)===-1?Rt(Ie):yt(),!0)},be=ke=>{ge(ut)!==!0&&ke!==!0&&ge(tt)!==!0&&jt(Q,!0,()=>be(!0))};be()}else D.clearValue(S)}function Mr(S){n("keypress",S)}function oi(S){if(n("keydown",S),Qo(S)===!0)return;const Q=c.value.length!==0&&(t.newValueMode!==void 0||t.onNewValue!==void 0),X=S.shiftKey!==!0&&t.disableTabSelection!==!0&&t.multiple!==!0&&(l.value!==-1||Q===!0);if(S.keyCode===27){_t(S);return}if(S.keyCode===9&&X===!1){on();return}if(S.target===void 0||S.target.id!==D.targetUid.value||D.editable.value!==!0)return;if(S.keyCode===40&&D.innerLoading.value!==!0&&s.value===!1){gt(S),sn();return}if(S.keyCode===8&&(t.useChips===!0||t.clearable===!0)&&t.hideSelected!==!0&&c.value.length===0){t.multiple===!0&&Array.isArray(t.modelValue)===!0?Fe(t.modelValue.length-1):t.multiple!==!0&&t.modelValue!==null&&n("update:modelValue",null);return}(S.keyCode===35||S.keyCode===36)&&(typeof c.value!="string"||c.value.length===0)&&(gt(S),l.value=-1,ni(S.keyCode===36?1:-1,t.multiple)),(S.keyCode===33||S.keyCode===34)&&ce.value!==void 0&&(gt(S),l.value=Math.max(-1,Math.min(E.value,l.value+(S.keyCode===33?-1:1)*ce.value.view)),ni(S.keyCode===33?1:-1,t.multiple)),(S.keyCode===38||S.keyCode===40)&&(gt(S),ni(S.keyCode===38?-1:1,t.multiple));const ge=E.value;if((F===void 0||U<Date.now())&&(F=""),ge>0&&t.useInput!==!0&&S.key!==void 0&&S.key.length===1&&S.altKey===!1&&S.ctrlKey===!1&&S.metaKey===!1&&(S.keyCode!==32||F.length!==0)){s.value!==!0&&sn(S);const be=S.key.toLocaleLowerCase(),ke=F.length===1&&F[0]===be;U=Date.now()+1500,ke===!1&&(gt(S),F+=be);const Ie=new RegExp("^"+F.split("").map(ct=>nE.indexOf(ct)!==-1?"\\"+ct:ct).join(".*"),"i");let Se=l.value;if(ke===!0||Se<0||Ie.test(tt.value(t.options[Se]))!==!0)do Se=zc(Se+1,-1,ge-1);while(Se!==l.value&&(tn.value(t.options[Se])===!0||Ie.test(tt.value(t.options[Se]))!==!0));l.value!==Se&&$e(()=>{zt(Se),Z(Se),Se>=0&&t.useInput===!0&&t.fillInput===!0&&Vn(tt.value(t.options[Se]),!0)});return}if(!(S.keyCode!==13&&(S.keyCode!==32||t.useInput===!0||F!=="")&&(S.keyCode!==9||X===!1))){if(S.keyCode!==9&&gt(S),l.value!==-1&&l.value<ge){Rt(t.options[l.value]);return}if(Q===!0){const be=(ke,Ie)=>{var ct;if(Ie){if(jc(Ie)!==!0)return}else Ie=t.newValueMode;if(Pt("",t.multiple!==!0,!0),ke==null)return;(Ie==="toggle"?Rt:Rn)(ke,Ie==="add-unique"),t.multiple!==!0&&((ct=G.value)==null||ct.focus(),yt())};if(t.onNewValue!==void 0?n("newValue",c.value,be):be(c.value),t.multiple!==!0)return}s.value===!0?on():D.innerLoading.value!==!0&&sn()}}function Li(){return A===!0?p.value:I.value!==null&&I.value.contentEl!==null?I.value.contentEl:void 0}function Or(){return Li()}function Pn(){return t.hideSelected===!0?[]:e["selected-item"]!==void 0?Ct.value.map(S=>e["selected-item"](S)).slice():e.selected!==void 0?[].concat(e.selected()):t.useChips===!0?Ct.value.map((S,Q)=>q(Kw,{key:"option-"+Q,removable:D.editable.value===!0&&tn.value(S.opt)!==!0,dense:!0,textColor:t.color,tabindex:lt.value,onRemove(){S.removeAtIndex(Q)}},()=>q("span",{class:"ellipsis",[S.html===!0?"innerHTML":"textContent"]:tt.value(S.opt)}))):[q("span",{class:"ellipsis",[St.value===!0?"innerHTML":"textContent"]:ye.value})]}function si(){if(ne.value===!0)return e["no-option"]!==void 0?e["no-option"]({inputValue:c.value}):void 0;const S=e.option!==void 0?e.option:X=>q(bl,{key:X.index,...X.itemProps},()=>q(Bo,()=>q(Ww,()=>q("span",{[X.html===!0?"innerHTML":"textContent"]:X.label}))));let Q=oe("div",Sn.value.map(S));return e["before-options"]!==void 0&&(Q=e["before-options"]().concat(Q)),Vm(e["after-options"],Q)}function Fi(S,Q){const X=Q===!0?{...Zt.value,...D.splitAttrs.attributes.value}:void 0,ge={ref:Q===!0?G:void 0,key:"i_t",class:C.value,style:t.inputStyle,value:c.value!==void 0?c.value:"",type:"search",...X,id:Q===!0?D.targetUid.value:void 0,maxlength:t.maxlength,autocomplete:t.autocomplete,"data-autofocus":S===!0||t.autofocus===!0||void 0,disabled:t.disable===!0,readonly:t.readonly===!0,...Mi.value};return S!==!0&&A===!0&&(Array.isArray(ge.class)===!0?ge.class=[...ge.class,"no-pointer-events"]:ge.class+=" no-pointer-events"),q("input",ge)}function kt(S){g!==null&&(clearTimeout(g),g=null),T!==null&&(clearTimeout(T),T=null),!(S&&S.target&&S.target.qComposing===!0)&&(Vn(S.target.value||""),V=!0,L=c.value,D.focused.value!==!0&&(A!==!0||d.value===!0)&&D.focus(),t.onFilter!==void 0&&(g=setTimeout(()=>{g=null,jt(c.value)},t.inputDebounce)))}function Vn(S,Q){c.value!==S&&(c.value=S,Q===!0||t.inputDebounce===0||t.inputDebounce==="0"?n("inputValue",S):T=setTimeout(()=>{T=null,n("inputValue",S)},t.inputDebounce))}function Pt(S,Q,X){V=X!==!0,t.useInput===!0&&(Vn(S,!0),(Q===!0||X!==!0)&&(L=S),Q!==!0&&jt(S))}function jt(S,Q,X){if(t.onFilter===void 0||Q!==!0&&D.focused.value!==!0)return;D.innerLoading.value===!0?n("filterAbort"):(D.innerLoading.value=!0,f.value=!0),S!==""&&t.multiple!==!0&&k.value.length!==0&&V!==!0&&S===tt.value(k.value[0])&&(S="");const ge=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);R!==null&&clearTimeout(R),R=ge,n("filter",S,(be,ke)=>{(Q===!0||D.focused.value===!0)&&R===ge&&(clearTimeout(R),typeof be=="function"&&be(),f.value=!1,$e(()=>{D.innerLoading.value=!1,D.editable.value===!0&&(Q===!0?s.value===!0&&yt():s.value===!0?Mn(!0):s.value=!0),typeof ke=="function"&&$e(()=>{ke(i)}),typeof X=="function"&&$e(()=>{X(i)})}))},()=>{D.focused.value===!0&&R===ge&&(clearTimeout(R),D.innerLoading.value=!1,f.value=!1),s.value===!0&&(s.value=!1)})}function xn(){return q(Of,{ref:I,class:x.value,style:t.popupContentStyle,modelValue:s.value,fit:t.menuShrink!==!0,cover:t.optionsCover===!0&&ne.value!==!0&&t.useInput!==!0,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,dark:le.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:t.popupNoRouteDismiss,square:ei.value,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,separateClosePopup:!0,...Et.value,onScrollPassive:K,onBeforeShow:Bi,onBeforeHide:Lr,onShow:Qe},si)}function Lr(S){qi(S),on()}function Qe(){re()}function Fr(S){var Q;Dt(S),(Q=G.value)==null||Q.focus(),d.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Dn(S){Dt(S),$e(()=>{d.value=!1})}function Nn(){const S=[q(jw,{class:`col-auto ${D.fieldClass.value}`,...$.value,for:D.targetUid.value,dark:le.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:c.value.length!==0,...D.splitAttrs.listeners.value,onFocus:Fr,onBlur:Dn},{...e,rawControl:()=>D.getControl(!0),before:void 0,after:void 0})];return s.value===!0&&S.push(q("div",{ref:p,class:x.value+" scroll",style:t.popupContentStyle,...Et.value,onClick:_t,onScrollPassive:K},si())),q(Ar,{ref:y,modelValue:a.value,position:t.useInput===!0?"top":void 0,transitionShow:M,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,noRouteDismiss:t.popupNoRouteDismiss,onBeforeShow:Bi,onBeforeHide:ps,onHide:vs,onShow:rn},()=>q("div",{class:"q-select__dialog"+(le.value===!0?" q-select__dialog--dark q-dark":"")+(d.value===!0?" q-select__dialog--focused":"")},S))}function ps(S){qi(S),y.value!==null&&y.value.__updateRefocusTarget(D.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),D.focused.value=!1}function vs(S){yt(),D.focused.value===!1&&n("blur",S),Ht()}function rn(){const S=document.activeElement;(S===null||S.id!==D.targetUid.value)&&G.value!==null&&G.value!==S&&G.value.focus(),re()}function on(){a.value!==!0&&(l.value=-1,s.value===!0&&(s.value=!1),D.focused.value===!1&&(R!==null&&(clearTimeout(R),R=null),D.innerLoading.value===!0&&(n("filterAbort"),D.innerLoading.value=!1,f.value=!1)))}function sn(S){D.editable.value===!0&&(A===!0?(D.onControlFocusin(S),a.value=!0,$e(()=>{D.focus()})):D.focus(),t.onFilter!==void 0?jt(c.value):(ne.value!==!0||e["no-option"]!==void 0)&&(s.value=!0))}function yt(){a.value=!1,on()}function Ht(){t.useInput===!0&&Pt(t.multiple!==!0&&t.fillInput===!0&&k.value.length!==0&&tt.value(k.value[0])||"",!0,!0)}function Mn(S){let Q=-1;if(S===!0){if(k.value.length!==0){const X=ut.value(k.value[0]);Q=t.options.findIndex(ge=>Qi(ut.value(ge),X))}ee(Q)}zt(Q)}function ai(S,Q){s.value===!0&&D.innerLoading.value===!1&&(ee(-1,!0),$e(()=>{s.value===!0&&D.innerLoading.value===!1&&(S>Q?ee():Mn(!0))}))}function Tt(){a.value===!1&&I.value!==null&&I.value.updatePosition()}function Bi(S){S!==void 0&&Dt(S),n("popupShow",S),D.hasPopupOpen=!0,D.onControlFocusin(S)}function qi(S){S!==void 0&&Dt(S),n("popupHide",S),D.hasPopupOpen=!1,D.onControlFocusout(S)}function li(){A=r.platform.is.mobile!==!0&&t.behavior!=="dialog"?!1:t.behavior!=="menu"&&(t.useInput===!0?e["no-option"]!==void 0||t.onFilter!==void 0||ne.value===!1:!0),M=r.platform.is.ios===!0&&A===!0&&t.useInput===!0?"fade":t.transitionShow}return Kc(li),Pm(Tt),li(),Ze(()=>{g!==null&&clearTimeout(g),T!==null&&clearTimeout(T)}),Object.assign(i,{showPopup:sn,hidePopup:yt,removeAtIndex:Fe,add:Rn,toggleOption:Rt,getOptionIndex:()=>l.value,setOptionIndex:zt,moveOptionSelection:ni,filter:jt,updateMenuPosition:Tt,updateInputValue:Pt,isOptionSelected:ii,getEmittingOptionValue:ti,isOptionDisabled:(...S)=>tn.value.apply(null,S)===!0,getOptionValue:(...S)=>ut.value.apply(null,S),getOptionLabel:(...S)=>tt.value.apply(null,S)}),Object.assign(D,{innerValue:k,fieldClass:O(()=>`q-select q-field--auto-height q-select--with${t.useInput!==!0?"out":""}-input q-select--with${t.useChips!==!0?"out":""}-chips q-select--${t.multiple===!0?"multiple":"single"}`),inputRef:H,targetRef:G,hasValue:se,showPopup:sn,floatingLabel:O(()=>t.hideSelected!==!0&&se.value===!0||typeof c.value=="number"||c.value.length!==0||br(t.displayValue)),getControlChild:()=>{if(D.editable.value!==!1&&(a.value===!0||ne.value!==!0||e["no-option"]!==void 0))return A===!0?Nn():xn();D.hasPopupOpen===!0&&(D.hasPopupOpen=!1)},controlEvents:{onFocusin(S){D.onControlFocusin(S)},onFocusout(S){D.onControlFocusout(S,()=>{Ht(),on()})},onClick(S){var Q;if(_t(S),A!==!0&&s.value===!0){on(),(Q=G.value)==null||Q.focus();return}sn(S)}},getControl:S=>{const Q=Pn(),X=S===!0||a.value!==!0||A!==!0;if(t.useInput===!0)Q.push(Fi(S,X));else if(D.editable.value===!0){const be=X===!0?Zt.value:void 0;Q.push(q("input",{ref:X===!0?G:void 0,key:"d_t",class:"q-select__focus-target",id:X===!0?D.targetUid.value:void 0,value:ye.value,readonly:!0,"data-autofocus":S===!0||t.autofocus===!0||void 0,...be,onKeydown:oi,onKeyup:ri,onKeypress:Mr})),X===!0&&typeof t.autocomplete=="string"&&t.autocomplete.length!==0&&Q.push(q("input",{class:"q-select__autocomplete-input",autocomplete:t.autocomplete,tabindex:-1,onKeyup:Nr}))}if(v.value!==void 0&&t.disable!==!0&&nn.value.length!==0){const be=nn.value.map(ke=>q("option",{value:ke,selected:!0}));Q.push(q("select",{class:"hidden",name:v.value,multiple:t.multiple},be))}const ge=t.useInput===!0||X!==!0?void 0:D.splitAttrs.attributes.value;return q("div",{class:"q-field__native row items-center",...ge,...D.splitAttrs.listeners.value},Q)},getInnerAppend:()=>t.loading!==!0&&f.value!==!0&&t.hideDropdownIcon!==!0?[q(cn,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:Cn.value})]:null}),gl(D)}});const oE={class:"title-section"},sE={class:"row search-create-section"},aE={class:"add-button-wrapper"},lE={class:"notes-scroll",style:{"padding-top":"20px"}},uE=["onClick"],cE={class:"note-title"},hE={class:"ellipsis"},dE={class:"note-notebook"},fE={class:"col-auto"},mE={__name:"NotesList",props:["notes","ActiveNote","notebooks","ActiveNotebook"],emits:["OdabranNote","refresh"],setup(t,{emit:e}){const n=t,i=e,r=Y(!1),s=Y(""),a=Y(""),l=Y(""),c=O(()=>{const A=l.value.toLowerCase();return n.ActiveNotebook?n.notes.filter(V=>{var R;return((R=n.notebooks.find(L=>L.id===n.ActiveNotebook))==null?void 0:R.name)===V.notebook&&V.title.toLowerCase().includes(A)}):[...n.notes].filter(V=>V.title.toLowerCase().includes(A)).sort((V,R)=>{const L=new Date(V.lastEdited||0);return new Date(R.lastEdited||0)-L})}),d=Y(!1),f=Y(null);async function g(){if(!(!s.value||!a.value))try{await Wd(wr(Qt,`notebooks/${s.value}/notes`),{NoteName:a.value,NoteContent:"",DateEdited:new Date().toISOString()}),r.value=!1,a.value="",i("refresh")}catch(A){console.error("Error adding note:",A)}}function T(A){f.value=A,d.value=!0}async function _(){const A=f.value;if(!A)return;const V=n.notebooks.find(R=>R.name===A.notebook);if(!!V)try{await _a(Er(Qt,`notebooks/${V.id}/notes/${A.id}`)),d.value=!1,f.value=null,i("refresh")}catch(R){console.error("Error",R)}}return(A,V)=>{var R;return Mt(),zn("div",null,[Ee("div",oE,Ji(n.ActiveNotebook?((R=n.notebooks.find(L=>L.id===n.ActiveNotebook))==null?void 0:R.name)||"Notebook":"Recently edited"),1),Ee("div",sE,[fe(Ir,{class:"search-input",modelValue:l.value,"onUpdate:modelValue":V[0]||(V[0]=L=>l.value=L),outlined:"","bg-color":"white",label:"Notes:"},null,8,["modelValue"]),Ee("div",aE,[fe(Le,{label:"+",round:"",color:"yellow","text-color":"black",onClick:V[1]||(V[1]=L=>r.value=!0)})])]),fe(Ar,{modelValue:r.value,"onUpdate:modelValue":V[4]||(V[4]=L=>r.value=L)},{default:Pe(()=>[fe(cr,{class:"note-dialog"},{default:Pe(()=>[fe(ur,null,{default:Pe(()=>[V[6]||(V[6]=Ee("div",null,"Create Note",-1)),fe(rE,{modelValue:s.value,"onUpdate:modelValue":V[2]||(V[2]=L=>s.value=L),options:t.notebooks.map(L=>L.id),"option-label":L=>{var M;return((M=t.notebooks.find(F=>F.id===L))==null?void 0:M.name)||L},label:"Select Notebook"},null,8,["modelValue","options","option-label"]),fe(Ir,{modelValue:a.value,"onUpdate:modelValue":V[3]||(V[3]=L=>a.value=L),label:"Note Title"},null,8,["modelValue"])]),_:1,__:[6]}),fe(Lo,null,{default:Pe(()=>[vo(fe(Le,{label:"Cancel"},null,512),[[qo]]),fe(Le,{label:"Create",color:"primary",onClick:g})]),_:1})]),_:1})]),_:1},8,["modelValue"]),Ee("div",lE,[(Mt(!0),zn(yo,null,Jc(c.value,L=>{var M;return Mt(),Gs(cr,{key:L.id,class:xm(["note-card",{"text-white":L.id===((M=t.ActiveNote)==null?void 0:M.id)}]),style:Zc({backgroundColor:L.notebook===t.ActiveNotebook?"#2d2d2d":"#2b2b2b",color:"white"})},{default:Pe(()=>[fe(ur,{class:"row items-center"},{default:Pe(()=>[Ee("div",{class:"col",onClick:F=>A.$emit("OdabranNote",L),style:{cursor:"pointer"}},[Ee("div",cE,Ji(L.title),1),Ee("div",hE,Ji(L.content),1),Ee("div",dE," In notebook: "+Ji(L.notebook),1)],8,uE),Ee("div",fE,[fe(Le,{flat:"",dense:"",onClick:eh(F=>T(L),["stop"]),class:"delete-btn"},{default:Pe(()=>V[7]||(V[7]=[Ee("img",{src:Pf,class:"delete-icon"},null,-1)])),_:2,__:[7]},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["class","style"])}),128))]),fe(Ar,{modelValue:d.value,"onUpdate:modelValue":V[5]||(V[5]=L=>d.value=L)},{default:Pe(()=>[fe(cr,{class:"dialog-card"},{default:Pe(()=>[fe(ur,null,{default:Pe(()=>V[8]||(V[8]=[Ws(" Are you sure you want to delete this note? ")])),_:1,__:[8]}),fe(Lo,null,{default:Pe(()=>[vo(fe(Le,{label:"Exit"},null,512),[[qo]]),fe(Le,{label:"Delete",color:"primary",onClick:_})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};function Ff(t,e){if(e&&t===e)return null;const n=t.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(n)===!0)return t;const i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r=i.display;return r==="block"||r==="table"?t:Ff(t.parentNode)}function Hs(t,e,n){return!t||t===document.body?!1:n===!0&&t===e||(e===document?document.body:e).contains(t.parentNode)}function Bf(t,e,n){if(n||(n=document.createRange(),n.selectNode(t),n.setStart(t,0)),e.count===0)n.setEnd(t,e.count);else if(e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(n.setEnd(t,e.count),e.count=0);else for(let i=0;e.count!==0&&i<t.childNodes.length;i++)n=Bf(t.childNodes[i],e,n);return n}const gE=/^https?:\/\//;class pE{constructor(e,n){this.el=e,this.eVm=n,this._range=null}get selection(){if(this.el){const e=document.getSelection();if(Hs(e.anchorNode,this.el,!0)&&Hs(e.focusNode,this.el,!0))return e}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const e=this.selection;return e!=null&&e.rangeCount?e.getRangeAt(0):this._range}get parent(){const e=this.range;if(e!==null){const n=e.startContainer;return n.nodeType===document.ELEMENT_NODE?n:n.parentNode}return null}get blockParent(){const e=this.parent;return e!==null?Ff(e,this.el):null}save(e=this.range){e!==null&&(this._range=e)}restore(e=this._range){const n=document.createRange(),i=document.getSelection();e!==null?(n.setStart(e.startContainer,e.startOffset),n.setEnd(e.endContainer,e.endOffset),i.removeAllRanges(),i.addRange(n)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let e=-1,n;const i=document.getSelection(),r=this.el.parentNode;if(i.focusNode&&Hs(i.focusNode,r))for(n=i.focusNode,e=i.focusOffset;n&&n!==r;)n!==this.el&&n.previousSibling?(n=n.previousSibling,e+=n.textContent.length):n=n.parentNode;this.savedPos=e}restorePosition(e=0){if(this.savedPos>0&&this.savedPos<e){const n=window.getSelection(),i=Bf(this.el,{count:this.savedPos});i&&(i.collapse(!1),n.removeAllRanges(),n.addRange(i))}}hasParent(e,n){const i=n?this.parent:this.blockParent;return i!==null?i.nodeName.toLowerCase()===e.toLowerCase():!1}hasParents(e,n,i=this.parent){return i===null?!1:e.includes(i.nodeName.toLowerCase())===!0?!0:n===!0?this.hasParents(e,n,i.parentNode):!1}is(e,n){if(this.selection===null)return!1;switch(e){case"formatBlock":return n==="DIV"&&this.parent===this.el||this.hasParent(n,n==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(e)===n;case"fontName":const i=document.queryCommandValue(e);return i===`"${n}"`||i===n;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const r=document.queryCommandState(e);return n!==void 0?r===n:r}}getParentAttribute(e){return this.parent!==null?this.parent.getAttribute(e):null}can(e){if(e==="outdent")return this.hasParents(["blockquote","li"],!0);if(e==="indent")return this.hasParents(["li"],!0);if(e==="link")return this.selection!==null||this.is("link")}apply(e,n,i=th){if(e==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(n)&&this.is(e,n)&&(e="outdent",n=null),n==="PRE"&&this.is(e,"PRE")&&(n="P");else if(e==="print"){i();const r=window.open();r.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),r.print(),r.close();return}else if(e==="link"){const r=this.getParentAttribute("href");if(r===null){const s=this.selectWord(this.selection),a=s?s.toString():"";if(!a.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=gE.test(a)?a:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(s.getRangeAt(0))}else this.eVm.editLinkUrl.value=r,this.range.selectNodeContents(this.parent),this.save();return}else if(e==="fullscreen"){this.eVm.toggleFullscreen(),i();return}else if(e==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),i();return}document.execCommand(e,!1,n),i()}selectWord(e){if(e===null||e.isCollapsed!==!0||e.modify===void 0)return e;const n=document.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset);const i=n.collapsed?["backward","forward"]:["forward","backward"];n.detach();const r=e.focusNode,s=e.focusOffset;return e.collapse(e.anchorNode,e.anchorOffset),e.modify("move",i[0],"character"),e.modify("move",i[1],"word"),e.extend(r,s),e.modify("extend",i[1],"character"),e.modify("extend",i[0],"word"),e}}var vE=Ke({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:e}){const n=O(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>t[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>q("div",{class:n.value},at(e.default))}});const yE=Object.keys(ih);function _E(t){return yE.reduce((e,n)=>{const i=t[n];return i!==void 0&&(e[n]=i),e},{})}var wE=Ke({name:"QBtnDropdown",props:{...ih,...yi,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:n}){const{proxy:i}=Ne(),r=Y(t.modelValue),s=Y(null),a=yf(),l=O(()=>{const U={"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a.value,"aria-label":t.toggleAriaLabel||i.$q.lang.label[r.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(U["aria-disabled"]="true"),U}),c=O(()=>"q-btn-dropdown__arrow"+(r.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),d=O(()=>Dm(t)),f=O(()=>_E(t));me(()=>t.modelValue,U=>{var H;(H=s.value)==null||H[U?"show":"hide"]()}),me(()=>t.split,F);function g(U){r.value=!0,n("beforeShow",U)}function T(U){n("show",U),n("update:modelValue",!0)}function _(U){r.value=!1,n("beforeHide",U)}function A(U){n("hide",U),n("update:modelValue",!1)}function V(U){n("click",U)}function R(U){Dt(U),F(),n("click",U)}function L(U){var H;(H=s.value)==null||H.toggle(U)}function M(U){var H;(H=s.value)==null||H.show(U)}function F(U){var H;(H=s.value)==null||H.hide(U)}return Object.assign(i,{show:M,hide:F,toggle:L}),Ut(()=>{t.modelValue===!0&&M()}),()=>{const U=[q(cn,{class:c.value,name:t.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&U.push(q(Of,{ref:s,id:a.value,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noEscDismiss:t.noEscDismiss,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,noFocus:t.noFocus,noRefocus:t.noRefocus,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:g,onShow:T,onBeforeHide:_,onHide:A},e.default)),t.split===!1?q(Le,{class:"q-btn-dropdown q-btn-dropdown--simple",...f.value,...l.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:V},{default:()=>at(e.label,[]).concat(U),loading:e.loading}):q(vE,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...d.value,glossy:t.glossy,stretch:t.stretch},()=>[q(Le,{class:"q-btn-dropdown--current",...f.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:R},{default:e.label,loading:e.loading}),q(Le,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...l.value,...d.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>U)])}}}),EE=Ke({name:"QTooltip",inheritAttrs:!1,props:{...Vf,...yl,...yi,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...yi.transitionShow,default:"jump-down"},transitionHide:{...yi.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:jo},self:{type:String,default:"top middle",validator:jo},offset:{type:Array,default:()=>[14,14],validator:Mf},scrollTarget:rh,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[..._l],setup(t,{slots:e,emit:n,attrs:i}){let r,s;const a=Ne(),{proxy:{$q:l}}=a,c=Y(null),d=Y(!1),f=O(()=>Ho(t.anchor,l.lang.rtl)),g=O(()=>Ho(t.self,l.lang.rtl)),T=O(()=>t.persistent!==!0),{registerTick:_,removeTick:A}=vl(),{registerTimeout:V}=pl(),{transitionProps:R,transitionStyle:L}=El(t),{localScrollTarget:M,changeScrollEvent:F,unconfigureScrollTarget:U}=Df(t,re),{anchorEl:H,canShow:G,anchorEvents:I}=xf({showing:d,configureAnchorEl:Z}),{show:y,hide:p}=wl({showing:d,canShow:G,handleShow:w,handleHide:te,hideOnRouteChange:T,processOnMount:!0});Object.assign(I,{delayShow:oe,delayHide:K});const{showPortal:v,hidePortal:b,renderPortal:E}=Tl(a,c,k,"tooltip");if(l.platform.is.mobile===!0){const $={anchorEl:H,innerRef:c,onClickOutside(se){return p(se),se.target.classList.contains("q-dialog__backdrop")&&gt(se),!0}},le=O(()=>t.modelValue===null&&t.persistent!==!0&&d.value===!0);me(le,se=>{(se===!0?Nf:zo)($)}),Ze(()=>{zo($)})}function w($){v(),_(()=>{s=new MutationObserver(()=>ee()),s.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ee(),re()}),r===void 0&&(r=me(()=>l.screen.width+"|"+l.screen.height+"|"+t.self+"|"+t.anchor+"|"+l.lang.rtl,ee)),V(()=>{v(!0),n("show",$)},t.transitionDuration)}function te($){A(),b(),ce(),V(()=>{b(!0),n("hide",$)},t.transitionDuration)}function ce(){s!==void 0&&(s.disconnect(),s=void 0),r!==void 0&&(r(),r=void 0),U(),Qs(I,"tooltipTemp")}function ee(){Il({targetEl:c.value,offset:t.offset,anchorEl:H.value,anchorOrigin:f.value,selfOrigin:g.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function oe($){if(l.platform.is.mobile===!0){ba(),document.body.classList.add("non-selectable");const le=H.value,se=["touchmove","touchcancel","touchend","click"].map(C=>[le,C,"delayHide","passiveCapture"]);_o(I,"tooltipTemp",se)}V(()=>{y($)},t.delay)}function K($){l.platform.is.mobile===!0&&(Qs(I,"tooltipTemp"),ba(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),V(()=>{p($)},t.hideDelay)}function Z(){if(t.noParentEvent===!0||H.value===null)return;const $=l.platform.is.mobile===!0?[[H.value,"touchstart","delayShow","passive"]]:[[H.value,"mouseenter","delayShow","passive"],[H.value,"mouseleave","delayHide","passive"]];_o(I,"anchor",$)}function re(){if(H.value!==null||t.scrollTarget!==void 0){M.value=oh(H.value,t.scrollTarget);const $=t.noParentEvent===!0?ee:p;F(M.value,$)}}function D(){return d.value===!0?q("div",{...i,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",i.class],style:[i.style,L.value],role:"tooltip"},at(e.default)):null}function k(){return q(hr,R.value,D)}return Ze(ce),Object.assign(a.proxy,{updatePosition:ee}),E}});function qf(t,e,n){e.handler?e.handler(t,n,n.caret):n.runCmd(e.cmd,e.param)}function Al(t){return q("div",{class:"q-editor__toolbar-group"},t)}function $f(t,e,n,i=!1){const r=i||(e.type==="toggle"?e.toggled?e.toggled(t):e.cmd&&t.caret.is(e.cmd,e.param):!1),s=[];if(e.tip&&t.$q.platform.is.desktop){const a=e.key?q("div",[q("small",`(CTRL + ${String.fromCharCode(e.key)})`)]):null;s.push(q(EE,{delay:1e3},()=>[q("div",{innerHTML:e.tip}),a]))}return q(Le,{...t.buttonProps.value,icon:e.icon!==null?e.icon:void 0,color:r?e.toggleColor||t.props.toolbarToggleColor:e.color||t.props.toolbarColor,textColor:r&&!t.props.toolbarPush?null:e.textColor||t.props.toolbarTextColor,label:e.label,disable:e.disable?typeof e.disable=="function"?e.disable(t):!0:!1,size:"sm",onClick(a){n==null||n(),qf(a,e,t)}},()=>s)}function TE(t,e){const n=e.list==="only-icons";let i=e.label,r=e.icon!==null?e.icon:void 0,s,a;function l(){d.component.proxy.hide()}if(n)a=e.options.map(f=>{const g=f.type===void 0?t.caret.is(f.cmd,f.param):!1;return g&&(i=f.tip,r=f.icon!==null?f.icon:void 0),$f(t,f,l,g)}),s=t.toolbarBackgroundClass.value,a=[Al(a)];else{const f=t.props.toolbarToggleColor!==void 0?`text-${t.props.toolbarToggleColor}`:null,g=t.props.toolbarTextColor!==void 0?`text-${t.props.toolbarTextColor}`:null,T=e.list==="no-icons";a=e.options.map(_=>{const A=_.disable?_.disable(t):!1,V=_.type===void 0?t.caret.is(_.cmd,_.param):!1;V&&(i=_.tip,r=_.icon!==null?_.icon:void 0);const R=_.htmlTip;return q(bl,{active:V,activeClass:f,clickable:!0,disable:A,dense:!0,onClick(L){var M;l(),(L==null?void 0:L.qAvoidFocus)!==!0&&((M=t.contentRef.value)==null||M.focus()),t.caret.restore(),qf(L,_,t)}},()=>[T===!0?null:q(Bo,{class:V?f:g,side:!0},()=>q(cn,{name:_.icon!==null?_.icon:void 0})),q(Bo,R?()=>q("div",{class:"text-no-wrap",innerHTML:_.htmlTip}):_.tip?()=>q("div",{class:"text-no-wrap"},_.tip):void 0)])}),s=[t.toolbarBackgroundClass.value,g]}const c=e.highlight&&i!==e.label,d=q(wE,{...t.buttonProps.value,noCaps:!0,noWrap:!0,color:c?t.props.toolbarToggleColor:t.props.toolbarColor,textColor:c&&!t.props.toolbarPush?null:t.props.toolbarTextColor,label:e.fixedLabel?e.label:i,icon:e.fixedIcon?e.icon!==null?e.icon:void 0:r,contentClass:s,onShow:f=>t.emit("dropdownShow",f),onHide:f=>t.emit("dropdownHide",f),onBeforeShow:f=>t.emit("dropdownBeforeShow",f),onBeforeHide:f=>t.emit("dropdownBeforeHide",f)},()=>a);return d}function bE(t){if(t.caret)return t.buttons.value.filter(e=>!t.isViewingSource.value||e.find(n=>n.cmd==="viewsource")).map(e=>Al(e.map(n=>t.isViewingSource.value&&n.cmd!=="viewsource"?!1:n.type==="slot"?at(t.slots[n.slot]):n.type==="dropdown"?TE(t,n):$f(t,n))))}function IE(t,e,n,i={}){const r=Object.keys(i);if(r.length===0)return{};const s={default_font:{cmd:"fontName",param:t,icon:n,tip:e}};return r.forEach(a=>{const l=i[a];s[a]={cmd:"fontName",param:l,icon:n,tip:l,htmlTip:`<font face="${l}">${l}</font>`}}),s}function AE(t){if(t.caret){const e=t.props.toolbarColor||t.props.toolbarTextColor;let n=t.editLinkUrl.value;const i=()=>{t.caret.restore(),n!==t.editLinkUrl.value&&document.execCommand("createLink",!1,n===""?" ":n),t.editLinkUrl.value=null};return[q("div",{class:`q-mx-xs text-${e}`},`${t.$q.lang.editor.url}: `),q("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:n,onInput:r=>{Dt(r),n=r.target.value},onKeydown:r=>{if(Qo(r)!==!0)switch(r.keyCode){case 13:return _t(r),i();case 27:_t(r),t.caret.restore(),(!t.editLinkUrl.value||t.editLinkUrl.value==="https://")&&document.execCommand("unlink"),t.editLinkUrl.value=null;break}}}),Al([q(Le,{key:"qedt_btm_rem",tabindex:-1,...t.buttonProps.value,label:t.$q.lang.label.remove,noCaps:!0,onClick:()=>{t.caret.restore(),document.execCommand("unlink"),t.editLinkUrl.value=null}}),q(Le,{key:"qedt_btm_upd",...t.buttonProps.value,label:t.$q.lang.label.update,noCaps:!0,onClick:i})])]}}let Yi=0;const SE={fullscreen:Boolean,noRouteFullscreenExit:Boolean},CE=["update:fullscreen","fullscreen"];function RE(){const t=Ne(),{props:e,emit:n,proxy:i}=t;let r,s,a;const l=Y(!1);Xc(t)===!0&&me(()=>i.$route.fullPath,()=>{e.noRouteFullscreenExit!==!0&&f()}),me(()=>e.fullscreen,g=>{l.value!==g&&c()}),me(l,g=>{n("update:fullscreen",g),n("fullscreen",g)});function c(){l.value===!0?f():d()}function d(){l.value!==!0&&(l.value=!0,a=i.$el.parentNode,a.replaceChild(s,i.$el),document.body.appendChild(i.$el),Yi++,Yi===1&&document.body.classList.add("q-body--fullscreen-mixin"),r={handler:f},po.add(r))}function f(){l.value===!0&&(r!==void 0&&(po.remove(r),r=void 0),a.replaceChild(i.$el,s),l.value=!1,Yi=Math.max(0,Yi-1),Yi===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),i.$el.scrollIntoView!==void 0&&setTimeout(()=>{i.$el.scrollIntoView()})))}return nh(()=>{s=document.createElement("span")}),Ut(()=>{e.fullscreen===!0&&d()}),Ze(f),Object.assign(i,{toggleFullscreen:c,setFullscreen:d,exitFullscreen:f}),{inFullscreen:l,toggleFullscreen:c}}const kE=Object.prototype.toString,Ks=Object.prototype.hasOwnProperty,PE=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(t=>"[object "+t+"]"));function Hc(t){if(t!==Object(t)||PE.has(kE.call(t))===!0||t.constructor&&Ks.call(t,"constructor")===!1&&Ks.call(t.constructor.prototype,"isPrototypeOf")===!1)return!1;let e;for(e in t);return e===void 0||Ks.call(t,e)}function Uf(){let t,e,n,i,r,s,a=arguments[0]||{},l=1,c=!1;const d=arguments.length;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),Object(a)!==a&&typeof a!="function"&&(a={}),d===l&&(a=this,l--);l<d;l++)if((t=arguments[l])!==null)for(e in t)n=a[e],i=t[e],a!==i&&(c===!0&&i&&((r=Array.isArray(i))||Hc(i)===!0)?(r===!0?s=Array.isArray(n)===!0?n:[]:s=Hc(n)===!0?n:{},a[e]=Uf(c,s,i)):i!==void 0&&(a[e]=i));return a}var VE=Ke({name:"QEditor",props:{...Di,...SE,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:t=>t.length===0||t.every(e=>e.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:t=>["div","p"].includes(t),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...CE,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(t,{slots:e,emit:n}){const{proxy:i}=Ne(),{$q:r}=i,s=Ni(t,r),{inFullscreen:a,toggleFullscreen:l}=RE(),c=_f(),d=Y(null),f=Y(null),g=Y(null),T=Y(!1),_=O(()=>!t.readonly&&!t.disable);let A,V,R=t.modelValue;document.execCommand("defaultParagraphSeparator",!1,t.paragraphTag),A=window.getComputedStyle(document.body).fontFamily;const L=O(()=>t.toolbarBg?` bg-${t.toolbarBg}`:""),M=O(()=>{const C=t.toolbarOutline!==!0&&t.toolbarPush!==!0;return{type:"a",flat:C,noWrap:!0,outline:t.toolbarOutline,push:t.toolbarPush,rounded:t.toolbarRounded,dense:!0,color:t.toolbarColor,disable:!_.value,size:"sm"}}),F=O(()=>{const C=r.lang.editor,x=r.iconSet.editor;return{bold:{cmd:"bold",icon:x.bold,tip:C.bold,key:66},italic:{cmd:"italic",icon:x.italic,tip:C.italic,key:73},strike:{cmd:"strikeThrough",icon:x.strikethrough,tip:C.strikethrough,key:83},underline:{cmd:"underline",icon:x.underline,tip:C.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:x.unorderedList,tip:C.unorderedList},ordered:{cmd:"insertOrderedList",icon:x.orderedList,tip:C.orderedList},subscript:{cmd:"subscript",icon:x.subscript,tip:C.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:x.superscript,tip:C.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:ne=>ne.caret&&!ne.caret.can("link"),icon:x.hyperlink,tip:C.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:x.toggleFullscreen,tip:C.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:x.viewSource,tip:C.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:x.quote,tip:C.quote,key:81},left:{cmd:"justifyLeft",icon:x.left,tip:C.left},center:{cmd:"justifyCenter",icon:x.center,tip:C.center},right:{cmd:"justifyRight",icon:x.right,tip:C.right},justify:{cmd:"justifyFull",icon:x.justify,tip:C.justify},print:{type:"no-state",cmd:"print",icon:x.print,tip:C.print,key:80},outdent:{type:"no-state",disable:ne=>ne.caret&&!ne.caret.can("outdent"),cmd:"outdent",icon:x.outdent,tip:C.outdent},indent:{type:"no-state",disable:ne=>ne.caret&&!ne.caret.can("indent"),cmd:"indent",icon:x.indent,tip:C.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:x.removeFormat,tip:C.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:x.hr,tip:C.hr},undo:{type:"no-state",cmd:"undo",icon:x.undo,tip:C.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:x.redo,tip:C.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:x.heading1||x.heading,tip:C.heading1,htmlTip:`<h1 class="q-ma-none">${C.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:x.heading2||x.heading,tip:C.heading2,htmlTip:`<h2 class="q-ma-none">${C.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:x.heading3||x.heading,tip:C.heading3,htmlTip:`<h3 class="q-ma-none">${C.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:x.heading4||x.heading,tip:C.heading4,htmlTip:`<h4 class="q-ma-none">${C.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:x.heading5||x.heading,tip:C.heading5,htmlTip:`<h5 class="q-ma-none">${C.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:x.heading6||x.heading,tip:C.heading6,htmlTip:`<h6 class="q-ma-none">${C.heading6}</h6>`},p:{cmd:"formatBlock",param:t.paragraphTag,icon:x.heading,tip:C.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:x.code,htmlTip:`<code>${C.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:x.size1||x.size,tip:C.size1,htmlTip:`<font size="1">${C.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:x.size2||x.size,tip:C.size2,htmlTip:`<font size="2">${C.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:x.size3||x.size,tip:C.size3,htmlTip:`<font size="3">${C.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:x.size4||x.size,tip:C.size4,htmlTip:`<font size="4">${C.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:x.size5||x.size,tip:C.size5,htmlTip:`<font size="5">${C.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:x.size6||x.size,tip:C.size6,htmlTip:`<font size="6">${C.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:x.size7||x.size,tip:C.size7,htmlTip:`<font size="7">${C.size7}</font>`}}}),U=O(()=>{const C=t.definitions||{},x=t.definitions||t.fonts?Uf(!0,{},F.value,C,IE(A,r.lang.editor.defaultFont,r.iconSet.editor.font,t.fonts)):F.value;return t.toolbar.map(ne=>ne.map(j=>{if(j.options)return{type:"dropdown",icon:j.icon,label:j.label,size:"sm",dense:!0,fixedLabel:j.fixedLabel,fixedIcon:j.fixedIcon,highlight:j.highlight,list:j.list,options:j.options.map(Me=>x[Me])};const ye=x[j];return ye?ye.type==="no-state"||C[j]&&(ye.cmd===void 0||F.value[ye.cmd]&&F.value[ye.cmd].type==="no-state")?ye:Object.assign({type:"toggle"},ye):{type:"slot",slot:j}}))}),H={$q:r,props:t,slots:e,emit:n,inFullscreen:a,toggleFullscreen:l,runCmd:k,isViewingSource:T,editLinkUrl:g,toolbarBackgroundClass:L,buttonProps:M,contentRef:f,buttons:U,setContent:D};me(()=>t.modelValue,C=>{R!==C&&(R=C,D(C,!0))}),me(g,C=>{n(`link${C?"Show":"Hide"}`)});const G=O(()=>t.toolbar&&t.toolbar.length!==0),I=O(()=>{const C={},x=ne=>{ne.key&&(C[ne.key]={cmd:ne.cmd,param:ne.param})};return U.value.forEach(ne=>{ne.forEach(j=>{j.options?j.options.forEach(x):x(j)})}),C}),y=O(()=>a.value?t.contentStyle:[{minHeight:t.minHeight,height:t.height,maxHeight:t.maxHeight},t.contentStyle]),p=O(()=>`q-editor q-editor--${T.value===!0?"source":"default"}`+(t.disable===!0?" disabled":"")+(a.value===!0?" fullscreen column":"")+(t.square===!0?" q-editor--square no-border-radius":"")+(t.flat===!0?" q-editor--flat":"")+(t.dense===!0?" q-editor--dense":"")+(s.value===!0?" q-editor--dark q-dark":"")),v=O(()=>[t.contentClass,"q-editor__content",{col:a.value,"overflow-auto":a.value||t.maxHeight}]),b=O(()=>t.disable===!0?{"aria-disabled":"true"}:{});function E(){if(f.value!==null){const C=`inner${T.value===!0?"Text":"HTML"}`,x=f.value[C];x!==t.modelValue&&(R=x,n("update:modelValue",x))}}function w(C){if(n("keydown",C),C.ctrlKey!==!0||Qo(C)===!0){$();return}const x=C.keyCode,ne=I.value[x];if(ne!==void 0){const{cmd:j,param:ye}=ne;gt(C),k(j,ye,!1)}}function te(C){$(),n("click",C)}function ce(C){if(f.value!==null){const{scrollTop:x,scrollHeight:ne}=f.value;V=ne-x}H.caret.save(),n("blur",C)}function ee(C){$e(()=>{f.value!==null&&V!==void 0&&(f.value.scrollTop=f.value.scrollHeight-V)}),n("focus",C)}function oe(C){const x=d.value;if(x!==null&&x.contains(C.target)===!0&&(C.relatedTarget===null||x.contains(C.relatedTarget)!==!0)){const ne=`inner${T.value===!0?"Text":"HTML"}`;H.caret.restorePosition(f.value[ne].length),$()}}function K(C){const x=d.value;x!==null&&x.contains(C.target)===!0&&(C.relatedTarget===null||x.contains(C.relatedTarget)!==!0)&&(H.caret.savePosition(),$())}function Z(){V=void 0}function re(C){H.caret.save()}function D(C,x){if(f.value!==null){x===!0&&H.caret.savePosition();const ne=`inner${T.value===!0?"Text":"HTML"}`;f.value[ne]=C,x===!0&&(H.caret.restorePosition(f.value[ne].length),$())}}function k(C,x,ne=!0){le(),H.caret.restore(),H.caret.apply(C,x,()=>{le(),H.caret.save(),ne&&$()})}function $(){setTimeout(()=>{g.value=null,i.$forceUpdate()},1)}function le(){Dr(()=>{var C;(C=f.value)==null||C.focus({preventScroll:!0})})}function se(){return f.value}return Ut(()=>{H.caret=i.caret=new pE(f.value,H),D(t.modelValue),$(),document.addEventListener("selectionchange",re)}),Ze(()=>{document.removeEventListener("selectionchange",re)}),Object.assign(i,{runCmd:k,refreshToolbar:$,focus:le,getContentEl:se}),()=>{let C;if(G.value){const x=[q("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+L.value},bE(H))];g.value!==null&&x.push(q("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+L.value},AE(H))),C=q("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},x)}return q("div",{ref:d,class:p.value,style:{height:a.value===!0?"100%":null},...b.value,onFocusin:oe,onFocusout:K},[C,q("div",{ref:f,style:y.value,class:v.value,contenteditable:_.value,placeholder:t.placeholder,...c.listeners.value,onInput:E,onKeydown:w,onClick:te,onBlur:ce,onFocus:ee,onMousedown:Z,onTouchstartPassive:Z})])}}});const xE={class:"top-padding row justify-center"},DE={class:"row justify-center notebook-label"},NE={class:"fixed-submit-btn"},ME={__name:"NoteEditor",props:["note"],emits:["update-note","refresh"],setup(t,{emit:e}){const n=t,i=Y({...n.note});return me(()=>n.note,r=>{i.value={...r}}),(r,s)=>(Mt(),zn(yo,null,[Ee("div",null,[Ee("div",xE,[fe(Ir,{modelValue:i.value.title,"onUpdate:modelValue":s[0]||(s[0]=a=>i.value.title=a),label:"    Title",class:"note-title-input"},null,8,["modelValue"])]),Ee("div",DE,"Notebook: "+Ji(i.value.notebook),1),fe(VE,{modelValue:i.value.content,"onUpdate:modelValue":s[1]||(s[1]=a=>i.value.content=a),height:"420px",class:"text-white note-editor",toolbar:[["bold","italic","underline"],["unordered","ordered"],["undo","redo"],["fullscreen"]]},null,8,["modelValue"])]),Ee("div",NE,[fe(Le,{color:"yellow",round:"","text-color":"black",label:"\u2714",onClick:s[2]||(s[2]=a=>r.$emit("update-note",i.value))})])],64))}};function OE(){return go(Nm)}const LE={class:"row full-height"},FE={class:"col-12 col-md-3 bg-sidepanel"},BE={class:"col-12 col-md-4 bg-notelist"},qE={class:"col-12 col-md-5 q-pa-sm bg-editor"},$E={class:"sync-btn"},UE={key:0,class:"empty-img-container"},KE={__name:"IndexPage",setup(t){const e=OE(),n=Y([]),i=Y(null),r=Y(null);Ut(s);async function s(){const f=await ya(wr(Qt,"notebooks")),g=[];for(const T of f.docs){const _=T.id,V=T.data().NotebookName||_,L=(await ya(wr(Qt,`notebooks/${_}/notes`))).docs.map(M=>({id:M.id,title:M.data().NoteName,content:M.data().NoteContent,notebook:V,date:M.data().DateEdited||"-",DateEdited:M.data().DateEdited||null}));g.push({id:_,name:V,notes:L})}n.value=g}const a=O(()=>{const f=n.value.flatMap(g=>g.notes);if(i.value){const g=n.value.find(T=>T.id===i.value);return g?g.notes:[]}return[...f].sort((g,T)=>{const _=new Date(g.DateEdited||0);return new Date(T.DateEdited||0)-_})});function l(f){i.value=f,r.value=null}function c(f){r.value=f}async function d(f){const g=n.value.find(_=>_.name===f.notebook);if(!g)return;if(g.notes.findIndex(_=>_.id===f.id)!==-1){const _=Er(Qt,`notebooks/${g.id}/notes/${f.id}`);await $_(_,{NoteName:f.title,NoteContent:f.content,DateEdited:new Date().toISOString()}),await s(),e.notify({message:"Note updated",position:"bottom",timeout:2e3,type:"warning"})}}return(f,g)=>(Mt(),Gs(Bm,{class:"text-white page-black"},{default:Pe(()=>[Ee("div",LE,[Ee("div",FE,[fe(zw,{notebooks:n.value,ActiveNotebook:i.value,onOdabirKnjige:l,onRefresh:s},null,8,["notebooks","ActiveNotebook"])]),Ee("div",BE,[fe(mE,{notes:a.value,ActiveNote:r.value,ActiveNotebook:i.value,notebooks:n.value,onOdabranNote:c,onRefresh:s},null,8,["notes","ActiveNote","ActiveNotebook","notebooks"])]),Ee("div",qE,[g[2]||(g[2]=Ee("div",{class:"preview-label"},"Preview",-1)),Ee("div",$E,[fe(Le,{flat:"",onClick:s,class:"sync-icon-btn"},{default:Pe(()=>g[0]||(g[0]=[Ee("img",{src:qm,class:"sync-icon"},null,-1)])),_:1,__:[0]})]),r.value?ou("",!0):(Mt(),zn("div",UE,g[1]||(g[1]=[Ee("img",{src:$m},null,-1)]))),r.value?(Mt(),Gs(ME,{key:1,note:r.value,onUpdateNote:d,onRefresh:s},null,8,["note"])):ou("",!0)])])]),_:1}))}};export{KE as default};
